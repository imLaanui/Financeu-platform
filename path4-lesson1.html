<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lesson 1 - Why Saving Matters - FinanceU</title>
    <link rel="icon" type="image/svg+xml" href="assets/favicon.svg">
    <link rel="icon" type="image/svg+xml" sizes="16x16" href="assets/favicon-16x16.svg">
    <link rel="icon" type="image/svg+xml" sizes="32x32" href="assets/favicon-32x32.svg">
    <link rel="apple-touch-icon" sizes="180x180" href="assets/apple-touch-icon.svg">
    <link rel="stylesheet" href="styles.css">
    <style>
        /* SVG Icon Alignment Fixes */
        svg {
            display: inline-block;
            vertical-align: middle;
        }

        .intro-card-icon svg,
        .mistake-icon svg,
        .reflection-icon svg,
        .result-icon svg {
            display: block;
            margin: 0 auto;
        }

        .budget-method-emoji svg,
        .budget-item-label svg {
            display: inline-block;
            vertical-align: middle;
            margin-right: 8px;
        }

        p svg, li svg, span svg {
            display: inline-block;
            vertical-align: middle;
            margin: 0 2px;
        }

        .lesson-container {
            max-width: 800px;
            margin: 0 auto;
            padding: 40px 20px;
        }
        .lesson-header {
            text-align: center;
            margin-bottom: 40px;
            padding: 30px;
            background: #FFFFFF;
            border: 1px solid #e5e5e5;
            border-radius: 16px;
            position: relative;
            overflow: hidden;
        }
        .lesson-header::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(59, 130, 246, 0.1) 0%, transparent 70%);
            animation: rotate 20s linear infinite;
        }
        @keyframes rotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        .lesson-header h1 {
            font-size: 36px;
            color: #000000;
            margin-bottom: 10px;
            position: relative;
            z-index: 1;
        }
        .lesson-header .lesson-number {
            color: #2563eb;
            font-size: 18px;
            font-weight: 700;
            margin-bottom: 5px;
            position: relative;
            z-index: 1;
            text-transform: uppercase;
            letter-spacing: 2px;
        }
        .lesson-section {
            background: white;
            padding: 30px;
            border-radius: 12px;
            margin-bottom: 25px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            position: relative;
            border-left: 4px solid transparent;
            transition: all 0.3s ease;
        }
        .lesson-section:hover {
            border-left-color: #2563eb;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }
        .lesson-section h2 {
            color: #2563eb;
            font-size: 24px;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 12px;
        }
        .lesson-section h2::before {
            content: '';
            width: 36px;
            height: 36px;
            border-radius: 8px;
            background: #1d4ed8;
            flex-shrink: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 2px 8px rgba(37, 99, 235, 0.3);
        }
        .lesson-section p {
            line-height: 1.8;
            color: var(--text-secondary);
            margin-bottom: 15px;
        }
        .lesson-section ul {
            line-height: 1.8;
            color: var(--text-secondary);
            margin-left: 20px;
            margin-bottom: 15px;
        }
        .visual-box {
            background: linear-gradient(135deg, #eff6ff 0%, #dbeafe 100%);
            border-left: 4px solid #2563eb;
            padding: 25px;
            border-radius: 12px;
            margin: 20px 0;
            position: relative;
            box-shadow: 0 2px 8px rgba(37, 99, 235, 0.1);
        }
        .visual-box::before {
            content: '';
            position: absolute;
            top: 20px;
            right: 20px;
            font-size: 32px;
            opacity: 0.3;
        }
        .visual-box h3 {
            color: #2563eb;
            margin-bottom: 15px;
            font-size: 18px;
            font-weight: 700;
        }
        .money-flow {
            display: flex;
            justify-content: space-around;
            align-items: center;
            flex-wrap: wrap;
            gap: 15px;
            margin-top: 15px;
        }
        .flow-item {
            text-align: center;
            padding: 15px;
            background: white;
            border-radius: 8px;
            flex: 1;
            min-width: 120px;
        }
        .flow-arrow {
            font-size: 24px;
            color: #2563eb;
        }
        .action-box {
            background: linear-gradient(135deg, #10b98120 0%, #d1fae540 100%);
            border-left: 4px solid #10b981;
            padding: 25px;
            border-radius: 12px;
            position: relative;
            box-shadow: 0 2px 8px rgba(16, 185, 129, 0.1);
        }
        .action-box::before {
            content: '';
            position: absolute;
            top: 20px;
            right: 20px;
            font-size: 32px;
            opacity: 0.5;
        }
        .action-box h3 {
            color: #10b981;
            margin-bottom: 10px;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .reflection-box {
            background: linear-gradient(135deg, #f59e0b20 0%, #fef3c740 100%);
            border-left: 4px solid #f59e0b;
            padding: 25px;
            border-radius: 12px;
            position: relative;
            box-shadow: 0 2px 8px rgba(245, 158, 11, 0.1);
        }
        .reflection-box::before {
            content: '';
            position: absolute;
            top: 20px;
            right: 20px;
            font-size: 32px;
            opacity: 0.5;
        }
        .reflection-box h3 {
            color: #f59e0b;
            margin-bottom: 10px;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .mistakes-list {
            background: linear-gradient(135deg, #fee2e2 0%, #fecaca 100%);
            padding: 25px;
            border-radius: 12px;
            border-left: 4px solid #dc2626;
            position: relative;
            box-shadow: 0 2px 8px rgba(220, 38, 38, 0.1);
        }
        .mistakes-list::before {
            content: '';
            position: absolute;
            top: 20px;
            right: 20px;
            font-size: 32px;
            opacity: 0.5;
        }
        .mistakes-list h3 {
            color: #dc2626;
            margin-bottom: 15px;
            font-weight: 700;
        }
        .btn-finish {
            display: block;
            width: 100%;
            max-width: 400px;
            margin: 30px auto;
            padding: 18px;
            background: #1d4ed8;
            color: #000000;
            text-align: center;
            text-decoration: none;
            border-radius: 8px;
            font-size: 18px;
            font-weight: 600;
            transition: background 0.2s;
            border: none;
            cursor: pointer;
        }
        .btn-finish:hover {
            background: #1d4ed8;
        }
        .back-link {
            display: inline-block;
            margin-bottom: 20px;
            color: #2563eb;
            text-decoration: none;
            font-weight: 600;
        }
        .back-link:hover {
            text-decoration: underline;
        }
        .quiz-container {
            background: linear-gradient(135deg, #eff6ff 0%, #dbeafe 100%);
            border: 2px solid #2563eb;
            border-radius: 12px;
            padding: 30px;
            margin: 40px 0 30px 0;
        }
        .quiz-header {
            text-align: center;
            margin-bottom: 25px;
        }
        .quiz-header h2 {
            color: #2563eb;
            font-size: 28px;
            margin-bottom: 10px;
        }
        .quiz-header p {
            color: var(--text-secondary);
            font-size: 16px;
        }
        .question-card {
            background: white;
            padding: 25px;
            border-radius: 8px;
            margin-bottom: 20px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }
        .question-text {
            font-size: 18px;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 15px;
        }
        .answer-option {
            background: #f9fafb;
            padding: 15px;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            margin-bottom: 10px;
            cursor: pointer;
            transition: all 0.2s;
        }
        .answer-option:hover {
            border-color: #2563eb;
            background: #eff6ff;
        }
        .answer-option.selected {
            border-color: #2563eb;
            background: #dbeafe;
        }
        .answer-option.correct {
            border-color: #10b981;
            background: #d1fae5;
        }
        .answer-option.incorrect {
            border-color: #dc2626;
            background: #fee2e2;
        }
        .btn-submit-quiz {
            display: block;
            width: 100%;
            max-width: 300px;
            margin: 20px auto;
            padding: 15px;
            background: #1d4ed8;
            color: #000000;
            text-align: center;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            border: none;
            cursor: pointer;
            transition: background 0.2s;
        }
        .btn-submit-quiz:hover {
            background: #1d4ed8;
        }
        .btn-submit-quiz:disabled {
            background: #9ca3af;
            cursor: not-allowed;
        }
        .quiz-result {
            background: white;
            padding: 25px;
            border-radius: 8px;
            text-align: center;
            margin-top: 20px;
        }
        .quiz-result.pass {
            border: 3px solid #10b981;
        }
        .quiz-result.fail {
            border: 3px solid #dc2626;
        }
        .result-icon {
            font-size: 48px;
            margin-bottom: 15px;
        }
        .result-text {
            font-size: 24px;
            font-weight: 700;
            margin-bottom: 10px;
        }
        .result-score {
            font-size: 18px;
            color: var(--text-secondary);
            margin-bottom: 20px;
        }
        .btn-retry {
            padding: 12px 24px;
            background: #f59e0b;
            color: #000000;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: background 0.2s;
        }
        .btn-retry:hover {
            background: #d97706;
        }
        .btn-finish:disabled {
            background: #9ca3af;
            cursor: not-allowed;
            opacity: 0.6;
        }
        /* Multi-screen styles */
        .lesson-screen {
            display: none;
        }
        .lesson-screen.active {
            display: block;
            animation: fadeIn 0.3s ease-in;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .screen-progress {
            text-align: center;
            margin-bottom: 20px;
            padding: 12px 20px;
            background: linear-gradient(135deg, #eff6ff 0%, #dbeafe 100%);
            border-radius: 8px;
            font-weight: 600;
            color: #2563eb;
            font-size: 14px;
        }
        .screen-navigation {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 15px;
            margin-top: 30px;
            padding-top: 20px;
            border-top: 2px solid #e5e7eb;
        }
        .btn-nav {
            padding: 12px 24px;
            background: #1d4ed8;
            color: #000000;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .btn-nav:hover {
            background: #1d4ed8;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(37, 99, 235, 0.3);
        }
        .btn-nav:disabled {
            background: #d1d5db;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }
        .btn-nav.btn-prev {
            background: #6b7280;
        }
        .btn-nav.btn-prev:hover {
            background: #4b5563;
        }
        .nav-spacer {
            width: 120px;
        }
        /* Checkpoint styles */
        .checkpoint-container {
            background: linear-gradient(135deg, #E0F2FE 0%, #BAE6FD 100%);
            border: 2px solid #7DD3FC;
            border-radius: 12px;
            padding: 30px;
            margin: 20px 0;
        }
        .checkpoint-header {
            text-align: center;
            margin-bottom: 20px;
        }
        .checkpoint-header h3 {
            color: #0284C7;
            font-size: 24px;
            margin-bottom: 8px;
        }
        .checkpoint-header p {
            color: var(--text-secondary);
            font-size: 15px;
        }
        .checkpoint-question {
            background: white;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 15px;
        }
        .checkpoint-question-text {
            font-size: 18px;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 15px;
        }
        .checkpoint-option {
            background: #f9fafb;
            padding: 15px;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            margin-bottom: 10px;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .checkpoint-option:hover {
            border-color: #0284C7;
            background: #F0F9FF;
        }
        .checkpoint-option.selected {
            border-color: #0284C7;
            background: #E0F2FE;
        }
        .checkpoint-option.correct {
            border-color: #10b981;
            background: #d1fae5;
            cursor: default;
        }
        .checkpoint-option.incorrect {
            border-color: #dc2626;
            background: #fee2e2;
            cursor: default;
        }
        .checkpoint-option input[type="radio"] {
            cursor: pointer;
        }
        .checkpoint-feedback {
            background: white;
            padding: 20px;
            border-radius: 8px;
            margin-top: 20px;
            display: none;
        }
        .checkpoint-feedback.show {
            display: block;
            animation: fadeIn 0.3s ease-in;
        }
        .checkpoint-feedback.correct {
            border-left: 4px solid #10b981;
        }
        .checkpoint-feedback.incorrect {
            border-left: 4px solid #f59e0b;
        }
        .checkpoint-feedback-icon {
            font-size: 32px;
            margin-bottom: 10px;
        }
        .checkpoint-feedback-title {
            font-size: 20px;
            font-weight: 700;
            margin-bottom: 10px;
        }
        .checkpoint-feedback.correct .checkpoint-feedback-title {
            color: #10b981;
        }
        .checkpoint-feedback.incorrect .checkpoint-feedback-title {
            color: #f59e0b;
        }
        .checkpoint-explanation {
            color: var(--text-secondary);
            line-height: 1.6;
            margin-top: 10px;
        }
        .btn-continue {
            display: none;
            width: 100%;
            max-width: 300px;
            margin: 20px auto;
            padding: 15px;
            background: #1d4ed8;
            color: #000000;
            text-align: center;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            border: none;
            cursor: pointer;
            transition: background 0.2s;
        }
        .btn-continue.show {
            display: block;
        }
        .btn-continue:hover {
            background: #1d4ed8;
        }

        /* SCREEN 1: Animated Icons */
        .intro-cards {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin-top: 20px;
        }
        .intro-card {
            background: linear-gradient(135deg, #eff6ff 0%, #dbeafe 100%);
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            transition: all 0.3s;
            border: 2px solid transparent;
        }
        .intro-card:hover {
            transform: translateY(-5px) scale(1.02);
            border-color: #2563eb;
            box-shadow: 0 8px 20px rgba(37, 99, 235, 0.2);
        }
        .intro-card-icon {
            font-size: 48px;
            margin-bottom: 10px;
            animation: float 3s ease-in-out infinite;
        }
        .intro-card:nth-child(2) .intro-card-icon {
            animation-delay: 1s;
        }
        .intro-card:nth-child(3) .intro-card-icon {
            animation-delay: 2s;
        }
        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }
        .intro-card h3 {
            color: #2563eb;
            font-size: 18px;
            margin-bottom: 8px;
            font-weight: 700;
        }
        .intro-card p {
            color: var(--text-secondary);
            font-size: 14px;
            line-height: 1.5;
            margin: 0;
        }

        /* SCREEN 6: Visual Mistakes */
        .mistakes-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin: 20px 0;
        }
        .mistake-card {
            background: linear-gradient(135deg, #fee2e2 0%, #fecaca 100%);
            border: 2px solid #dc2626;
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            transition: all 0.3s;
        }
        .mistake-card:hover {
            transform: translateY(-5px) scale(1.02);
            box-shadow: 0 8px 20px rgba(220, 38, 38, 0.2);
        }
        .mistake-icon {
            font-size: 40px;
            margin-bottom: 10px;
            animation: shake 2s ease-in-out infinite;
        }
        .mistake-card:nth-child(2) .mistake-icon {
            animation-delay: 0.4s;
        }
        .mistake-card:nth-child(3) .mistake-icon {
            animation-delay: 0.8s;
        }
        .mistake-card:nth-child(4) .mistake-icon {
            animation-delay: 1.2s;
        }
        @keyframes shake {
            0%, 100% { transform: rotate(0deg); }
            25% { transform: rotate(-5deg); }
            75% { transform: rotate(5deg); }
        }
        .mistake-title {
            font-weight: 700;
            color: #dc2626;
            font-size: 14px;
            margin-bottom: 8px;
        }
        .mistake-desc {
            font-size: 12px;
            color: var(--text-secondary);
            line-height: 1.4;
        }

        /* SCREEN 7: Interactive Checklist */
        .action-checklist {
            background: linear-gradient(135deg, #10b98115 0%, #d1fae530 100%);
            border: 2px solid #10b981;
            border-radius: 12px;
            padding: 25px;
            margin: 20px 0;
        }
        .checklist-title {
            color: #10b981;
            font-size: 20px;
            font-weight: 700;
            margin-bottom: 15px;
            text-align: center;
        }
        .checklist-item {
            background: white;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 12px;
            transition: all 0.3s;
            cursor: pointer;
        }
        .checklist-item:hover {
            box-shadow: 0 2px 8px rgba(16, 185, 129, 0.2);
            transform: translateX(5px);
        }
        .checklist-item.checked {
            background: #d1fae5;
            opacity: 0.7;
        }
        .checklist-checkbox {
            width: 24px;
            height: 24px;
            border: 2px solid #10b981;
            border-radius: 6px;
            flex-shrink: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
            transition: all 0.3s;
        }
        .checklist-item.checked .checklist-checkbox {
            background: #10b981;
            color: #000000;
        }
        .checklist-text {
            font-size: 14px;
            color: var(--text-primary);
            font-weight: 500;
        }
        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-20px); }
        }
        .reflection-icon {
            font-size: 40px;
            margin-bottom: 10px;
        }
        .reflection-title {
            color: #f59e0b;
            font-size: 18px;
            font-weight: 700;
            margin-bottom: 10px;
        }
        .reflection-text {
            color: var(--text-secondary);
            font-size: 14px;
            line-height: 1.6;
        }

        /* ========== CALCULATOR STYLES ========== */

        /* Mini Calculator Widget */
        .mini-calculator {
            background: linear-gradient(135deg, #F0F9FF 0%, #E0F2FE 100%);
            border: 2px solid #3B82F6;
            border-radius: 16px;
            padding: 24px;
            margin: 32px 0;
            box-shadow: 0 4px 12px rgba(59, 130, 246, 0.15);
            transition: all 0.3s;
        }

        .mini-calculator:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(59, 130, 246, 0.25);
        }

        .mini-calc-header {
            display: flex;
            align-items: center;
            gap: 8px;
            font-weight: 600;
            color: #1E40AF;
            margin-bottom: 16px;
            font-size: 1.1rem;
        }

        .mini-calc-header svg {
            color: #3B82F6;
        }

        .mini-calc-body {
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        .mini-calc-input-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .mini-calc-input-group label {
            font-size: 0.95rem;
            color: #475569;
            font-weight: 500;
        }

        .mini-calc-input-wrapper {
            display: flex;
            align-items: center;
            gap: 8px;
            background: white;
            padding: 12px 16px;
            border-radius: 8px;
            border: 2px solid #CBD5E1;
            transition: border-color 0.2s;
        }

        .mini-calc-input-wrapper:focus-within {
            border-color: #3B82F6;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }

        .mini-calc-dollar {
            font-weight: 600;
            color: #10B981;
            font-size: 1.1rem;
        }

        .mini-calc-input-wrapper input {
            border: none;
            outline: none;
            font-size: 1.1rem;
            font-weight: 600;
            color: #1E293B;
            width: 80px;
            padding: 0;
        }

        .mini-calc-period {
            color: #64748B;
            font-size: 0.95rem;
        }

        .mini-calc-result {
            background: white;
            padding: 16px;
            border-radius: 8px;
            text-align: center;
            font-size: 1rem;
            color: #475569;
            border: 1px solid #E2E8F0;
        }

        .mini-calc-result strong {
            color: #10B981;
            font-size: 1.4rem;
            display: block;
            margin-top: 8px;
        }

        .mini-calc-link {
            background: linear-gradient(135deg, #3B82F6 0%, #2563EB 100%);
            color: #000000;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            text-align: center;
            font-size: 0.95rem;
        }

        .mini-calc-link:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(59, 130, 246, 0.4);
        }

        @media (max-width: 768px) {
            .mini-calculator {
                padding: 20px;
                margin: 24px 0;
            }

            .mini-calc-input-wrapper input {
                width: 60px;
            }

            .mini-calc-result strong {
                font-size: 1.2rem;
            }
        }

        /* Tab Navigation */
        .calculator-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 30px;
            border-bottom: 2px solid #e5e7eb;
            flex-wrap: wrap;
        }
        .calculator-tab {
            padding: 12px 24px;
            background: transparent;
            border: none;
            border-bottom: 3px solid transparent;
            cursor: pointer;
            font-weight: 600;
            color: var(--text-secondary);
            transition: all 0.3s;
            font-size: 16px;
        }
        .calculator-tab.active {
            color: #2563eb;
            border-bottom-color: #2563eb;
        }
        .calculator-tab:hover {
            color: #2563eb;
            background: rgba(59, 130, 246, 0.05);
        }

        /* Tab Content */
        .tab-content {
            display: none;
            animation: fadeIn 0.3s ease-in;
        }
        .tab-content.active {
            display: block;
        }

        /* Preset Buttons */
        .preset-buttons {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin-bottom: 25px;
            justify-content: center;
        }
        .btn-preset {
            padding: 10px 20px;
            background: linear-gradient(135deg, #F8FAFC 0%, #E2E8F0 100%);
            border: 2px solid #CBD5E1;
            border-radius: 8px;
            font-weight: 600;
            color: var(--text-primary);
            cursor: pointer;
            transition: all 0.2s;
            font-size: 14px;
        }
        .btn-preset:hover {
            background: linear-gradient(135deg, #E2E8F0 0%, #CBD5E1 100%);
            border-color: #2563eb;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(59, 130, 246, 0.2);
        }
        .btn-preset.active {
            background: linear-gradient(135deg, #3B82F6 0%, #2563EB 100%);
            color: #000000;
            border-color: #1D4ED8;
        }

        /* Comparison Grid */
        .comparison-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 30px;
        }
        .saver-card {
            background: linear-gradient(135deg, #F8FAFC 0%, #F1F5F9 100%);
            border: 2px solid #E2E8F0;
            border-radius: 12px;
            padding: 24px;
            transition: all 0.3s;
        }
        .saver-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 8px 24px rgba(59, 130, 246, 0.15);
            border-color: #2563eb;
        }
        .saver-card.saver-a {
            border-left: 4px solid #3B82F6;
        }
        .saver-card.saver-b {
            border-left: 4px solid #F59E0B;
        }
        .saver-card h3 {
            color: #2563eb;
            font-size: 20px;
            margin-bottom: 20px;
            text-align: center;
        }

        /* Input Groups */
        .input-group {
            margin-bottom: 20px;
        }
        .input-group label {
            display: block;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 8px;
            font-size: 14px;
        }
        .input-controls {
            display: flex;
            gap: 15px;
            align-items: center;
        }
        .input-controls input[type="range"] {
            flex: 1;
            height: 6px;
            border-radius: 3px;
            background: #E2E8F0;
            outline: none;
            -webkit-appearance: none;
        }
        .input-controls input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 18px;
            height: 18px;
            border-radius: 50%;
            background: #1d4ed8;
            cursor: pointer;
            box-shadow: 0 2px 6px rgba(59, 130, 246, 0.4);
            transition: all 0.2s;
        }
        .input-controls input[type="range"]::-webkit-slider-thumb:hover {
            transform: scale(1.2);
            box-shadow: 0 4px 12px rgba(59, 130, 246, 0.6);
        }
        .input-controls input[type="range"]::-moz-range-thumb {
            width: 18px;
            height: 18px;
            border-radius: 50%;
            background: #1d4ed8;
            cursor: pointer;
            border: none;
            box-shadow: 0 2px 6px rgba(59, 130, 246, 0.4);
        }
        .number-input-wrapper {
            display: flex;
            align-items: center;
            background: white;
            border: 2px solid #E2E8F0;
            border-radius: 8px;
            padding: 8px 12px;
            min-width: 100px;
            transition: all 0.2s;
        }
        .number-input-wrapper:focus-within {
            border-color: #2563eb;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }
        .number-input-wrapper .prefix,
        .number-input-wrapper .suffix {
            color: var(--text-secondary);
            font-weight: 600;
            margin: 0 4px;
        }
        .number-input-wrapper input[type="number"] {
            border: none;
            outline: none;
            width: 100%;
            font-size: 16px;
            font-weight: 600;
            color: #2563eb;
            text-align: center;
        }
        .number-input-wrapper input[type="number"]::-webkit-inner-spin-button,
        .number-input-wrapper input[type="number"]::-webkit-outer-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }

        /* Results Display */
        .results-summary {
            background: linear-gradient(135deg, #DBEAFE 0%, #BFDBFE 100%);
            border: 2px solid #3B82F6;
            border-radius: 12px;
            padding: 20px;
            margin-top: 20px;
        }
        .result-row {
            display: flex;
            justify-content: space-between;
            padding: 10px 0;
            border-bottom: 1px solid rgba(59, 130, 246, 0.2);
        }
        .result-row:last-child {
            border-bottom: none;
            padding-top: 12px;
            margin-top: 8px;
            border-top: 2px solid #3B82F6;
        }
        .result-label {
            font-weight: 500;
            color: var(--text-secondary);
            font-size: 14px;
        }
        .result-value {
            font-weight: 700;
            color: #2563eb;
            font-size: 16px;
        }
        .result-value.highlight {
            color: #10B981;
            font-size: 20px;
        }

        /* Chart Container */
        .chart-container {
            background: white;
            border-radius: 12px;
            padding: 24px;
            margin: 20px 0;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }
        .chart-title {
            text-align: center;
            color: #2563eb;
            font-size: 18px;
            font-weight: 700;
            margin-bottom: 20px;
        }
        .chart-container canvas {
            display: block;
            max-width: 100%;
            height: auto;
        }

        /* Key Insights */
        .key-insight {
            background: linear-gradient(135deg, #FEF3C7 0%, #FDE68A 100%);
            border-left: 4px solid #F59E0B;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            display: flex;
            align-items: center;
            gap: 15px;
        }
        .key-insight-icon {
            font-size: 32px;
            flex-shrink: 0;
        }
        .key-insight-text {
            font-weight: 600;
            color: var(--text-primary);
            line-height: 1.6;
            font-size: 16px;
        }
        .key-insight-text strong {
            color: #D97706;
        }

        /* Personal Calculator */
        .personal-calculator {
            max-width: 700px;
            margin: 0 auto;
        }

        /* Delay Calculator */
        .delay-calculator {
            max-width: 800px;
            margin: 0 auto;
        }

        /* Mobile Responsive */
        @media (max-width: 768px) {
            .calculator-tabs {
                flex-direction: column;
            }
            .calculator-tab {
                width: 100%;
                text-align: center;
            }
            .comparison-grid {
                grid-template-columns: 1fr;
                gap: 20px;
            }
            .preset-buttons {
                flex-direction: column;
            }
            .btn-preset {
                width: 100%;
            }
            .input-controls {
                flex-direction: column;
                gap: 10px;
            }
            .input-controls input[type="range"] {
                width: 100%;
            }
            .number-input-wrapper {
                width: 100%;
            }
            .key-insight {
                flex-direction: column;
                text-align: center;
            }
        }
    </style>
</head>
<body class="homepage-dark">
    <!-- Navigation -->
    <nav class="navbar">
        <div class="container">
            <div class="nav-wrapper">
                <div class="logo"><a href="/" style="color: inherit; text-decoration: none;">Finance<span class="logo-accent">U</span></a></div>
                <ul class="nav-links">
                    <li><a href="/">Home</a></li>
                    <li><a href="dashboard">Dashboard</a></li>
                    <li id="authButtons" style=" opacity: 0;">
                    </li>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Lesson Content -->
    <div class="lesson-container">
        <a href="/path4-lessons" class="back-link">← Back to Path 4 Lessons</a>

        <!-- Header -->
        <div class="lesson-header">
            <div class="lesson-number">LESSON 1</div>
            <h1>Why Saving Matters</h1>
        </div>

        <!-- Screen 1: Quick Intro -->
        <div class="lesson-screen active" data-screen="1">
            <div class="screen-progress">Screen 1 of 8</div>
            <div class="lesson-section">
                <h2>Why Saving Matters</h2>
                <div class="intro-cards">
                    <div class="intro-card">
                        <div class="intro-card-icon"><svg width="48" height="48" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="24" cy="24" r="20" fill="#FEE2E2"/><path d="M12 18 L18 24 L24 20 L30 30 L36 26" stroke="#DC2626" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"/><path d="M30 34 L36 34 L36 28" stroke="#DC2626" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg></div>
                        <h3>The Problem</h3>
                        <p>Most people spend everything they earn and live paycheck to paycheck</p>
                    </div>
                    <div class="intro-card">
                        <div class="intro-card-icon"><svg width="48" height="48" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="24" cy="24" r="20" fill="#D1FAE5"/><path d="M24 10 L32 14 L32 24 C32 30 28 34 24 38 C20 34 16 30 16 24 L16 14 Z" fill="#00A676" opacity="0.3"/><path d="M24 10 L32 14 L32 24 C32 30 28 34 24 38 C20 34 16 30 16 24 L16 14 Z" stroke="#00A676" stroke-width="2" fill="none"/><path d="M20 24 L22 26 L28 20" stroke="#00A676" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg></div>
                        <h3>Why It Matters</h3>
                        <p>Saving creates financial security and opens opportunities</p>
                    </div>
                    <div class="intro-card">
                        <div class="intro-card-icon"><svg width="48" height="48" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="24" cy="24" r="20" fill="#DBEAFE"/><circle cx="24" cy="24" r="14" stroke="#3B82F6" stroke-width="2" fill="none"/><circle cx="24" cy="24" r="8" stroke="#3B82F6" stroke-width="2" fill="none"/><circle cx="24" cy="24" r="3" fill="#3B82F6"/></svg></div>
                        <h3>What You'll Learn</h3>
                        <p>How consistent saving compounds over time and changes your future</p>
                    </div>
                </div>
            </div>
            <div class="screen-navigation">
                <div class="nav-spacer"></div>
                <button class="btn-nav" onclick="nextScreen()">Next <span>→</span></button>
            </div>
        </div>

        <!-- Screen 2: Core Concept -->
        <div class="lesson-screen" data-screen="2">
            <div class="screen-progress">Screen 2 of 8</div>
            <div class="lesson-section">
                <h2>Core Concept: The Compound Effect of Saving</h2>
                <p><strong>Saving isn't just about the money you put away today—it's about building a foundation for your future.</strong></p>
                <p>The compound effect means that small, consistent actions create massive results over time. Here's how it works with saving:</p>
                <ul>
                    <li><strong>Pay Yourself First:</strong> Before spending on anything else, set aside money for savings. This ensures you prioritize your future.</li>
                    <li><strong>Opportunity Cost:</strong> Every dollar you don't save is a dollar that can't work for you in the future. Not saving means missing out on future opportunities.</li>
                    <li><strong>Small Amounts Add Up:</strong> Saving $5/day = $1,825/year. Over 10 years at 5% interest, that becomes $24,000+.</li>
                </ul>
                <p>Think of saving like planting a tree. The sooner you plant it, the bigger it grows. The longer you wait, the less time it has to mature.</p>

                <!-- Mini Calculator Widget -->
                <div class="mini-calculator">
                    <div class="mini-calc-header">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <rect x="4" y="2" width="16" height="20" rx="2"></rect>
                            <line x1="8" y1="6" x2="16" y2="6"></line>
                            <line x1="8" y1="10" x2="16" y2="10"></line>
                            <line x1="8" y1="14" x2="16" y2="14"></line>
                            <line x1="8" y1="18" x2="12" y2="18"></line>
                        </svg>
                        Try It Yourself
                    </div>
                    <div class="mini-calc-body">
                        <div class="mini-calc-input-group">
                            <label for="dailySavings">If I save</label>
                            <div class="mini-calc-input-wrapper">
                                <span class="mini-calc-dollar">$</span>
                                <input type="number" id="dailySavings" value="5" min="0" max="100" step="0.5" oninput="calculateMini()">
                                <span class="mini-calc-period">per day</span>
                            </div>
                        </div>
                        <div class="mini-calc-result">
                            In 10 years at 5% interest: <strong id="miniResult">$24,201</strong>
                        </div>
                        <button class="mini-calc-link" onclick="showScreen(4)">
                            See Full Calculator →
                        </button>
                    </div>
                </div>
            </div>
            <div class="screen-navigation">
                <button class="btn-nav btn-prev" onclick="previousScreen()"><span>←</span> Previous</button>
                <button class="btn-nav" onclick="nextScreen()">Next <span>→</span></button>
            </div>
        </div>

        <!-- Screen 3: Checkpoint Question 1 -->
        <div class="lesson-screen" data-screen="3">
            <div class="screen-progress">Screen 3 of 8</div>
            <div class="checkpoint-container">
                <div class="checkpoint-header">
                    <h3>Quick Check</h3>
                    <p>Let's pause and check your understanding!</p>
                </div>

                <div class="checkpoint-question">
                    <div class="checkpoint-question-text">What does "pay yourself first" mean?</div>
                    <div class="checkpoint-option" onclick="checkCheckpoint1(0)">
                        <input type="radio" name="checkpoint1" value="0">
                        <span>A) Pay your bills before anything else</span>
                    </div>
                    <div class="checkpoint-option" onclick="checkCheckpoint1(1)">
                        <input type="radio" name="checkpoint1" value="1">
                        <span>B) Set aside money for savings before spending on other things</span>
                    </div>
                    <div class="checkpoint-option" onclick="checkCheckpoint1(2)">
                        <input type="radio" name="checkpoint1" value="2">
                        <span>C) Spend money on yourself as a reward</span>
                    </div>
                    <div class="checkpoint-option" onclick="checkCheckpoint1(3)">
                        <input type="radio" name="checkpoint1" value="3">
                        <span>D) Pay yourself a salary from your business</span>
                    </div>
                </div>

                <div class="checkpoint-feedback" id="checkpoint1-feedback">
                    <div class="checkpoint-feedback-icon"></div>
                    <div class="checkpoint-feedback-title"></div>
                    <div class="checkpoint-explanation"></div>
                </div>

                <button class="btn-continue" id="checkpoint1-continue" onclick="nextScreen()">Continue <span>→</span></button>
            </div>
            <div class="screen-navigation">
                <button class="btn-nav btn-prev" onclick="previousScreen()"><span>←</span> Previous</button>
                <div class="nav-spacer"></div>
            </div>
        </div>

        <!-- Screen 4: Interactive Calculator Hub -->
        <div class="lesson-screen" data-screen="4">
            <div class="screen-progress">Screen 4 of 8</div>
            <div class="lesson-section">
                <h2>Interactive Savings Calculator</h2>
                <p style="margin-bottom: 20px;">See the power of compound savings with your own numbers!</p>

                <!-- Tab Navigation -->
                <div class="calculator-tabs">
                    <button class="calculator-tab active" onclick="switchTab('comparison')">Compare Savers</button>
                    <button class="calculator-tab" onclick="switchTab('personal')">Your Calculator</button>
                    <button class="calculator-tab" onclick="switchTab('delay')">Cost of Delay</button>
                </div>

                <!-- Tab 1: Side-by-Side Comparison -->
                <div class="tab-content active" id="tab-comparison">
                    <div class="preset-buttons">
                        <button class="btn-preset active" onclick="loadPreset('alex-jamie')">Alex vs Jamie</button>
                        <button class="btn-preset" onclick="loadPreset('early-start')">Early Start</button>
                        <button class="btn-preset" onclick="loadPreset('late-start')">Late Start</button>
                    </div>

                    <div class="comparison-grid">
                        <!-- Saver A Card -->
                        <div class="saver-card saver-a">
                            <h3>Saver A (Early Start)</h3>

                            <div class="input-group">
                                <label for="saverA-age">Starting Age</label>
                                <div class="input-controls">
                                    <input type="range" id="saverA-age-slider" min="18" max="65" value="22" oninput="syncInput('saverA-age', this.value)">
                                    <div class="number-input-wrapper">
                                        <input type="number" id="saverA-age-input" min="18" max="65" value="22" oninput="syncSlider('saverA-age', this.value)">
                                    </div>
                                </div>
                            </div>

                            <div class="input-group">
                                <label for="saverA-monthly">Monthly Savings</label>
                                <div class="input-controls">
                                    <input type="range" id="saverA-monthly-slider" min="0" max="2000" step="25" value="200" oninput="syncInput('saverA-monthly', this.value)">
                                    <div class="number-input-wrapper">
                                        <span class="prefix">$</span>
                                        <input type="number" id="saverA-monthly-input" min="0" max="2000" step="25" value="200" oninput="syncSlider('saverA-monthly', this.value)">
                                    </div>
                                </div>
                            </div>

                            <div class="input-group">
                                <label for="saverA-years">Years Saving</label>
                                <div class="input-controls">
                                    <input type="range" id="saverA-years-slider" min="1" max="50" value="10" oninput="syncInput('saverA-years', this.value)">
                                    <div class="number-input-wrapper">
                                        <input type="number" id="saverA-years-input" min="1" max="50" value="10" oninput="syncSlider('saverA-years', this.value)">
                                    </div>
                                </div>
                            </div>

                            <div class="input-group">
                                <label for="saverA-return">Return Rate (%)</label>
                                <div class="input-controls">
                                    <input type="range" id="saverA-return-slider" min="0" max="15" step="0.5" value="7" oninput="syncInput('saverA-return', this.value)">
                                    <div class="number-input-wrapper">
                                        <input type="number" id="saverA-return-input" min="0" max="15" step="0.5" value="7" oninput="syncSlider('saverA-return', this.value)">
                                        <span class="suffix">%</span>
                                    </div>
                                </div>
                            </div>

                            <div class="results-summary">
                                <div class="result-row">
                                    <span class="result-label">Total Invested:</span>
                                    <span class="result-value" id="saverA-invested">$24,000</span>
                                </div>
                                <div class="result-row">
                                    <span class="result-label">At Age 65:</span>
                                    <span class="result-value highlight" id="saverA-final">$338,000</span>
                                </div>
                            </div>
                        </div>

                        <!-- Saver B Card -->
                        <div class="saver-card saver-b">
                            <h3>Saver B (Late Start)</h3>

                            <div class="input-group">
                                <label for="saverB-age">Starting Age</label>
                                <div class="input-controls">
                                    <input type="range" id="saverB-age-slider" min="18" max="65" value="32" oninput="syncInput('saverB-age', this.value)">
                                    <div class="number-input-wrapper">
                                        <input type="number" id="saverB-age-input" min="18" max="65" value="32" oninput="syncSlider('saverB-age', this.value)">
                                    </div>
                                </div>
                            </div>

                            <div class="input-group">
                                <label for="saverB-monthly">Monthly Savings</label>
                                <div class="input-controls">
                                    <input type="range" id="saverB-monthly-slider" min="0" max="2000" step="25" value="200" oninput="syncInput('saverB-monthly', this.value)">
                                    <div class="number-input-wrapper">
                                        <span class="prefix">$</span>
                                        <input type="number" id="saverB-monthly-input" min="0" max="2000" step="25" value="200" oninput="syncSlider('saverB-monthly', this.value)">
                                    </div>
                                </div>
                            </div>

                            <div class="input-group">
                                <label for="saverB-years">Years Saving</label>
                                <div class="input-controls">
                                    <input type="range" id="saverB-years-slider" min="1" max="50" value="33" oninput="syncInput('saverB-years', this.value)">
                                    <div class="number-input-wrapper">
                                        <input type="number" id="saverB-years-input" min="1" max="50" value="33" oninput="syncSlider('saverB-years', this.value)">
                                    </div>
                                </div>
                            </div>

                            <div class="input-group">
                                <label for="saverB-return">Return Rate (%)</label>
                                <div class="input-controls">
                                    <input type="range" id="saverB-return-slider" min="0" max="15" step="0.5" value="7" oninput="syncInput('saverB-return', this.value)">
                                    <div class="number-input-wrapper">
                                        <input type="number" id="saverB-return-input" min="0" max="15" step="0.5" value="7" oninput="syncSlider('saverB-return', this.value)">
                                        <span class="suffix">%</span>
                                    </div>
                                </div>
                            </div>

                            <div class="results-summary">
                                <div class="result-row">
                                    <span class="result-label">Total Invested:</span>
                                    <span class="result-value" id="saverB-invested">$79,200</span>
                                </div>
                                <div class="result-row">
                                    <span class="result-label">At Age 65:</span>
                                    <span class="result-value highlight" id="saverB-final">$328,000</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="chart-container">
                        <div class="chart-title">Growth Over Time</div>
                        <canvas id="lineChart" width="800" height="400"></canvas>
                    </div>

                    <div class="key-insight">
                        <div class="key-insight-icon">💡</div>
                        <div class="key-insight-text" id="comparison-insight">
                            Saver A invested <strong>$55,200 LESS</strong> but ended up with <strong>$10,000 MORE</strong>. That's the power of starting early!
                        </div>
                    </div>
                </div>

                <!-- Tab 2: Personal Calculator -->
                <div class="tab-content" id="tab-personal">
                    <div class="personal-calculator">
                        <div class="input-group">
                            <label for="personal-current-age">Your Current Age</label>
                            <div class="input-controls">
                                <input type="range" id="personal-current-age-slider" min="18" max="65" value="25" oninput="syncInput('personal-current-age', this.value)">
                                <div class="number-input-wrapper">
                                    <input type="number" id="personal-current-age-input" min="18" max="65" value="25" oninput="syncSlider('personal-current-age', this.value)">
                                </div>
                            </div>
                        </div>

                        <div class="input-group">
                            <label for="personal-target-age">Target Age</label>
                            <div class="input-controls">
                                <input type="range" id="personal-target-age-slider" min="18" max="75" value="65" oninput="syncInput('personal-target-age', this.value)">
                                <div class="number-input-wrapper">
                                    <input type="number" id="personal-target-age-input" min="18" max="75" value="65" oninput="syncSlider('personal-target-age', this.value)">
                                </div>
                            </div>
                        </div>

                        <div class="input-group">
                            <label for="personal-monthly">Monthly Savings</label>
                            <div class="input-controls">
                                <input type="range" id="personal-monthly-slider" min="0" max="2000" step="25" value="200" oninput="syncInput('personal-monthly', this.value)">
                                <div class="number-input-wrapper">
                                    <span class="prefix">$</span>
                                    <input type="number" id="personal-monthly-input" min="0" max="2000" step="25" value="200" oninput="syncSlider('personal-monthly', this.value)">
                                </div>
                            </div>
                        </div>

                        <div class="input-group">
                            <label for="personal-return">Expected Return (%)</label>
                            <div class="input-controls">
                                <input type="range" id="personal-return-slider" min="0" max="15" step="0.5" value="7" oninput="syncInput('personal-return', this.value)">
                                <div class="number-input-wrapper">
                                    <input type="number" id="personal-return-input" min="0" max="15" step="0.5" value="7" oninput="syncSlider('personal-return', this.value)">
                                    <span class="suffix">%</span>
                                </div>
                            </div>
                        </div>

                        <div class="results-summary" style="max-width: 500px; margin: 30px auto;">
                            <h3 style="text-align: center; margin-bottom: 20px; color: #2563eb;">Your Results</h3>
                            <div class="result-row">
                                <span class="result-label">Years Saving:</span>
                                <span class="result-value" id="personal-years">40 years</span>
                            </div>
                            <div class="result-row">
                                <span class="result-label">Total Invested:</span>
                                <span class="result-value" id="personal-invested">$96,000</span>
                            </div>
                            <div class="result-row">
                                <span class="result-label">Compound Growth:</span>
                                <span class="result-value" id="personal-growth">$428,000</span>
                            </div>
                            <div class="result-row">
                                <span class="result-label">Final Amount:</span>
                                <span class="result-value highlight" id="personal-final">$524,000</span>
                            </div>
                        </div>

                        <div class="chart-container">
                            <div class="chart-title">Your Savings Timeline</div>
                            <canvas id="personalChart" width="800" height="400"></canvas>
                        </div>
                    </div>
                </div>

                <!-- Tab 3: Impact of Delay -->
                <div class="tab-content" id="tab-delay">
                    <div class="delay-calculator">
                        <p style="text-align: center; font-size: 18px; margin-bottom: 30px;">
                            Move the slider to see how each year of delay impacts your savings
                        </p>

                        <div class="input-group" style="max-width: 600px; margin: 0 auto 30px;">
                            <label for="delay-start-age" style="font-size: 18px; text-align: center; display: block;">Starting Age</label>
                            <div class="input-controls">
                                <input type="range" id="delay-start-age-slider" min="22" max="40" value="22" oninput="syncInput('delay-start-age', this.value)" style="flex: 1;">
                                <div class="number-input-wrapper">
                                    <input type="number" id="delay-start-age-input" min="22" max="40" value="22" oninput="syncSlider('delay-start-age', this.value)">
                                </div>
                            </div>
                        </div>

                        <div class="results-summary" style="max-width: 600px; margin: 30px auto;">
                            <h3 style="text-align: center; margin-bottom: 20px; color: #2563eb;">Impact Analysis</h3>
                            <div class="result-row">
                                <span class="result-label">If you start at age <span id="delay-age-display">22</span>:</span>
                                <span class="result-value highlight" id="delay-amount-now">$338,000</span>
                            </div>
                            <div class="result-row">
                                <span class="result-label">If you wait 1 year (age <span id="delay-age-next">23</span>):</span>
                                <span class="result-value" id="delay-amount-next">$317,000</span>
                            </div>
                            <div class="result-row" style="background: #FEE2E2; padding: 15px; border-radius: 8px; margin-top: 10px;">
                                <span class="result-label" style="color: #DC2626; font-weight: 700;">Cost of Waiting:</span>
                                <span class="result-value" style="color: #DC2626; font-size: 24px;" id="delay-cost">-$21,000</span>
                            </div>
                        </div>

                        <div class="chart-container">
                            <div class="chart-title">Cost of Each Year You Wait</div>
                            <canvas id="delayChart" width="800" height="400"></canvas>
                        </div>
                    </div>
                </div>

            </div>
            <div class="screen-navigation">
                <button class="btn-nav btn-prev" onclick="previousScreen()"><span>←</span> Previous</button>
                <button class="btn-nav" onclick="nextScreen()">Next <span>→</span></button>
            </div>
        </div>

        <!-- Screen 5: Checkpoint Question 2 -->
        <div class="lesson-screen" data-screen="5">
            <div class="screen-progress">Screen 5 of 8</div>
            <div class="checkpoint-container">
                <div class="checkpoint-header">
                    <h3>Quick Check: Apply What You Learned</h3>
                    <p>Let's see how you can apply this concept!</p>
                </div>

                <div class="checkpoint-question">
                    <div class="checkpoint-question-text">You earn $200 from a side job. Following the "pay yourself first" principle, what should you do first?</div>
                    <div class="checkpoint-option" onclick="checkCheckpoint2(0)">
                        <input type="radio" name="checkpoint2" value="0">
                        <span>A) Spend it on something fun you've been wanting</span>
                    </div>
                    <div class="checkpoint-option" onclick="checkCheckpoint2(1)">
                        <input type="radio" name="checkpoint2" value="1">
                        <span>B) Put a portion (like 20%) into savings, then decide how to use the rest</span>
                    </div>
                    <div class="checkpoint-option" onclick="checkCheckpoint2(2)">
                        <input type="radio" name="checkpoint2" value="2">
                        <span>C) Pay your rent first</span>
                    </div>
                    <div class="checkpoint-option" onclick="checkCheckpoint2(3)">
                        <input type="radio" name="checkpoint2" value="3">
                        <span>D) Keep it as cash in your wallet</span>
                    </div>
                </div>

                <div class="checkpoint-feedback" id="checkpoint2-feedback">
                    <div class="checkpoint-feedback-icon"></div>
                    <div class="checkpoint-feedback-title"></div>
                    <div class="checkpoint-explanation"></div>
                </div>

                <button class="btn-continue" id="checkpoint2-continue" onclick="nextScreen()">Continue <span>→</span></button>
            </div>
            <div class="screen-navigation">
                <button class="btn-nav btn-prev" onclick="previousScreen()"><span>←</span> Previous</button>
                <div class="nav-spacer"></div>
            </div>
        </div>

        <!-- Screen 6: Common Mistakes -->
        <div class="lesson-screen" data-screen="6">
            <div class="screen-progress">Screen 6 of 8</div>
            <div class="lesson-section">
                <h2>Avoid These Mistakes</h2>
                <div class="mistakes-grid">
                    <div class="mistake-card">
                        <div class="mistake-icon"><svg width="48" height="48" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="24" cy="24" r="20" fill="#FCE7F3"/><circle cx="24" cy="24" r="12" stroke="#EC4899" stroke-width="2" fill="none"/><path d="M24 18 L24 24 L28 28" stroke="#EC4899" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg></div>
                        <div class="mistake-title">Waiting to Start</div>
                        <div class="mistake-desc">"I'll save when I earn more"—but time is your biggest asset</div>
                    </div>
                    <div class="mistake-card">
                        <div class="mistake-icon"><svg width="48" height="48" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="24" cy="24" r="20" fill="#DBEAFE"/><circle cx="24" cy="24" r="14" stroke="#3B82F6" stroke-width="2" fill="none"/><circle cx="24" cy="24" r="8" stroke="#3B82F6" stroke-width="2" fill="none"/><circle cx="24" cy="24" r="3" fill="#3B82F6"/></svg></div>
                        <div class="mistake-title">Saving What's Left</div>
                        <div class="mistake-desc">Spending first, saving later means nothing gets saved</div>
                    </div>
                    <div class="mistake-card">
                        <div class="mistake-icon"><svg width="48" height="48" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="24" cy="24" r="20" fill="#FEE2E2"/><path d="M12 18 L18 24 L24 20 L30 30 L36 26" stroke="#DC2626" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"/><path d="M30 34 L36 34 L36 28" stroke="#DC2626" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg></div>
                        <div class="mistake-title">Ignoring Small Amounts</div>
                        <div class="mistake-desc">"It's only $10" adds up to missed opportunities</div>
                    </div>
                    <div class="mistake-card">
                        <div class="mistake-icon"><svg width="48" height="48" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="24" cy="24" r="20" fill="#FEE2E2"/><rect x="14" y="14" width="20" height="20" rx="3" fill="#DC2626" opacity="0.3"/><rect x="14" y="14" width="20" height="20" rx="3" stroke="#DC2626" stroke-width="2" fill="none"/><circle cx="18" cy="18" r="2" fill="#DC2626"/><circle cx="30" cy="30" r="2" fill="#DC2626"/></svg></div>
                        <div class="mistake-title">No Emergency Fund</div>
                        <div class="mistake-desc">Living without a safety net creates constant stress</div>
                    </div>
                </div>
            </div>
            <div class="screen-navigation">
                <button class="btn-nav btn-prev" onclick="previousScreen()"><span>←</span> Previous</button>
                <button class="btn-nav" onclick="nextScreen()">Next <span>→</span></button>
            </div>
        </div>

        <!-- Screen 7: Action Plan -->
        <div class="lesson-screen" data-screen="7">
            <div class="screen-progress">Screen 7 of 8</div>
            <div class="lesson-section">
                <div class="action-checklist">
                    <div class="checklist-title"><svg width="48" height="48" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="24" cy="24" r="20" fill="#DBEAFE"/><circle cx="24" cy="24" r="14" stroke="#3B82F6" stroke-width="2" fill="none"/><circle cx="24" cy="24" r="8" stroke="#3B82F6" stroke-width="2" fill="none"/><circle cx="24" cy="24" r="3" fill="#3B82F6"/></svg> Your Action Plan</div>
                    <p style="text-align: center; color: var(--text-secondary); margin-bottom: 15px; font-size: 14px;">
                        Complete these steps this week:
                    </p>
                    <div class="checklist-item" onclick="toggleChecklistItem(this)">
                        <div class="checklist-checkbox"></div>
                        <div class="checklist-text">Calculate how much you could save monthly (even if it's $25)</div>
                    </div>
                    <div class="checklist-item" onclick="toggleChecklistItem(this)">
                        <div class="checklist-checkbox"></div>
                        <div class="checklist-text">Open a separate savings account if you don't have one</div>
                    </div>
                    <div class="checklist-item" onclick="toggleChecklistItem(this)">
                        <div class="checklist-checkbox"></div>
                        <div class="checklist-text">Transfer your first "pay yourself first" amount immediately</div>
                    </div>
                    <div class="checklist-item" onclick="toggleChecklistItem(this)">
                        <div class="checklist-checkbox"></div>
                        <div class="checklist-text">Set a reminder to save the same amount next month</div>
                    </div>
                </div>

                <div class="reflection-box">
                    <div class="reflection-icon"><svg width="48" height="48" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="24" cy="24" r="20" fill="#F3F4F6"/><circle cx="24" cy="22" r="8" fill="#6B7280" opacity="0.3"/><circle cx="24" cy="22" r="8" stroke="#6B7280" stroke-width="2" fill="none"/><circle cx="18" cy="32" r="3" fill="#6B7280" opacity="0.5"/><circle cx="14" cy="36" r="2" fill="#6B7280" opacity="0.3"/></svg></div>
                    <div class="reflection-title">Quick Reflection</div>
                    <div class="reflection-text">
                        What's one thing you currently spend money on that you could reduce to boost your savings? Remember: every small cut now means more freedom later.
                    </div>
                </div>
            </div>
            <div class="screen-navigation">
                <button class="btn-nav btn-prev" onclick="previousScreen()"><span>←</span> Previous</button>
                <button class="btn-nav" onclick="nextScreen()">Next <span>→</span></button>
            </div>
        </div>

        <!-- Screen 8: Quiz -->
        <div class="lesson-screen" data-screen="8">
            <div class="screen-progress">Screen 8 of 8</div>
            <!-- Lesson Quiz -->
            <div class="quiz-container" id="quizContainer">
            <div class="quiz-header">
                <h2>Lesson Quiz</h2>
                <p>Answer all questions correctly to unlock the next lesson!</p>
            </div>
            <div id="quizQuestions"></div>
            <button class="btn-submit-quiz" id="submitQuiz" onclick="submitQuiz()">Submit Quiz</button>
            <div id="quizResult"></div>
            </div>

            <!-- Finish Button -->
            <button class="btn-finish" id="finishBtn" onclick="finishLesson()" disabled>Finish Lesson</button>

            <div class="screen-navigation">
                <button class="btn-nav btn-prev" onclick="previousScreen()"><span>←</span> Previous</button>
                <div class="nav-spacer"></div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h4>FinanceU</h4>
                    <p>Making financial literacy accessible for everyone.</p>
                </div>
                <div class="footer-section">
                    <h4>Company</h4>
                    <ul>
                        <li><a href="/about">About Us</a></li>
                        <li><a href="/careers">Careers</a></li>
                        <li><a href="/contact">Contact</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4>Support</h4>
                    <ul>
                        <li><a href="/help">Help Center</a></li>
                        <li><a href="/privacy">Privacy Policy</a></li>
                        <li><a href="/terms">Terms of Service</a></li>
                    </ul>
                </div>
            </div>
            <div class="footer-bottom">
                <p style=" font-size: 0.85rem; opacity: 0.8; margin-bottom: 10px;">Disclaimer: FinanceU provides educational content only and does not offer financial, legal, or investment advice. Always consult with a qualified professional before making financial decisions.</p>
                <p>&copy; 2025 FinanceU. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script src="config.js"></script>
    <script src="lesson-completion.js"></script>
    <script src="animations.js"></script>
    <script>
        // ============ CALCULATOR SYSTEM ============

        // Compound Interest Calculation Engine
        function calculateCompoundInterest(startAge, monthly, years, annualRate) {
            const monthlyRate = annualRate / 12 / 100;
            const months = years * 12;
            let balance = 0;
            const timeline = [{ age: startAge, amount: 0 }];

            for (let i = 1; i <= months; i++) {
                balance = balance * (1 + monthlyRate) + monthly;

                if (i % 12 === 0) {
                    timeline.push({
                        age: startAge + Math.floor(i / 12),
                        amount: Math.round(balance)
                    });
                }
            }

            const totalInvested = monthly * months;
            const compoundGrowth = Math.round(balance) - totalInvested;

            return {
                finalAmount: Math.round(balance),
                totalInvested: totalInvested,
                compoundGrowth: compoundGrowth,
                timeline: timeline
            };
        }

        // Format number as currency
        function formatCurrency(num) {
            return '$' + Math.round(num).toLocaleString();
        }

        // Sync slider and input
        function syncSlider(id, value) {
            document.getElementById(id + '-slider').value = value;
            calculateAll();
        }

        function syncInput(id, value) {
            document.getElementById(id + '-input').value = value;
            calculateAll();
        }

        // Tab Switching
        function switchTab(tabName) {
            // Remove active from all tabs and content
            document.querySelectorAll('.calculator-tab').forEach(tab => tab.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));

            // Add active to selected tab
            event.target.classList.add('active');
            document.getElementById('tab-' + tabName).classList.add('active');

            // Redraw charts for the active tab
            setTimeout(() => {
                if (tabName === 'comparison') {
                    calculateComparison();
                } else if (tabName === 'personal') {
                    calculatePersonal();
                } else if (tabName === 'delay') {
                    calculateDelay();
                }
            }, 50);
        }

        // Load Preset Scenarios
        function loadPreset(preset) {
            // Remove active from all preset buttons
            document.querySelectorAll('.btn-preset').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');

            if (preset === 'alex-jamie') {
                document.getElementById('saverA-age-input').value = 22;
                document.getElementById('saverA-age-slider').value = 22;
                document.getElementById('saverA-monthly-input').value = 200;
                document.getElementById('saverA-monthly-slider').value = 200;
                document.getElementById('saverA-years-input').value = 10;
                document.getElementById('saverA-years-slider').value = 10;
                document.getElementById('saverA-return-input').value = 7;
                document.getElementById('saverA-return-slider').value = 7;

                document.getElementById('saverB-age-input').value = 32;
                document.getElementById('saverB-age-slider').value = 32;
                document.getElementById('saverB-monthly-input').value = 200;
                document.getElementById('saverB-monthly-slider').value = 200;
                document.getElementById('saverB-years-input').value = 33;
                document.getElementById('saverB-years-slider').value = 33;
                document.getElementById('saverB-return-input').value = 7;
                document.getElementById('saverB-return-slider').value = 7;
            } else if (preset === 'early-start') {
                document.getElementById('saverA-age-input').value = 25;
                document.getElementById('saverA-age-slider').value = 25;
                document.getElementById('saverA-monthly-input').value = 150;
                document.getElementById('saverA-monthly-slider').value = 150;
                document.getElementById('saverA-years-input').value = 15;
                document.getElementById('saverA-years-slider').value = 15;

                document.getElementById('saverB-age-input').value = 40;
                document.getElementById('saverB-age-slider').value = 40;
                document.getElementById('saverB-monthly-input').value = 300;
                document.getElementById('saverB-monthly-slider').value = 300;
                document.getElementById('saverB-years-input').value = 25;
                document.getElementById('saverB-years-slider').value = 25;
            } else if (preset === 'late-start') {
                document.getElementById('saverA-age-input').value = 35;
                document.getElementById('saverA-age-slider').value = 35;
                document.getElementById('saverA-monthly-input').value = 300;
                document.getElementById('saverA-monthly-slider').value = 300;
                document.getElementById('saverA-years-input').value = 30;
                document.getElementById('saverA-years-slider').value = 30;

                document.getElementById('saverB-age-input').value = 45;
                document.getElementById('saverB-age-slider').value = 45;
                document.getElementById('saverB-monthly-input').value = 400;
                document.getElementById('saverB-monthly-slider').value = 400;
                document.getElementById('saverB-years-input').value = 20;
                document.getElementById('saverB-years-slider').value = 20;
            }

            calculateComparison();
        }

        // Calculate All (used by input sync)
        function calculateAll() {
            const activeTab = document.querySelector('.tab-content.active');
            if (activeTab.id === 'tab-comparison') {
                calculateComparison();
            } else if (activeTab.id === 'tab-personal') {
                calculatePersonal();
            } else if (activeTab.id === 'tab-delay') {
                calculateDelay();
            }
        }

        // Calculate Comparison Tab
        function calculateComparison() {
            const saverA = {
                age: parseInt(document.getElementById('saverA-age-input').value),
                monthly: parseInt(document.getElementById('saverA-monthly-input').value),
                years: parseInt(document.getElementById('saverA-years-input').value),
                return: parseFloat(document.getElementById('saverA-return-input').value)
            };

            const saverB = {
                age: parseInt(document.getElementById('saverB-age-input').value),
                monthly: parseInt(document.getElementById('saverB-monthly-input').value),
                years: parseInt(document.getElementById('saverB-years-input').value),
                return: parseFloat(document.getElementById('saverB-return-input').value)
            };

            const resultsA = calculateCompoundInterest(saverA.age, saverA.monthly, saverA.years, saverA.return);
            const resultsB = calculateCompoundInterest(saverB.age, saverB.monthly, saverB.years, saverB.return);

            // Update results
            document.getElementById('saverA-invested').textContent = formatCurrency(resultsA.totalInvested);
            document.getElementById('saverA-final').textContent = formatCurrency(resultsA.finalAmount);
            document.getElementById('saverB-invested').textContent = formatCurrency(resultsB.totalInvested);
            document.getElementById('saverB-final').textContent = formatCurrency(resultsB.finalAmount);

            // Update insight
            const diff = resultsA.finalAmount - resultsB.finalAmount;
            const investDiff = resultsA.totalInvested - resultsB.totalInvested;
            const insightEl = document.getElementById('comparison-insight');

            if (diff > 0) {
                insightEl.innerHTML = `Saver A invested <strong>${formatCurrency(Math.abs(investDiff))} ${investDiff < 0 ? 'LESS' : 'MORE'}</strong> but ended up with <strong>${formatCurrency(Math.abs(diff))} MORE</strong>. That's the power of starting early!`;
            } else {
                insightEl.innerHTML = `Saver B ended up with <strong>${formatCurrency(Math.abs(diff))} MORE</strong> by investing <strong>${formatCurrency(Math.abs(investDiff))} ${investDiff > 0 ? 'MORE' : 'LESS'}</strong> over time.`;
            }

            // Draw chart
            drawLineChart('lineChart', resultsA, resultsB, 'Saver A', 'Saver B');
        }

        // Calculate Personal Tab
        function calculatePersonal() {
            const currentAge = parseInt(document.getElementById('personal-current-age-input').value);
            const targetAge = parseInt(document.getElementById('personal-target-age-input').value);
            const monthly = parseInt(document.getElementById('personal-monthly-input').value);
            const returnRate = parseFloat(document.getElementById('personal-return-input').value);

            const years = targetAge - currentAge;
            const results = calculateCompoundInterest(currentAge, monthly, years, returnRate);

            document.getElementById('personal-years').textContent = years + ' years';
            document.getElementById('personal-invested').textContent = formatCurrency(results.totalInvested);
            document.getElementById('personal-growth').textContent = formatCurrency(results.compoundGrowth);
            document.getElementById('personal-final').textContent = formatCurrency(results.finalAmount);

            drawSingleLineChart('personalChart', results, 'Your Savings');
        }

        // Calculate Delay Tab
        function calculateDelay() {
            const startAge = parseInt(document.getElementById('delay-start-age-input').value);
            const monthly = 200;
            const returnRate = 7;
            const years = 65 - startAge;

            const resultsNow = calculateCompoundInterest(startAge, monthly, years, returnRate);
            const resultsNext = calculateCompoundInterest(startAge + 1, monthly, years - 1, returnRate);

            const cost = resultsNow.finalAmount - resultsNext.finalAmount;

            document.getElementById('delay-age-display').textContent = startAge;
            document.getElementById('delay-age-next').textContent = startAge + 1;
            document.getElementById('delay-amount-now').textContent = formatCurrency(resultsNow.finalAmount);
            document.getElementById('delay-amount-next').textContent = formatCurrency(resultsNext.finalAmount);
            document.getElementById('delay-cost').textContent = '-' + formatCurrency(cost);

            drawDelayChart('delayChart', startAge, monthly, returnRate);
        }

        // Draw Line Chart (Comparison)
        function drawLineChart(canvasId, dataA, dataB, labelA, labelB) {
            const canvas = document.getElementById(canvasId);
            if (!canvas) return;

            const ctx = canvas.getContext('2d');
            const width = canvas.width;
            const height = canvas.height;
            const padding = 60;

            ctx.clearRect(0, 0, width, height);

            const maxAmount = Math.max(
                ...dataA.timeline.map(p => p.amount),
                ...dataB.timeline.map(p => p.amount)
            );

            const minAge = Math.min(dataA.timeline[0].age, dataB.timeline[0].age);
            const maxAge = Math.max(
                dataA.timeline[dataA.timeline.length - 1].age,
                dataB.timeline[dataB.timeline.length - 1].age
            );

            // Draw grid
            ctx.strokeStyle = '#E5E7EB';
            ctx.lineWidth = 1;
            for (let i = 0; i <= 5; i++) {
                const y = padding + (height - padding * 2) * i / 5;
                ctx.beginPath();
                ctx.moveTo(padding, y);
                ctx.lineTo(width - padding, y);
                ctx.stroke();

                const label = formatCurrency(maxAmount * (1 - i / 5));
                ctx.fillStyle = '#6B7280';
                ctx.font = '12px sans-serif';
                ctx.textAlign = 'right';
                ctx.fillText(label, padding - 10, y + 4);
            }

            // Draw Saver A curve
            drawCurve(ctx, dataA.timeline, width, height, padding, maxAmount, minAge, maxAge, '#3B82F6');

            // Draw Saver B curve
            drawCurve(ctx, dataB.timeline, width, height, padding, maxAmount, minAge, maxAge, '#F59E0B');

            // Draw legend
            ctx.fillStyle = '#3B82F6';
            ctx.fillRect(width - 150, 20, 20, 3);
            ctx.fillStyle = '#000';
            ctx.font = '14px sans-serif';
            ctx.textAlign = 'left';
            ctx.fillText(labelA, width - 125, 24);

            ctx.fillStyle = '#F59E0B';
            ctx.fillRect(width - 150, 40, 20, 3);
            ctx.fillStyle = '#000';
            ctx.fillText(labelB, width - 125, 44);
        }

        // Draw single line chart
        function drawSingleLineChart(canvasId, data, label) {
            const canvas = document.getElementById(canvasId);
            if (!canvas) return;

            const ctx = canvas.getContext('2d');
            const width = canvas.width;
            const height = canvas.height;
            const padding = 60;

            ctx.clearRect(0, 0, width, height);

            const maxAmount = Math.max(...data.timeline.map(p => p.amount));
            const minAge = data.timeline[0].age;
            const maxAge = data.timeline[data.timeline.length - 1].age;

            // Draw grid
            ctx.strokeStyle = '#E5E7EB';
            ctx.lineWidth = 1;
            for (let i = 0; i <= 5; i++) {
                const y = padding + (height - padding * 2) * i / 5;
                ctx.beginPath();
                ctx.moveTo(padding, y);
                ctx.lineTo(width - padding, y);
                ctx.stroke();

                const labelText = formatCurrency(maxAmount * (1 - i / 5));
                ctx.fillStyle = '#6B7280';
                ctx.font = '12px sans-serif';
                ctx.textAlign = 'right';
                ctx.fillText(labelText, padding - 10, y + 4);
            }

            // Draw curve
            drawCurve(ctx, data.timeline, width, height, padding, maxAmount, minAge, maxAge, '#10B981');
        }

        // Draw delay chart
        function drawDelayChart(canvasId, startAge, monthly, returnRate) {
            const canvas = document.getElementById(canvasId);
            if (!canvas) return;

            const ctx = canvas.getContext('2d');
            const width = canvas.width;
            const height = canvas.height;
            const padding = 60;

            ctx.clearRect(0, 0, width, height);

            const data = [];
            for (let age = 22; age <= 40; age++) {
                const years = 65 - age;
                const result = calculateCompoundInterest(age, monthly, years, returnRate);
                data.push({ age: age, amount: result.finalAmount });
            }

            const maxAmount = Math.max(...data.map(d => d.amount));

            // Draw grid
            ctx.strokeStyle = '#E5E7EB';
            ctx.lineWidth = 1;
            for (let i = 0; i <= 5; i++) {
                const y = padding + (height - padding * 2) * i / 5;
                ctx.beginPath();
                ctx.moveTo(padding, y);
                ctx.lineTo(width - padding, y);
                ctx.stroke();
            }

            // Draw bars
            const barWidth = (width - padding * 2) / data.length * 0.8;
            data.forEach((d, i) => {
                const x = padding + (width - padding * 2) / data.length * i;
                const barHeight = (d.amount / maxAmount) * (height - padding * 2);
                const y = height - padding - barHeight;

                // Color based on age
                const ratio = i / (data.length - 1);
                ctx.fillStyle = ratio < 0.3 ? '#10B981' : ratio < 0.7 ? '#F59E0B' : '#DC2626';
                ctx.fillRect(x, y, barWidth, barHeight);

                // Highlight current age
                if (d.age === startAge) {
                    ctx.strokeStyle = '#000';
                    ctx.lineWidth = 3;
                    ctx.strokeRect(x - 2, y - 2, barWidth + 4, barHeight + 4);
                }
            });
        }

        // Helper: Draw curve on canvas
        function drawCurve(ctx, timeline, width, height, padding, maxAmount, minAge, maxAge, color) {
            ctx.strokeStyle = color;
            ctx.lineWidth = 3;
            ctx.beginPath();

            timeline.forEach((point, index) => {
                const x = padding + ((point.age - minAge) / (maxAge - minAge)) * (width - padding * 2);
                const y = height - padding - (point.amount / maxAmount) * (height - padding * 2);

                if (index === 0) {
                    ctx.moveTo(x, y);
                } else {
                    ctx.lineTo(x, y);
                }
            });

            ctx.stroke();

            // Add shaded area
            ctx.globalAlpha = 0.1;
            ctx.fillStyle = color;
            const lastPoint = timeline[timeline.length - 1];
            const lastX = padding + ((lastPoint.age - minAge) / (maxAge - minAge)) * (width - padding * 2);
            ctx.lineTo(lastX, height - padding);
            ctx.lineTo(padding, height - padding);
            ctx.closePath();
            ctx.fill();
            ctx.globalAlpha = 1.0;
        }

        // Initialize calculator on page load
        function initCalculator() {
            calculateComparison();
            calculatePersonal();
            calculateDelay();
            calculateMini();
        }

        // Mini Calculator for Screen 2
        function calculateMini() {
            const dailyAmount = parseFloat(document.getElementById('dailySavings').value) || 0;
            const years = 10;
            const annualRate = 5; // 5% return
            const monthlyAmount = dailyAmount * 365 / 12;
            const monthlyRate = annualRate / 12 / 100;
            const months = years * 12;

            let balance = 0;
            for (let i = 0; i < months; i++) {
                balance = balance * (1 + monthlyRate) + monthlyAmount;
            }

            const finalAmount = Math.round(balance);
            document.getElementById('miniResult').textContent = '$' + finalAmount.toLocaleString();
        }

        // ============ END CALCULATOR SYSTEM ============

        // Check authentication status and update nav
                async function updateNav() {
            const authButtons = document.getElementById('authButtons');

            // Check localStorage for cached auth state and render immediately
            const cachedAuth = localStorage.getItem('authState');
            if (cachedAuth) {
                const authState = JSON.parse(cachedAuth);
                authButtons.innerHTML = authState.isLoggedIn
                    ? `<a href="#" onclick="logout(); return false;" class="btn-primary">Logout</a>`
                    : `<a href="login" class="btn-primary">Login</a>`;
                authButtons.style.opacity = '1';
            }

            // Then verify with server in background
            try {
                const response = await fetch(`${API_URL}/auth/me`, { credentials: 'include' });

                if (response.ok) {
                    localStorage.setItem('authState', JSON.stringify({ isLoggedIn: true }));
                    authButtons.innerHTML = `<a href="#" onclick="logout(); return false;" class="btn-primary">Logout</a>`;
                } else {
                    localStorage.setItem('authState', JSON.stringify({ isLoggedIn: false }));
                    authButtons.innerHTML = `<a href="login" class="btn-primary">Login</a>`;
                }
                authButtons.style.opacity = '1';
            } catch (error) {
                console.log('Not logged in');
                localStorage.setItem('authState', JSON.stringify({ isLoggedIn: false }));
                authButtons.innerHTML = `<a href="login" class="btn-primary">Login</a>`;
                authButtons.style.opacity = '1';
            }
        }
        // Logout function
        async function logout() {
            localStorage.removeItem('authState');
            localStorage.removeItem('token');
            localStorage.removeItem('userId');
            try {
                await fetch(`${API_URL}/auth/logout`, {
                    method: 'POST',
                    credentials: 'include'
                });
                window.location.href = '/index.html';
            } catch (error) {
                console.error('Logout error:', error);
                window.location.href = '/index.html';
            }
        }

        // Quiz data
        const quizData = [
            {
                question: "What does 'pay yourself first' mean?",
                options: [
                    "Pay your bills before spending",
                    "Set aside savings before spending on other things",
                    "Give yourself a reward",
                    "Pay yourself a salary"
                ],
                correct: 1
            },
            {
                question: "What is opportunity cost in relation to saving?",
                options: [
                    "The cost of opening a savings account",
                    "The interest you earn on savings",
                    "What you give up by not saving money today for future opportunities",
                    "The cost of financial advice"
                ],
                correct: 2
            },
            {
                question: "According to the lesson, how much would saving $5/day become over 10 years at 5% interest?",
                options: [
                    "$18,250",
                    "$24,000+",
                    "$10,000",
                    "$30,000"
                ],
                correct: 1
            },
            {
                question: "What is compound interest?",
                options: [
                    "Interest charged on credit cards",
                    "Interest earned on both your initial deposit and accumulated interest",
                    "A type of bank fee",
                    "Interest that only applies to loans"
                ],
                correct: 1
            },
            {
                question: "Why is starting to save early so powerful?",
                options: [
                    "Banks give bonuses for early savers",
                    "It's required by law",
                    "Compound interest has more time to grow your money",
                    "You avoid all taxes"
                ],
                correct: 2
            }
        ];

        let userAnswers = [];
        let quizPassed = false;

        // Initialize quiz
        function initQuiz() {
            const userId = localStorage.getItem('userId');

            if (!userId || userId === 'null' || userId === 'undefined') {
                console.error('No valid userId found');
                document.getElementById('finishBtn').disabled = true;
                return;
            }

            const quizPassedStatus = localStorage.getItem(`path4_lesson1_quiz_passed_${userId}`);

            if (quizPassedStatus === 'true') {
                quizPassed = true;
                document.getElementById('finishBtn').disabled = false;
                document.getElementById('quizContainer').style.display = 'none';
                return;
            }

            renderQuiz();
        }

        function renderQuiz() {
            const questionsContainer = document.getElementById('quizQuestions');
            questionsContainer.innerHTML = '';
            userAnswers = new Array(quizData.length).fill(null);

            quizData.forEach((q, qIndex) => {
                const questionCard = document.createElement('div');
                questionCard.className = 'question-card';
                questionCard.innerHTML = `
                    <div class="question-text">Question ${qIndex + 1}: ${q.question}</div>
                    ${q.options.map((option, oIndex) => `
                        <div class="answer-option" onclick="selectAnswer(${qIndex}, ${oIndex})">
                            <input type="radio" name="question${qIndex}" value="${oIndex}" style="margin-right: 10px;">
                            ${option}
                        </div>
                    `).join('')}
                `;
                questionsContainer.appendChild(questionCard);
            });

            document.getElementById('submitQuiz').disabled = false;
            document.getElementById('quizResult').innerHTML = '';
        }

        function selectAnswer(questionIndex, optionIndex) {
            userAnswers[questionIndex] = optionIndex;

            const questionCard = document.querySelectorAll('.question-card')[questionIndex];
            const options = questionCard.querySelectorAll('.answer-option');
            options.forEach((opt, idx) => {
                opt.classList.remove('selected');
                if (idx === optionIndex) {
                    opt.classList.add('selected');
                    opt.querySelector('input').checked = true;
                }
            });
        }

        function submitQuiz() {
            if (userAnswers.includes(null)) {
                alert('Please answer all questions before submitting.');
                return;
            }

            let correct = 0;
            quizData.forEach((q, index) => {
                if (userAnswers[index] === q.correct) {
                    correct++;
                }
            });

            const percentage = Math.round((correct / quizData.length) * 100);
            const passed = percentage === 100;

            document.querySelectorAll('.question-card').forEach((card, qIndex) => {
                const options = card.querySelectorAll('.answer-option');
                options.forEach((opt, oIndex) => {
                    opt.style.pointerEvents = 'none';
                    if (oIndex === quizData[qIndex].correct) {
                        opt.classList.add('correct');
                    } else if (oIndex === userAnswers[qIndex] && oIndex !== quizData[qIndex].correct) {
                        opt.classList.add('incorrect');
                    }
                });
            });

            const resultDiv = document.getElementById('quizResult');
            if (passed) {
                quizPassed = true;
                const userId = localStorage.getItem('userId');
                localStorage.setItem(`path4_lesson1_quiz_passed_${userId}`, 'true');
                document.getElementById('finishBtn').disabled = false;

                resultDiv.innerHTML = `
                    <div class="quiz-result pass">
                        <div class="result-icon"><svg width="48" height="48" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="24" cy="24" r="20" fill="#D1FAE5"/><circle cx="24" cy="24" r="14" stroke="#00A676" stroke-width="2" fill="none"/><path d="M18 22 L20 18 L22 22" stroke="#00A676" stroke-width="2" fill="none"/><path d="M26 22 L28 18 L30 22" stroke="#00A676" stroke-width="2" fill="none"/><path d="M16 26 Q24 32 32 26" stroke="#00A676" stroke-width="2" fill="none"/></svg></div>
                        <div class="result-text" style="color: #10b981;">Quiz Passed!</div>
                        <div class="result-score">You scored ${correct} out of ${quizData.length} (${percentage}%)</div>
                        <p style="color: var(--text-secondary);">Great job! You can now finish the lesson and move to the next one.</p>
                    </div>
                `;
            } else {
                resultDiv.innerHTML = `
                    <div class="quiz-result fail">
                        <div class="result-icon"><svg width="48" height="48" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="24" cy="24" r="20" fill="#EDE9FE"/><rect x="16" y="12" width="16" height="24" rx="1" stroke="#8B5CF6" stroke-width="2" fill="none"/><line x1="20"y1="18"x2="28"y2="18" stroke="#8B5CF6" stroke-width="1.5"/><line x1="20"y1="22"x2="28"y2="22" stroke="#8B5CF6" stroke-width="1.5"/><line x1="20"y1="26"x2="25"y2="26" stroke="#8B5CF6" stroke-width="1.5"/></svg></div>
                        <div class="result-text" style="color: #dc2626;">Not quite there yet</div>
                        <div class="result-score">You scored ${correct} out of ${quizData.length} (${percentage}%)</div>
                        <p style="color: var(--text-secondary); margin-bottom: 15px;">You need 100% to pass. Review the lesson and try again!</p>
                        <button class="btn-retry" onclick="retryQuiz()">Retry Quiz</button>
                    </div>
                `;
            }

            document.getElementById('submitQuiz').style.display = 'none';
        }

        function retryQuiz() {
            renderQuiz();
            document.getElementById('submitQuiz').style.display = 'block';
        }

        async function finishLesson() {
            if (!quizPassed) {
                alert('Please complete the quiz first!');
                return;
            }

            const success = await completeLesson('path4_lesson1', 4, 1);

            if (success) {
                window.location.href = 'path4-lessons.html';
            }
        }

        updateNav();
        initQuiz();

        // Checkpoint functions
        let checkpoint1Answered = false;
        let checkpoint2Answered = false;

        function checkCheckpoint1(selectedOption) {
            if (checkpoint1Answered) return;
            checkpoint1Answered = true;

            const correctOption = 1;
            const isCorrect = selectedOption === correctOption;

            const options = document.querySelectorAll('[name="checkpoint1"]').forEach((radio, index) => {
                const optionDiv = radio.parentElement;
                optionDiv.style.pointerEvents = 'none';

                if (index === correctOption) {
                    optionDiv.classList.add('correct');
                } else if (index === selectedOption && index !== correctOption) {
                    optionDiv.classList.add('incorrect');
                }

                if (index === selectedOption) {
                    radio.checked = true;
                }
            });

            const feedback = document.getElementById('checkpoint1-feedback');
            const feedbackIcon = feedback.querySelector('.checkpoint-feedback-icon');
            const feedbackTitle = feedback.querySelector('.checkpoint-feedback-title');
            const feedbackExplanation = feedback.querySelector('.checkpoint-explanation');
            const continueBtn = document.getElementById('checkpoint1-continue');

            if (isCorrect) {
                feedback.classList.add('correct');
                feedbackIcon.textContent = '<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M2 8 L6 12 L14 4" stroke="currentColor" stroke-width="2" fill="none"/></svg>';
                feedbackTitle.textContent = 'Correct!';
                feedbackExplanation.textContent = 'Perfect! "Pay yourself first" means prioritizing savings by setting money aside before spending on other things. This ensures you build wealth consistently.';
            } else {
                feedback.classList.add('incorrect');
                feedbackIcon.textContent = '•';
                feedbackTitle.textContent = 'Not quite!';
                feedbackExplanation.textContent = '"Pay yourself first" means setting aside money for savings before spending on other things. This ensures you prioritize your financial future and build wealth consistently.';
            }

            feedback.classList.add('show');
            continueBtn.classList.add('show');
        }

        function checkCheckpoint2(selectedOption) {
            if (checkpoint2Answered) return;
            checkpoint2Answered = true;

            const correctOption = 1;
            const isCorrect = selectedOption === correctOption;

            const options = document.querySelectorAll('[name="checkpoint2"]').forEach((radio, index) => {
                const optionDiv = radio.parentElement;
                optionDiv.style.pointerEvents = 'none';

                if (index === correctOption) {
                    optionDiv.classList.add('correct');
                } else if (index === selectedOption && index !== correctOption) {
                    optionDiv.classList.add('incorrect');
                }

                if (index === selectedOption) {
                    radio.checked = true;
                }
            });

            const feedback = document.getElementById('checkpoint2-feedback');
            const feedbackIcon = feedback.querySelector('.checkpoint-feedback-icon');
            const feedbackTitle = feedback.querySelector('.checkpoint-feedback-title');
            const feedbackExplanation = feedback.querySelector('.checkpoint-explanation');
            const continueBtn = document.getElementById('checkpoint2-continue');

            if (isCorrect) {
                feedback.classList.add('correct');
                feedbackIcon.textContent = '<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M2 8 L6 12 L14 4" stroke="currentColor" stroke-width="2" fill="none"/></svg>';
                feedbackTitle.textContent = 'Excellent!';
                feedbackExplanation.textContent = 'Exactly right! By putting 20% ($40) into savings first, you practice "pay yourself first." You can then use the remaining $160 responsibly for needs or wants.';
            } else {
                feedback.classList.add('incorrect');
                feedbackIcon.textContent = '•';
                feedbackTitle.textContent = 'Good thinking, but...';
                feedbackExplanation.textContent = 'The "pay yourself first" principle means putting a portion into savings before anything else. Setting aside 20% ($40) ensures you\'re building your financial future while still having money to spend.';
            }

            feedback.classList.add('show');
            continueBtn.classList.add('show');
        }

        // Multi-screen navigation
        let currentScreen = 1;
        const totalScreens = 8;

        function showScreen(screenNumber) {
            document.querySelectorAll('.lesson-screen').forEach(screen => {
                screen.classList.remove('active');
            });

            const targetScreen = document.querySelector(`.lesson-screen[data-screen="${screenNumber}"]`);
            if (targetScreen) {
                targetScreen.classList.add('active');
                currentScreen = screenNumber;

                const lessonContainer = document.querySelector('.lesson-container');
                const headerOffset = 80;
                const elementPosition = lessonContainer.getBoundingClientRect().top;
                const offsetPosition = elementPosition + window.pageYOffset - headerOffset;

                window.scrollTo({
                    top: offsetPosition,
                    behavior: 'smooth'
                });
            }
        }

        function nextScreen() {
            if (currentScreen < totalScreens) {
                showScreen(currentScreen + 1);
            }
        }

        function previousScreen() {
            if (currentScreen > 1) {
                showScreen(currentScreen - 1);
            }
        }

        document.addEventListener('DOMContentLoaded', function() {
            showScreen(1);
            initCalculator();
        });

        function toggleChecklistItem(item) {
            item.classList.toggle('checked');
            const checkbox = item.querySelector('.checklist-checkbox');
            if (item.classList.contains('checked')) {
                checkbox.innerHTML = '<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M2 8 L6 12 L14 4" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>';
            } else {
                checkbox.textContent = '';
            }
        }
    </script>
</body>
</html>
