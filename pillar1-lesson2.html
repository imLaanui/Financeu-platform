<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lesson 2 - Understanding Income and Expenses - FinanceU</title>
    <link rel="icon" type="image/svg+xml" href="assets/favicon.svg">
    <link rel="icon" type="image/svg+xml" sizes="16x16" href="assets/favicon-16x16.svg">
    <link rel="icon" type="image/svg+xml" sizes="32x32" href="assets/favicon-32x32.svg">
    <link rel="apple-touch-icon" sizes="180x180" href="assets/apple-touch-icon.svg">
    <link rel="stylesheet" href="styles.css">
    <style>
        /* SVG Icon Alignment Fixes */
        svg {
            display: inline-block;
            vertical-align: middle;
        }

        .intro-card-icon svg,
        .mistake-icon svg,
        .reflection-icon svg,
        .result-icon svg {
            display: block;
            margin: 0 auto;
        }

        .budget-method-emoji svg,
        .budget-item-label svg {
            display: inline-block;
            vertical-align: middle;
            margin-right: 8px;
        }

        p svg, li svg, span svg {
            display: inline-block;
            vertical-align: middle;
            margin: 0 2px;
        }

        .lesson-container {
            max-width: 800px;
            margin: 0 auto;
            padding: 40px 20px;
        }
        .lesson-header {
            text-align: center;
            margin-bottom: 40px;
            padding: 30px;
            background: linear-gradient(135deg, #0A1A2F 0%, #1a3a5c 100%);
            border-radius: 16px;
            position: relative;
            overflow: hidden;
        }
        .lesson-header::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(59, 130, 246, 0.1) 0%, transparent 70%);
            animation: rotate 20s linear infinite;
        }
        @keyframes rotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        .lesson-header h1 {
            font-size: 36px;
            color: white;
            margin-bottom: 10px;
            position: relative;
            z-index: 1;
        }
        .lesson-header .lesson-number {
            color: rgba(255, 255, 255, 0.9);
            font-size: 18px;
            font-weight: 700;
            margin-bottom: 5px;
            position: relative;
            z-index: 1;
            text-transform: uppercase;
            letter-spacing: 2px;
        }
        .lesson-section {
            background: white;
            padding: 30px;
            border-radius: 12px;
            margin-bottom: 25px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            position: relative;
            border-left: 4px solid transparent;
            transition: all 0.3s ease;
        }
        .lesson-section:hover {
            border-left-color: var(--primary-color);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }
        .lesson-section h2 {
            color: var(--primary-color);
            font-size: 24px;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 12px;
        }
        .lesson-section h2::before {
            content: '';
            width: 36px;
            height: 36px;
            border-radius: 8px;
            background: linear-gradient(135deg, #0A1A2F 0%, #00A676 100%);
            flex-shrink: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 2px 8px rgba(59, 130, 246, 0.3);
        }
        .lesson-section p {
            line-height: 1.8;
            color: var(--text-secondary);
            margin-bottom: 15px;
        }
        .lesson-section ul {
            line-height: 1.8;
            color: var(--text-secondary);
            margin-left: 20px;
            margin-bottom: 15px;
        }
        .visual-box {
            background: linear-gradient(135deg, #0A1A2F15 0%, #00A67615 100%);
            border-left: 4px solid var(--primary-color);
            padding: 25px;
            border-radius: 12px;
            margin: 20px 0;
            position: relative;
            box-shadow: 0 2px 8px rgba(59, 130, 246, 0.1);
        }
        .visual-box::before {
            content: '';
            position: absolute;
            top: 20px;
            right: 20px;
            font-size: 32px;
            opacity: 0.3;
        }
        .visual-box h3 {
            color: var(--primary-color);
            margin-bottom: 15px;
            font-size: 18px;
            font-weight: 700;
        }
        .income-expense-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 15px;
        }
        .income-box {
            background: #10b98120;
            padding: 20px;
            border-radius: 8px;
            border: 2px solid #10b981;
        }
        .expense-box {
            background: #dc262620;
            padding: 20px;
            border-radius: 8px;
            border: 2px solid #dc2626;
        }
        .income-box h4 {
            color: #10b981;
            margin-bottom: 10px;
        }
        .expense-box h4 {
            color: #dc2626;
            margin-bottom: 10px;
        }
        .action-box {
            background: linear-gradient(135deg, #10b98120 0%, #d1fae540 100%);
            border-left: 4px solid #10b981;
            padding: 25px;
            border-radius: 12px;
            position: relative;
            box-shadow: 0 2px 8px rgba(16, 185, 129, 0.1);
        }
        .action-box::before {
            content: '';
            position: absolute;
            top: 20px;
            right: 20px;
            font-size: 32px;
            opacity: 0.5;
        }
        .action-box h3 {
            color: #10b981;
            margin-bottom: 10px;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .reflection-box {
            background: linear-gradient(135deg, #f59e0b20 0%, #fef3c740 100%);
            border-left: 4px solid #f59e0b;
            padding: 25px;
            border-radius: 12px;
            position: relative;
            box-shadow: 0 2px 8px rgba(245, 158, 11, 0.1);
        }
        .reflection-box::before {
            content: '';
            position: absolute;
            top: 20px;
            right: 20px;
            font-size: 32px;
            opacity: 0.5;
        }
        .reflection-box h3 {
            color: #f59e0b;
            margin-bottom: 10px;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .mistakes-list {
            background: linear-gradient(135deg, #fee2e2 0%, #fecaca 100%);
            padding: 25px;
            border-radius: 12px;
            border-left: 4px solid #dc2626;
            position: relative;
            box-shadow: 0 2px 8px rgba(220, 38, 38, 0.1);
        }
        .mistakes-list::before {
            content: '';
            position: absolute;
            top: 20px;
            right: 20px;
            font-size: 32px;
            opacity: 0.5;
        }
        .mistakes-list h3 {
            color: #dc2626;
            margin-bottom: 15px;
            font-weight: 700;
        }
        .btn-finish {
            display: block;
            width: 100%;
            max-width: 400px;
            margin: 30px auto;
            padding: 18px;
            background: var(--primary-color);
            color: white;
            text-align: center;
            text-decoration: none;
            border-radius: 8px;
            font-size: 18px;
            font-weight: 600;
            transition: background 0.2s;
            border: none;
            cursor: pointer;
        }
        .btn-finish:hover {
            background: #2563eb;
        }
        .back-link {
            display: inline-block;
            margin-bottom: 20px;
            color: var(--primary-color);
            text-decoration: none;
            font-weight: 600;
        }
        .back-link:hover {
            text-decoration: underline;
        }
        .quiz-container {
            background: linear-gradient(135deg, #0A1A2F15 0%, #00A67615 100%);
            border: 2px solid var(--primary-color);
            border-radius: 12px;
            padding: 30px;
            margin: 40px 0 30px 0;
        }
        .quiz-header {
            text-align: center;
            margin-bottom: 25px;
        }
        .quiz-header h2 {
            color: var(--primary-color);
            font-size: 28px;
            margin-bottom: 10px;
        }
        .quiz-header p {
            color: var(--text-secondary);
            font-size: 16px;
        }
        .question-card {
            background: white;
            padding: 25px;
            border-radius: 8px;
            margin-bottom: 20px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }
        .question-text {
            font-size: 18px;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 15px;
        }
        .answer-option {
            background: #f9fafb;
            padding: 15px;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            margin-bottom: 10px;
            cursor: pointer;
            transition: all 0.2s;
        }
        .answer-option:hover {
            border-color: var(--primary-color);
            background: #eff6ff;
        }
        .answer-option.selected {
            border-color: var(--primary-color);
            background: #dbeafe;
        }
        .answer-option.correct {
            border-color: #10b981;
            background: #d1fae5;
        }
        .answer-option.incorrect {
            border-color: #dc2626;
            background: #fee2e2;
        }
        .btn-submit-quiz {
            display: block;
            width: 100%;
            max-width: 300px;
            margin: 20px auto;
            padding: 15px;
            background: var(--primary-color);
            color: white;
            text-align: center;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            border: none;
            cursor: pointer;
            transition: background 0.2s;
        }
        .btn-submit-quiz:hover {
            background: #2563eb;
        }
        .btn-submit-quiz:disabled {
            background: #9ca3af;
            cursor: not-allowed;
        }
        .quiz-result {
            background: white;
            padding: 25px;
            border-radius: 8px;
            text-align: center;
            margin-top: 20px;
        }
        .quiz-result.pass {
            border: 3px solid #10b981;
        }
        .quiz-result.fail {
            border: 3px solid #dc2626;
        }
        .result-icon {
            font-size: 48px;
            margin-bottom: 15px;
        }
        .result-text {
            font-size: 24px;
            font-weight: 700;
            margin-bottom: 10px;
        }
        .result-score {
            font-size: 18px;
            color: var(--text-secondary);
            margin-bottom: 20px;
        }
        .btn-retry {
            padding: 12px 24px;
            background: #f59e0b;
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: background 0.2s;
        }
        .btn-retry:hover {
            background: #d97706;
        }
        .btn-finish:disabled {
            background: #9ca3af;
            cursor: not-allowed;
            opacity: 0.6;
        }
        /* Multi-screen styles */
        .lesson-screen {
            display: none;
        }
        .lesson-screen.active {
            display: block;
            animation: fadeIn 0.3s ease-in;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .screen-progress {
            text-align: center;
            margin-bottom: 20px;
            padding: 12px 20px;
            background: linear-gradient(135deg, #0A1A2F15 0%, #00A67615 100%);
            border-radius: 8px;
            font-weight: 600;
            color: var(--primary-color);
            font-size: 14px;
        }
        .screen-navigation {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 15px;
            margin-top: 30px;
            padding-top: 20px;
            border-top: 2px solid #e5e7eb;
        }
        .btn-nav {
            padding: 12px 24px;
            background: var(--primary-color);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .btn-nav:hover {
            background: #2563eb;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3);
        }
        .btn-nav:disabled {
            background: #d1d5db;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }
        .btn-nav.btn-prev {
            background: #6b7280;
        }
        .btn-nav.btn-prev:hover {
            background: #4b5563;
        }
        .nav-spacer {
            width: 120px;
        }
        /* Checkpoint styles */
        .checkpoint-container {
            background: linear-gradient(135deg, #E0F2FE 0%, #BAE6FD 100%);
            border: 2px solid #7DD3FC;
            border-radius: 12px;
            padding: 30px;
            margin: 20px 0;
        }
        .checkpoint-header {
            text-align: center;
            margin-bottom: 20px;
        }
        .checkpoint-header h3 {
            color: #0284C7;
            font-size: 24px;
            margin-bottom: 8px;
        }
        .checkpoint-header p {
            color: var(--text-secondary);
            font-size: 15px;
        }
        .checkpoint-question {
            background: white;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 15px;
        }
        .checkpoint-question-text {
            font-size: 18px;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 15px;
        }
        .checkpoint-option {
            background: #f9fafb;
            padding: 15px;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            margin-bottom: 10px;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .checkpoint-option:hover {
            border-color: #0284C7;
            background: #F0F9FF;
        }
        .checkpoint-option.selected {
            border-color: #0284C7;
            background: #E0F2FE;
        }
        .checkpoint-option.correct {
            border-color: #10b981;
            background: #d1fae5;
            cursor: default;
        }
        .checkpoint-option.incorrect {
            border-color: #dc2626;
            background: #fee2e2;
            cursor: default;
        }
        .checkpoint-option input[type="radio"] {
            cursor: pointer;
        }
        .checkpoint-feedback {
            background: white;
            padding: 20px;
            border-radius: 8px;
            margin-top: 20px;
            display: none;
        }
        .checkpoint-feedback.show {
            display: block;
            animation: fadeIn 0.3s ease-in;
        }
        .checkpoint-feedback.correct {
            border-left: 4px solid #10b981;
        }
        .checkpoint-feedback.incorrect {
            border-left: 4px solid #f59e0b;
        }
        .checkpoint-feedback-icon {
            font-size: 32px;
            margin-bottom: 10px;
        }
        .checkpoint-feedback-title {
            font-size: 20px;
            font-weight: 700;
            margin-bottom: 10px;
        }
        .checkpoint-feedback.correct .checkpoint-feedback-title {
            color: #10b981;
        }
        .checkpoint-feedback.incorrect .checkpoint-feedback-title {
            color: #f59e0b;
        }
        .checkpoint-explanation {
            color: var(--text-secondary);
            line-height: 1.6;
            margin-top: 10px;
        }
        .btn-continue {
            display: none;
            width: 100%;
            max-width: 300px;
            margin: 20px auto;
            padding: 15px;
            background: var(--primary-color);
            color: white;
            text-align: center;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            border: none;
            cursor: pointer;
            transition: background 0.2s;
        }
        .btn-continue.show {
            display: block;
        }
        .btn-continue:hover {
            background: #2563eb;
        }
        @media (max-width: 768px) {
            .income-expense-grid {
                grid-template-columns: 1fr;
            }
        }

        /* SCREEN 1: Animated Icons */
        .intro-cards {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin-top: 20px;
        }
        .intro-card {
            background: linear-gradient(135deg, #0A1A2F15 0%, #00A67615 100%);
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            transition: all 0.3s;
            border: 2px solid transparent;
        }
        .intro-card:hover {
            transform: translateY(-5px) scale(1.02);
            border-color: var(--primary-color);
            box-shadow: 0 8px 20px rgba(102, 126, 234, 0.2);
        }
        .intro-card-icon {
            font-size: 48px;
            margin-bottom: 10px;
            animation: float 3s ease-in-out infinite;
        }
        .intro-card:nth-child(2) .intro-card-icon {
            animation-delay: 1s;
        }
        .intro-card:nth-child(3) .intro-card-icon {
            animation-delay: 2s;
        }
        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }
        .intro-card h3 {
            color: var(--primary-color);
            font-size: 18px;
            margin-bottom: 8px;
            font-weight: 700;
        }
        .intro-card p {
            color: var(--text-secondary);
            font-size: 14px;
            line-height: 1.5;
            margin: 0;
        }

        /* SCREEN 2: Budget Method Cards */
        .budget-methods {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        .budget-method-card {
            background: white;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            padding: 15px;
            text-align: center;
            transition: all 0.3s;
        }
        .budget-method-card:hover {
            border-color: var(--primary-color);
            transform: translateY(-3px);
            box-shadow: 0 4px 12px rgba(59, 130, 246, 0.2);
        }
        .budget-method-emoji {
            font-size: 32px;
            margin-bottom: 8px;
        }
        .budget-method-name {
            font-weight: 700;
            color: var(--text-primary);
            font-size: 14px;
            margin-bottom: 5px;
        }
        .budget-method-desc {
            font-size: 12px;
            color: var(--text-secondary);
            line-height: 1.4;
        }

        /* SCREEN 4: Visual Budget Chart */
        .budget-breakdown {
            margin: 20px 0;
        }
        .budget-chart {
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }
        .budget-chart-title {
            text-align: center;
            color: var(--primary-color);
            font-size: 18px;
            font-weight: 700;
            margin-bottom: 15px;
        }
        .budget-item {
            margin-bottom: 12px;
        }
        .budget-item-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 5px;
        }
        .budget-item-label {
            font-weight: 600;
            color: var(--text-primary);
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .budget-item-value {
            font-weight: 700;
            color: var(--primary-color);
            font-size: 14px;
        }
        .budget-item-bar {
            height: 24px;
            background: #f3f4f6;
            border-radius: 6px;
            overflow: hidden;
            position: relative;
        }
        .budget-item-fill {
            height: 100%;
            background: linear-gradient(90deg, #0A1A2F 0%, #00A676 100%);
            border-radius: 6px;
            transition: width 1s ease-out;
            display: flex;
            align-items: center;
            justify-content: flex-end;
            padding-right: 8px;
            color: white;
            font-size: 12px;
            font-weight: 600;
        }
        .income-bar {
            background: linear-gradient(90deg, #10b981 0%, #059669 100%);
        }
        .budget-summary {
            background: linear-gradient(135deg, #0A1A2F15 0%, #00A67615 100%);
            border-radius: 8px;
            padding: 15px;
            margin-top: 15px;
            text-align: center;
        }
        .budget-summary-label {
            font-size: 14px;
            color: var(--text-secondary);
            margin-bottom: 5px;
        }
        .budget-summary-value {
            font-size: 28px;
            font-weight: 700;
            color: #10b981;
        }

        /* SCREEN 6: Visual Mistakes */
        .mistakes-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin: 20px 0;
        }
        .mistake-card {
            background: linear-gradient(135deg, #fee2e2 0%, #fecaca 100%);
            border: 2px solid #dc2626;
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            transition: all 0.3s;
        }
        .mistake-card:hover {
            transform: translateY(-5px) scale(1.02);
            box-shadow: 0 8px 20px rgba(220, 38, 38, 0.2);
        }
        .mistake-icon {
            font-size: 40px;
            margin-bottom: 10px;
            animation: shake 2s ease-in-out infinite;
        }
        .mistake-card:nth-child(2) .mistake-icon {
            animation-delay: 0.4s;
        }
        .mistake-card:nth-child(3) .mistake-icon {
            animation-delay: 0.8s;
        }
        .mistake-card:nth-child(4) .mistake-icon {
            animation-delay: 1.2s;
        }
        @keyframes shake {
            0%, 100% { transform: rotate(0deg); }
            25% { transform: rotate(-5deg); }
            75% { transform: rotate(5deg); }
        }
        .mistake-title {
            font-weight: 700;
            color: #dc2626;
            font-size: 14px;
            margin-bottom: 8px;
        }
        .mistake-desc {
            font-size: 12px;
            color: var(--text-secondary);
            line-height: 1.4;
        }

        /* SCREEN 7: Interactive Checklist */
        .action-checklist {
            background: linear-gradient(135deg, #10b98115 0%, #d1fae530 100%);
            border: 2px solid #10b981;
            border-radius: 12px;
            padding: 25px;
            margin: 20px 0;
        }
        .checklist-title {
            color: #10b981;
            font-size: 20px;
            font-weight: 700;
            margin-bottom: 15px;
            text-align: center;
        }
        .checklist-item {
            background: white;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 12px;
            transition: all 0.3s;
            cursor: pointer;
        }
        .checklist-item:hover {
            box-shadow: 0 2px 8px rgba(16, 185, 129, 0.2);
            transform: translateX(5px);
        }
        .checklist-item.checked {
            background: #d1fae5;
            opacity: 0.7;
        }
        .checklist-checkbox {
            width: 24px;
            height: 24px;
            border: 2px solid #10b981;
            border-radius: 6px;
            flex-shrink: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
            transition: all 0.3s;
        }
        .checklist-item.checked .checklist-checkbox {
            background: #10b981;
            color: white;
        }
        .checklist-text {
            font-size: 14px;
            color: var(--text-primary);
            font-weight: 500;
        }
        .reflection-box {
            background: linear-gradient(135deg, #f59e0b15 0%, #fef3c730 100%);
            border: 2px solid #f59e0b;
            border-radius: 12px;
            padding: 20px;
            margin: 20px 0;
            text-align: center;
        }
        .reflection-icon {
            font-size: 40px;
            margin-bottom: 10px;
        }
        .reflection-title {
            color: #f59e0b;
            font-size: 18px;
            font-weight: 700;
            margin-bottom: 10px;
        }
        .reflection-text {
            color: var(--text-secondary);
            font-size: 14px;
            line-height: 1.6;
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="container">
            <div class="nav-wrapper">
                <div class="logo"><a href="/" style="color: inherit; text-decoration: none;">Finance<span class="logo-accent">U</span></a></div>
                <ul class="nav-links">
                    <li><a href="/">Home</a></li>
                    <li><a href="dashboard">Dashboard</a></li>
                    <li id="authButtons" style=" opacity: 0;">
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Lesson Content -->
    <div class="lesson-container">
        <a href="/pillar1-lessons" class="back-link">← Back to Pillar 1 Lessons</a>

        <!-- Header -->
        <div class="lesson-header">
            <div class="lesson-number">LESSON 2</div>
            <h1>Understanding Income and Expenses</h1>
        </div>

        <!-- Screen 1: Quick Intro -->
        <div class="lesson-screen active" data-screen="1">
            <div class="screen-progress">Screen 1 of 8</div>
            <div class="lesson-section">
                <h2>Understanding Income and Expenses</h2>
                <div class="intro-cards">
                    <div class="intro-card">
                        <div class="intro-card-icon"><svg width="48" height="48" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="24" cy="24" r="20" fill="#DBEAFE"/><circle cx="24" cy="24" r="14" stroke="#3B82F6" stroke-width="2" fill="none"/><circle cx="24" cy="24" r="8" stroke="#3B82F6" stroke-width="2" fill="none"/><circle cx="24" cy="24" r="3" fill="#3B82F6"/></svg></div>
                        <h3>The Problem</h3>
                        <p>Most people track what they earn, but have no idea where it all goes</p>
                    </div>
                    <div class="intro-card">
                        <div class="intro-card-icon"><svg width="48" height="48" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="24" cy="24" r="20" fill="#FEF3C7"/><circle cx="24" cy="20" r="6" fill="#F59E0B" opacity="0.3"/><path d="M24 14 C28 14 30 16 30 20 C30 23 28 25 27 26 L27 30 L21 30 L21 26 C20 25 18 23 18 20 C18 16 20 14 24 14" stroke="#F59E0B" stroke-width="2"/><line x1="20"y1="32"x2="28"y2="32" stroke="#F59E0B" stroke-width="2" stroke-linecap="round"/></svg></div>
                        <h3>Why It Matters</h3>
                        <p>The gap between what you make and what you spend determines your entire financial future</p>
                    </div>
                    <div class="intro-card">
                        <div class="intro-card-icon"><svg width="48" height="48" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="24" cy="24" r="20" fill="#D1FAE5"/><path d="M14 24 L20 30 L34 16" stroke="#00A676" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"/></svg></div>
                        <h3>Your Goal</h3>
                        <p>Learn the golden rule of personal finance and how to apply it starting today</p>
                    </div>
                </div>
            </div>
            <div class="screen-navigation">
                <div class="nav-spacer"></div>
                <button class="btn-nav" onclick="nextScreen()">Next <span>→</span></button>
            </div>
        </div>

        <!-- Screen 2: Core Concept -->
        <div class="lesson-screen" data-screen="2">
            <div class="screen-progress">Screen 2 of 8</div>
            <div class="lesson-section">
                <h2>The Money Flow</h2>
                <p style="text-align: center; font-size: 18px; font-weight: 700; color: var(--primary-color); margin-bottom: 20px;">
                    Income - Expenses = Your Financial Future
                </p>

                <div class="budget-methods">
                    <div class="budget-method-card">
                        <div class="budget-method-emoji"><svg width="48" height="48" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="24" cy="24" r="20" fill="#FEF3C7"/><circle cx="24" cy="24" r="14" stroke="#F59E0B" stroke-width="2"/><path d="M24 16V32M20 20C20 18 22 16 24 16C26 16 28 18 28 20C28 22 26 22 24 22C22 22 20 22 20 24C20 26 22 28 24 28C26 28 28 26 28 24" stroke="#F59E0B" stroke-width="2" stroke-linecap="round"/></svg></div>
                        <div class="budget-method-name">Income</div>
                        <div class="budget-method-desc">Money coming in</div>
                    </div>
                    <div class="budget-method-card">
                        <div class="budget-method-emoji"><svg width="48" height="48" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="24" cy="24" r="20" fill="#FEE2E2"/><path d="M12 18 L18 24 L24 20 L30 30 L36 26" stroke="#DC2626" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"/><path d="M30 34 L36 34 L36 28" stroke="#DC2626" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg></div>
                        <div class="budget-method-name">Expenses</div>
                        <div class="budget-method-desc">Money going out</div>
                    </div>
                    <div class="budget-method-card">
                        <div class="budget-method-emoji"><svg width="48" height="48" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="24" cy="24" r="20" fill="#D1FAE5"/><path d="M12 30 L18 24 L24 28 L30 18 L36 22" stroke="#00A676" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"/><path d="M30 14 L36 14 L36 20" stroke="#00A676" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg></div>
                        <div class="budget-method-name">Surplus</div>
                        <div class="budget-method-desc">Build wealth</div>
                    </div>
                    <div class="budget-method-card">
                        <div class="budget-method-emoji"><svg width="48" height="48" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="24" cy="24" r="20" fill="#FEE2E2"/><path d="M12 18 L18 24 L24 20 L30 30 L36 26" stroke="#DC2626" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"/><path d="M30 34 L36 34 L36 28" stroke="#DC2626" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg></div>
                        <div class="budget-method-name">Deficit</div>
                        <div class="budget-method-desc">Going into debt</div>
                    </div>
                </div>

                <p style="margin-top: 20px;"><strong>The Golden Rule:</strong> If your income is greater than your expenses, you're building wealth. If your expenses are greater than your income, you're going into debt.</p>
            </div>
            <div class="screen-navigation">
                <button class="btn-nav btn-prev" onclick="previousScreen()"><span>←</span> Previous</button>
                <button class="btn-nav" onclick="nextScreen()">Next <span>→</span></button>
            </div>
        </div>

        <!-- Screen 3: Checkpoint Question 1 -->
        <div class="lesson-screen" data-screen="3">
            <div class="screen-progress">Screen 3 of 8</div>
            <div class="checkpoint-container">
                <div class="checkpoint-header">
                    <h3>Quick Check</h3>
                    <p>Let's pause and check your understanding. No pressure - you can continue regardless of your answer!</p>
                </div>

                <div class="checkpoint-question">
                    <div class="checkpoint-question-text">What's the golden rule of personal finance regarding income and expenses?</div>
                    <div class="checkpoint-option" onclick="checkCheckpoint1(0)">
                        <input type="radio" name="checkpoint1" value="0">
                        <span>A) Expenses should always equal income</span>
                    </div>
                    <div class="checkpoint-option" onclick="checkCheckpoint1(1)">
                        <input type="radio" name="checkpoint1" value="1">
                        <span>B) Income should be greater than expenses to build wealth</span>
                    </div>
                    <div class="checkpoint-option" onclick="checkCheckpoint1(2)">
                        <input type="radio" name="checkpoint1" value="2">
                        <span>C) Income doesn't matter as long as you're happy</span>
                    </div>
                    <div class="checkpoint-option" onclick="checkCheckpoint1(3)">
                        <input type="radio" name="checkpoint1" value="3">
                        <span>D) Expenses should be greater than income</span>
                    </div>
                </div>

                <div class="checkpoint-feedback" id="checkpoint1-feedback">
                    <div class="checkpoint-feedback-icon"></div>
                    <div class="checkpoint-feedback-title"></div>
                    <div class="checkpoint-explanation"></div>
                </div>

                <button class="btn-continue" id="checkpoint1-continue" onclick="nextScreen()">Continue <span>→</span></button>
            </div>
            <div class="screen-navigation">
                <button class="btn-nav btn-prev" onclick="previousScreen()"><span>←</span> Previous</button>
                <div class="nav-spacer"></div>
            </div>
        </div>

        <!-- Screen 4: Simple Example -->
        <div class="lesson-screen" data-screen="4">
            <div class="screen-progress">Screen 4 of 8</div>
            <div class="lesson-section">
                <h2>Simple Example</h2>
                <p>Meet Alex, a college student:</p>
                <p><strong>Alex's Monthly Income:</strong></p>
                <ul>
                    <li>Part-time job: $800</li>
                    <li>Allowance from parents: $200</li>
                    <li><strong>Total Income: $1,000</strong></li>
                </ul>
                <p><strong>Alex's Monthly Expenses:</strong></p>
                <ul>
                    <li>Rent (shared apartment): $400</li>
                    <li>Food: $250</li>
                    <li>Phone bill: $50</li>
                    <li>Entertainment: $100</li>
                    <li>Gas/transportation: $80</li>
                    <li>Misc. purchases: $70</li>
                    <li><strong>Total Expenses: $950</strong></li>
                </ul>
                <p><strong>The Result:</strong> Alex has $50 left over each month ($1,000 - $950 = $50). This is called a surplus, and it's money Alex can save or invest for the future.</p>
            </div>

            <!-- Budget Breakdown Visual -->
            <div class="budget-breakdown">
                <div class="budget-chart">
                    <div class="budget-chart-title">Alex's Monthly Budget Breakdown</div>

                    <div class="budget-item">
                        <div class="budget-item-header">
                            <div class="budget-item-label"><svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="10" cy="10" r="8" fill="#10B981"/><text x="10" y="14" text-anchor="middle" font-size="10" fill="white" font-weight="bold">$</text></svg> Total Income</div>
                            <div class="budget-item-value">$1,000</div>
                        </div>
                        <div class="budget-item-bar">
                            <div class="budget-item-fill income-bar" style="width: 100%;">100%</div>
                        </div>
                    </div>

                    <div class="budget-item">
                        <div class="budget-item-header">
                            <div class="budget-item-label"><svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M3 10 L10 3 L17 10 L17 17 L3 17 Z" fill="#3B82F6"/><rect x="8" y="12" width="4" height="5" fill="#60A5FA"/></svg> Rent</div>
                            <div class="budget-item-value">$400</div>
                        </div>
                        <div class="budget-item-bar">
                            <div class="budget-item-fill" style="width: 40%;">40%</div>
                        </div>
                    </div>

                    <div class="budget-item">
                        <div class="budget-item-header">
                            <div class="budget-item-label"><svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M4 7 L16 7 C16 5 15 4 13 4 L7 4 C5 4 4 5 4 7" fill="#F59E0B"/><rect x="3" y="7" width="14" height="2" fill="#10B981"/><rect x="3" y="9" width="14" height="2" fill="#B45309"/><rect x="3" y="11" width="14" height="2" fill="#F59E0B"/></svg> Food</div>
                            <div class="budget-item-value">$250</div>
                        </div>
                        <div class="budget-item-bar">
                            <div class="budget-item-fill" style="width: 25%;">25%</div>
                        </div>
                    </div>

                    <div class="budget-item">
                        <div class="budget-item-header">
                            <div class="budget-item-label"><svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><rect x="6" y="2" width="8" height="16" rx="1" stroke="#3B82F6" stroke-width="1.5" fill="none"/><circle cx="10" cy="15" r="1" fill="#3B82F6"/></svg> Phone Bill</div>
                            <div class="budget-item-value">$50</div>
                        </div>
                        <div class="budget-item-bar">
                            <div class="budget-item-fill" style="width: 5%;">5%</div>
                        </div>
                    </div>

                    <div class="budget-item">
                        <div class="budget-item-header">
                            <div class="budget-item-label"><svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><rect x="2" y="5" width="16" height="11" rx="1" fill="#1F2937"/><rect x="2" y="3" width="16" height="2" fill="#FCD34D"/><rect x="3" y="3" width="2" height="2" fill="#1F2937"/><rect x="7" y="3" width="2" height="2" fill="#1F2937"/><rect x="11" y="3" width="2" height="2" fill="#1F2937"/><rect x="15" y="3" width="2" height="2" fill="#1F2937"/></svg> Entertainment</div>
                            <div class="budget-item-value">$100</div>
                        </div>
                        <div class="budget-item-bar">
                            <div class="budget-item-fill" style="width: 10%;">10%</div>
                        </div>
                    </div>

                    <div class="budget-item">
                        <div class="budget-item-header">
                            <div class="budget-item-label"><svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><rect x="3" y="8" width="14" height="6" rx="1" fill="#3B82F6"/><path d="M4 8 L6 5 L14 5 L16 8" fill="#60A5FA"/><circle cx="6" cy="14" r="1.5" fill="#1F2937"/><circle cx="14" cy="14" r="1.5" fill="#1F2937"/></svg> Transportation</div>
                            <div class="budget-item-value">$80</div>
                        </div>
                        <div class="budget-item-bar">
                            <div class="budget-item-fill" style="width: 8%;">8%</div>
                        </div>
                    </div>

                    <div class="budget-item">
                        <div class="budget-item-header">
                            <div class="budget-item-label"><svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M3 6 L10 2 L17 6 L17 14 L10 18 L3 14 Z" stroke="#B45309" stroke-width="1.5" fill="none"/><polyline points="3,6 10,10 17,6" stroke="#B45309" stroke-width="1.5" fill="none"/><line x1="10"y1="10"x2="10"y2="18" stroke="#B45309" stroke-width="1.5"/></svg> Miscellaneous</div>
                            <div class="budget-item-value">$70</div>
                        </div>
                        <div class="budget-item-bar">
                            <div class="budget-item-fill" style="width: 7%;">7%</div>
                        </div>
                    </div>

                    <div class="budget-summary">
                        <div class="budget-summary-label">Monthly Surplus</div>
                        <div class="budget-summary-value">$50</div>
                    </div>
                </div>
            </div>
            <div class="screen-navigation">
                <button class="btn-nav btn-prev" onclick="previousScreen()"><span>←</span> Previous</button>
                <button class="btn-nav" onclick="nextScreen()">Next <span>→</span></button>
            </div>
        </div>

        <!-- Screen 5: Checkpoint Question 2 -->
        <div class="lesson-screen" data-screen="5">
            <div class="screen-progress">Screen 5 of 8</div>
            <div class="checkpoint-container">
                <div class="checkpoint-header">
                    <h3>Quick Check: Apply What You Learned</h3>
                    <p>Let's see how you can apply this concept to a real-world scenario!</p>
                </div>

                <div class="checkpoint-question">
                    <div class="checkpoint-question-text">Your monthly income is $2,000 and your expenses are $2,100. What should you do?</div>
                    <div class="checkpoint-option" onclick="checkCheckpoint2(0)">
                        <input type="radio" name="checkpoint2" value="0">
                        <span>A) Nothing, it's close enough</span>
                    </div>
                    <div class="checkpoint-option" onclick="checkCheckpoint2(1)">
                        <input type="radio" name="checkpoint2" value="1">
                        <span>B) Reduce expenses or increase income - you're going into debt</span>
                    </div>
                    <div class="checkpoint-option" onclick="checkCheckpoint2(2)">
                        <input type="radio" name="checkpoint2" value="2">
                        <span>C) Celebrate because you're spending almost everything</span>
                    </div>
                    <div class="checkpoint-option" onclick="checkCheckpoint2(3)">
                        <input type="radio" name="checkpoint2" value="3">
                        <span>D) Increase spending since you're doing well</span>
                    </div>
                </div>

                <div class="checkpoint-feedback" id="checkpoint2-feedback">
                    <div class="checkpoint-feedback-icon"></div>
                    <div class="checkpoint-feedback-title"></div>
                    <div class="checkpoint-explanation"></div>
                </div>

                <button class="btn-continue" id="checkpoint2-continue" onclick="nextScreen()">Continue <span>→</span></button>
            </div>
            <div class="screen-navigation">
                <button class="btn-nav btn-prev" onclick="previousScreen()"><span>←</span> Previous</button>
                <div class="nav-spacer"></div>
            </div>
        </div>

        <!-- Screen 6: Common Mistakes -->
        <div class="lesson-screen" data-screen="6">
            <div class="screen-progress">Screen 6 of 8</div>
            <div class="lesson-section">
                <h2>Common Mistakes to Avoid</h2>
                <div class="mistakes-grid">
                    <div class="mistake-card">
                        <div class="mistake-icon"><svg width="48" height="48" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="24" cy="24" r="20" fill="#FEE2E2"/><path d="M12 18 L18 24 L24 20 L30 30 L36 26" stroke="#DC2626" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"/><path d="M30 34 L36 34 L36 28" stroke="#DC2626" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg></div>
                        <div class="mistake-title">Only Focusing on Income</div>
                        <div class="mistake-desc">Earning more won't help if you spend it all</div>
                    </div>
                    <div class="mistake-card">
                        <div class="mistake-icon"><svg width="48" height="48" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="24" cy="24" r="20" fill="#EFF6FF"/><rect x="14" y="16" width="20" height="18" rx="2" stroke="#3B82F6" stroke-width="2" fill="none"/><line x1="14"y1="22"x2="34"y2="22" stroke="#3B82F6" stroke-width="2"/><line x1="19"y1="14"x2="19"y2="18" stroke="#3B82F6" stroke-width="2" stroke-linecap="round"/><line x1="29"y1="14"x2="29"y2="18" stroke="#3B82F6" stroke-width="2" stroke-linecap="round"/></svg></div>
                        <div class="mistake-title">Forgetting Irregulars</div>
                        <div class="mistake-desc">Car repairs, holidays add up quickly</div>
                    </div>
                    <div class="mistake-card">
                        <div class="mistake-icon"><svg width="48" height="48" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="24" cy="24" r="20" fill="#FCE7F3"/><rect x="16" y="22" width="16" height="12" rx="1" stroke="#EC4899" stroke-width="2" fill="none"/><rect x="14" y="18" width="20" height="4" rx="1" fill="#EC4899" opacity="0.3"/><rect x="14" y="18" width="20" height="4" rx="1" stroke="#EC4899" stroke-width="2" fill="none"/><line x1="24"y1="18"x2="24"y2="34" stroke="#EC4899" stroke-width="2"/><path d="M24 18 Q20 14 18 16" stroke="#EC4899" stroke-width="2" fill="none"/><path d="M24 18 Q28 14 30 16" stroke="#EC4899" stroke-width="2" fill="none"/></svg></div>
                        <div class="mistake-title">Treating Gifts as Income</div>
                        <div class="mistake-desc">Birthday money isn't reliable income</div>
                    </div>
                    <div class="mistake-card">
                        <div class="mistake-icon"><svg width="48" height="48" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="24" cy="24" r="20" fill="#FEF3C7"/><path d="M16 20 L16 28 C16 30 18 32 20 32 L28 32 C30 32 32 30 32 28 L32 20" stroke="#F59E0B" stroke-width="2" fill="none"/><line x1="16"y1="20"x2="32"y2="20" stroke="#F59E0B" stroke-width="2"/><path d="M32 22 L34 22 C35 22 36 23 36 24 C36 25 35 26 34 26 L32 26" stroke="#F59E0B" stroke-width="2" fill="none"/></svg></div>
                        <div class="mistake-title">Ignoring Small Buys</div>
                        <div class="mistake-desc">$5 daily = $1,825 per year</div>
                    </div>
                </div>
            </div>
            <div class="screen-navigation">
                <button class="btn-nav btn-prev" onclick="previousScreen()"><span>←</span> Previous</button>
                <button class="btn-nav" onclick="nextScreen()">Next <span>→</span></button>
            </div>
        </div>

        <!-- Screen 7: Micro Action + Quick Reflection -->
        <div class="lesson-screen" data-screen="7">
            <div class="screen-progress">Screen 7 of 8</div>
            <div class="lesson-section">
                <div class="action-checklist">
                    <div class="checklist-title"><svg width="48" height="48" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="24" cy="24" r="20" fill="#DBEAFE"/><circle cx="24" cy="24" r="14" stroke="#3B82F6" stroke-width="2" fill="none"/><circle cx="24" cy="24" r="8" stroke="#3B82F6" stroke-width="2" fill="none"/><circle cx="24" cy="24" r="3" fill="#3B82F6"/></svg> Your Action Plan</div>
                    <p style="text-align: center; color: var(--text-secondary); margin-bottom: 15px; font-size: 14px;">
                        Complete this 5-minute exercise now:
                    </p>
                    <div class="checklist-item" onclick="toggleChecklistItem(this)">
                        <div class="checklist-checkbox"></div>
                        <div class="checklist-text">List 3 sources of income you have (or could have)</div>
                    </div>
                    <div class="checklist-item" onclick="toggleChecklistItem(this)">
                        <div class="checklist-checkbox"></div>
                        <div class="checklist-text">Write down your 5 most regular expenses</div>
                    </div>
                    <div class="checklist-item" onclick="toggleChecklistItem(this)">
                        <div class="checklist-checkbox"></div>
                        <div class="checklist-text">Calculate: Total Income - Total Expenses = ?</div>
                    </div>
                    <div class="checklist-item" onclick="toggleChecklistItem(this)">
                        <div class="checklist-checkbox"></div>
                        <div class="checklist-text">Identify if you have a surplus or deficit</div>
                    </div>
                    <div class="checklist-item" onclick="toggleChecklistItem(this)">
                        <div class="checklist-checkbox"></div>
                        <div class="checklist-text">If deficit: identify one expense to reduce</div>
                    </div>
                </div>

                <div class="reflection-box">
                    <div class="reflection-icon"><svg width="48" height="48" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="24" cy="24" r="20" fill="#F3F4F6"/><circle cx="24" cy="22" r="8" fill="#6B7280" opacity="0.3"/><circle cx="24" cy="22" r="8" stroke="#6B7280" stroke-width="2" fill="none"/><circle cx="18" cy="32" r="3" fill="#6B7280" opacity="0.5"/><circle cx="14" cy="36" r="2" fill="#6B7280" opacity="0.3"/></svg></div>
                    <div class="reflection-title">Quick Reflection</div>
                    <div class="reflection-text">
                        Do you currently have more money coming in than going out? If yes, what are you doing with the extra? If no, which expenses could you reduce? There's no judgment here—just honest awareness.
                    </div>
                </div>
            </div>
            <div class="screen-navigation">
                <button class="btn-nav btn-prev" onclick="previousScreen()"><span>←</span> Previous</button>
                <button class="btn-nav" onclick="nextScreen()">Next <span>→</span></button>
            </div>
        </div>

        <!-- Screen 8: Quiz -->
        <div class="lesson-screen" data-screen="8">
            <div class="screen-progress">Screen 8 of 8</div>
            <!-- Lesson Quiz -->
            <div class="quiz-container" id="quizContainer">
                <div class="quiz-header">
                    <h2>Lesson Quiz</h2>
                    <p>Answer these questions to unlock the next lesson. You need to answer 3 out of 4 correctly to pass.</p>
                </div>
                <div id="quizQuestions"></div>
                <button class="btn-submit-quiz" id="submitQuiz" onclick="submitQuiz()">Submit Quiz</button>
                <div id="quizResult"></div>
            </div>

            <!-- Finish Button -->
            <button class="btn-finish" id="finishBtn" onclick="finishLesson()" disabled>Finish Lesson</button>

            <div class="screen-navigation">
                <button class="btn-nav btn-prev" onclick="previousScreen()"><span>←</span> Previous</button>
                <div class="nav-spacer"></div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h4>FinanceU</h4>
                    <p>Making financial literacy accessible for everyone.</p>
                </div>
                <div class="footer-section">
                    <h4>Company</h4>
                    <ul>
                        <li><a href="/about">About Us</a></li>
                        <li><a href="/careers">Careers</a></li>
                        <li><a href="/contact">Contact</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4>Support</h4>
                    <ul>
                        <li><a href="/help">Help Center</a></li>
                        <li><a href="/privacy">Privacy Policy</a></li>
                        <li><a href="/terms">Terms of Service</a></li>
                    </ul>
                </div>
            </div>
            <div class="footer-bottom">
                <p style=" font-size: 0.85rem; opacity: 0.8; margin-bottom: 10px;">Disclaimer: FinanceU provides educational content only and does not offer financial, legal, or investment advice. Always consult with a qualified professional before making financial decisions.</p>
                <p>&copy; 2025 FinanceU. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script src="config.js"></script>
    <script src="lesson-completion.js"></script>
    <script src="animations.js"></script>
    <script>
        // Check authentication status and update nav
        async function updateNav() {
            const authButtons = document.getElementById('authButtons');

            // Check localStorage for cached auth state and render immediately
            const cachedAuth = localStorage.getItem('authState');
            if (cachedAuth) {
                const authState = JSON.parse(cachedAuth);
                authButtons.innerHTML = authState.isLoggedIn
                    ? `<a href="#" onclick="logout(); return false;" class="btn-primary">Logout</a>`
                    : `<a href="login" class="btn-primary">Login</a>`;
                authButtons.style.opacity = '1';
            }

            // Then verify with server in background
            try {
                const response = await fetch(`${API_URL}/auth/me`, { credentials: 'include' });

                if (response.ok) {
                    localStorage.setItem('authState', JSON.stringify({ isLoggedIn: true }));
                    authButtons.innerHTML = `<a href="#" onclick="logout(); return false;" class="btn-primary">Logout</a>`;
                } else {
                    localStorage.setItem('authState', JSON.stringify({ isLoggedIn: false }));
                    authButtons.innerHTML = `<a href="login" class="btn-primary">Login</a>`;
                }
                authButtons.style.opacity = '1';
            } catch (error) {
                console.log('Not logged in');
                localStorage.setItem('authState', JSON.stringify({ isLoggedIn: false }));
                authButtons.innerHTML = `<a href="login" class="btn-primary">Login</a>`;
                authButtons.style.opacity = '1';
            }
        }

        // Logout function
        async function logout() {
            localStorage.removeItem('authState');
            localStorage.removeItem('token');
            localStorage.removeItem('userId');
            try {
                await fetch(`${API_URL}/auth/logout`, {
                    method: 'POST',
                    credentials: 'include'
                });
                window.location.href = '/index.html';
            } catch (error) {
                console.error('Logout error:', error);
                window.location.href = '/index.html';
            }
        }

        // Quiz data with multiple versions of each question
        const quizData = [
            {
                versions: [
                    {
                        question: "What is the golden rule about income and expenses?",
                        options: [
                            "Income should be greater than expenses to build wealth",
                            "Expenses should always equal income",
                            "Income doesn't matter as long as you're happy",
                            "Expenses should be greater than income to build credit"
                        ],
                        correct: 0
                    },
                    {
                        question: "What happens when your expenses are greater than your income?",
                        options: [
                            "You build wealth",
                            "You go into debt",
                            "You break even",
                            "Your savings increase"
                        ],
                        correct: 1
                    }
                ]
            },
            {
                versions: [
                    {
                        question: "Which of the following is considered income?",
                        options: [
                            "Rent payment",
                            "Wages from your job",
                            "Grocery shopping",
                            "Entertainment subscriptions"
                        ],
                        correct: 1
                    },
                    {
                        question: "Which of these is an example of an expense?",
                        options: [
                            "Your salary",
                            "Allowance from parents",
                            "Food and groceries",
                            "Side hustle earnings"
                        ],
                        correct: 2
                    }
                ]
            },
            {
                versions: [
                    {
                        question: "In the lesson example, Alex has $1,000 income and $950 expenses. What is this $50 difference called?",
                        options: [
                            "A deficit",
                            "A surplus",
                            "A debt",
                            "An investment"
                        ],
                        correct: 1
                    },
                    {
                        question: "If you have $1,000 coming in and $950 going out, how much can you save or invest?",
                        options: [
                            "$1,000",
                            "$950",
                            "$50",
                            "$1,950"
                        ],
                        correct: 2
                    }
                ]
            },
            {
                versions: [
                    {
                        question: "According to the lesson, how much is $5 spent daily over a year?",
                        options: [
                            "$150",
                            "$500",
                            "$1,000",
                            "$1,825"
                        ],
                        correct: 3
                    },
                    {
                        question: "What common mistake involves small daily purchases?",
                        options: [
                            "Tracking them too carefully",
                            "Ignoring small expenses that add up quickly",
                            "Always paying cash for them",
                            "Avoiding them completely"
                        ],
                        correct: 1
                    }
                ]
            }
        ];

        let currentQuestions = [];
        let userAnswers = [];
        let quizPassed = false;

        // Initialize quiz
        function initQuiz() {
            const userId = localStorage.getItem('userId');

            // Validate userId exists
            if (!userId || userId === 'null' || userId === 'undefined') {
                console.error('No valid userId found');
                document.getElementById('finishBtn').disabled = true;
                return;
            }

            const quizPassedStatus = localStorage.getItem(`lesson2_quiz_passed_${userId}`);

            if (quizPassedStatus === 'true') {
                quizPassed = true;
                document.getElementById('finishBtn').disabled = false;
                document.getElementById('quizContainer').style.display = 'none';
                return;
            }

            // Select random version of each question
            currentQuestions = quizData.map(q => {
                const randomVersion = q.versions[Math.floor(Math.random() * q.versions.length)];
                return randomVersion;
            });

            renderQuiz();
        }

        function renderQuiz() {
            const questionsContainer = document.getElementById('quizQuestions');
            questionsContainer.innerHTML = '';
            userAnswers = new Array(currentQuestions.length).fill(null);

            currentQuestions.forEach((q, qIndex) => {
                const questionCard = document.createElement('div');
                questionCard.className = 'question-card';
                questionCard.innerHTML = `
                    <div class="question-text">Question ${qIndex + 1}: ${q.question}</div>
                    ${q.options.map((option, oIndex) => `
                        <div class="answer-option" onclick="selectAnswer(${qIndex}, ${oIndex})">
                            <input type="radio" name="question${qIndex}" value="${oIndex}" style="margin-right: 10px;">
                            ${option}
                        </div>
                    `).join('')}
                `;
                questionsContainer.appendChild(questionCard);
            });

            document.getElementById('submitQuiz').disabled = false;
            document.getElementById('quizResult').innerHTML = '';
        }

        function selectAnswer(questionIndex, optionIndex) {
            userAnswers[questionIndex] = optionIndex;

            // Update visual selection
            const questionCard = document.querySelectorAll('.question-card')[questionIndex];
            const options = questionCard.querySelectorAll('.answer-option');
            options.forEach((opt, idx) => {
                opt.classList.remove('selected');
                if (idx === optionIndex) {
                    opt.classList.add('selected');
                    opt.querySelector('input').checked = true;
                }
            });
        }

        function submitQuiz() {
            // Check if all questions are answered
            if (userAnswers.includes(null)) {
                alert('Please answer all questions before submitting.');
                return;
            }

            // Calculate score
            let correct = 0;
            currentQuestions.forEach((q, index) => {
                if (userAnswers[index] === q.correct) {
                    correct++;
                }
            });

            const percentage = Math.round((correct / currentQuestions.length) * 100);
            const passed = percentage === 100;

            // Show correct/incorrect answers
            document.querySelectorAll('.question-card').forEach((card, qIndex) => {
                const options = card.querySelectorAll('.answer-option');
                options.forEach((opt, oIndex) => {
                    opt.style.pointerEvents = 'none';
                    if (oIndex === currentQuestions[qIndex].correct) {
                        opt.classList.add('correct');
                    } else if (oIndex === userAnswers[qIndex] && oIndex !== currentQuestions[qIndex].correct) {
                        opt.classList.add('incorrect');
                    }
                });
            });

            // Display result
            const resultDiv = document.getElementById('quizResult');
            if (passed) {
                quizPassed = true;
                const userId = localStorage.getItem('userId');
                localStorage.setItem(`lesson2_quiz_passed_${userId}`, 'true');
                document.getElementById('finishBtn').disabled = false;

                resultDiv.innerHTML = `
                    <div class="quiz-result pass">
                        <div class="result-icon"><svg width="48" height="48" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="24" cy="24" r="20" fill="#D1FAE5"/><circle cx="24" cy="24" r="14" stroke="#00A676" stroke-width="2" fill="none"/><path d="M18 22 L20 18 L22 22" stroke="#00A676" stroke-width="2" fill="none"/><path d="M26 22 L28 18 L30 22" stroke="#00A676" stroke-width="2" fill="none"/><path d="M16 26 Q24 32 32 26" stroke="#00A676" stroke-width="2" fill="none"/></svg></div>
                        <div class="result-text" style="color: #10b981;">Quiz Passed!</div>
                        <div class="result-score">You scored ${correct} out of ${currentQuestions.length} (${percentage}%)</div>
                        <p style="color: var(--text-secondary);">Great job! You can now finish the lesson and move to the next one.</p>
                    </div>
                `;
            } else {
                resultDiv.innerHTML = `
                    <div class="quiz-result fail">
                        <div class="result-icon"><svg width="48" height="48" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="24" cy="24" r="20" fill="#EDE9FE"/><rect x="16" y="12" width="16" height="24" rx="1" stroke="#8B5CF6" stroke-width="2" fill="none"/><line x1="20"y1="18"x2="28"y2="18" stroke="#8B5CF6" stroke-width="1.5"/><line x1="20"y1="22"x2="28"y2="22" stroke="#8B5CF6" stroke-width="1.5"/><line x1="20"y1="26"x2="25"y2="26" stroke="#8B5CF6" stroke-width="1.5"/></svg></div>
                        <div class="result-text" style="color: #dc2626;">Not quite there yet</div>
                        <div class="result-score">You scored ${correct} out of ${currentQuestions.length} (${percentage}%)</div>
                        <p style="color: var(--text-secondary); margin-bottom: 15px;">You need 100% to pass. Review the lesson and try again!</p>
                        <button class="btn-retry" onclick="retryQuiz()">Retry Quiz</button>
                    </div>
                `;
            }

            document.getElementById('submitQuiz').style.display = 'none';
        }

        function retryQuiz() {
            // Re-initialize with new question versions
            currentQuestions = quizData.map(q => {
                const randomVersion = q.versions[Math.floor(Math.random() * q.versions.length)];
                return randomVersion;
            });
            renderQuiz();
            document.getElementById('submitQuiz').style.display = 'block';
        }

        async function finishLesson() {
            if (!quizPassed) {
                alert('Please complete the quiz first!');
                return;
            }
            const success = await completeLesson('pillar1_lesson2', 1, 2);
            if (success) {
                window.location.href = 'pillar1-lessons.html';
            }
        }

        // Interactive Checklist
        function toggleChecklistItem(item) {
            item.classList.toggle('checked');
            const checkbox = item.querySelector('.checklist-checkbox');
            if (item.classList.contains('checked')) {
                checkbox.innerHTML = '<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M2 8 L6 12 L14 4" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>';
            } else {
                checkbox.textContent = '';
            }
        }

        updateNav();
        initQuiz();

        // Checkpoint functions
        let checkpoint1Answered = false;
        let checkpoint2Answered = false;

        function checkCheckpoint1(selectedOption) {
            if (checkpoint1Answered) return;
            checkpoint1Answered = true;

            const correctOption = 1; // B) Income should be greater than expenses to build wealth
            const isCorrect = selectedOption === correctOption;

            // Get elements
            const options = document.querySelectorAll('[name="checkpoint1"]').forEach((radio, index) => {
                const optionDiv = radio.parentElement;
                optionDiv.style.pointerEvents = 'none';

                if (index === correctOption) {
                    optionDiv.classList.add('correct');
                } else if (index === selectedOption && index !== correctOption) {
                    optionDiv.classList.add('incorrect');
                }

                if (index === selectedOption) {
                    radio.checked = true;
                }
            });

            // Show feedback
            const feedback = document.getElementById('checkpoint1-feedback');
            const feedbackIcon = feedback.querySelector('.checkpoint-feedback-icon');
            const feedbackTitle = feedback.querySelector('.checkpoint-feedback-title');
            const feedbackExplanation = feedback.querySelector('.checkpoint-explanation');
            const continueBtn = document.getElementById('checkpoint1-continue');

            if (isCorrect) {
                feedback.classList.add('correct');
                feedbackIcon.textContent = '<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M2 8 L6 12 L14 4" stroke="currentColor" stroke-width="2" fill="none"/></svg>';
                feedbackTitle.textContent = 'Correct!';
                feedbackExplanation.textContent = 'Excellent! The golden rule is that income should be greater than expenses. This is how you build wealth over time. The difference between income and expenses (the surplus) is what you can save and invest for your future.';
            } else {
                feedback.classList.add('incorrect');
                feedbackIcon.textContent = '•';
                feedbackTitle.textContent = 'Not quite, but that\'s okay!';
                feedbackExplanation.textContent = 'The golden rule of personal finance is that income should be greater than expenses. When you spend less than you earn, the surplus can be saved or invested, helping you build wealth over time. If expenses exceed income, you go into debt.';
            }

            feedback.classList.add('show');
            continueBtn.classList.add('show');
        }

        function checkCheckpoint2(selectedOption) {
            if (checkpoint2Answered) return;
            checkpoint2Answered = true;

            const correctOption = 1; // B) Reduce expenses or increase income - you're going into debt
            const isCorrect = selectedOption === correctOption;

            // Get elements
            const options = document.querySelectorAll('[name="checkpoint2"]').forEach((radio, index) => {
                const optionDiv = radio.parentElement;
                optionDiv.style.pointerEvents = 'none';

                if (index === correctOption) {
                    optionDiv.classList.add('correct');
                } else if (index === selectedOption && index !== correctOption) {
                    optionDiv.classList.add('incorrect');
                }

                if (index === selectedOption) {
                    radio.checked = true;
                }
            });

            // Show feedback
            const feedback = document.getElementById('checkpoint2-feedback');
            const feedbackIcon = feedback.querySelector('.checkpoint-feedback-icon');
            const feedbackTitle = feedback.querySelector('.checkpoint-feedback-title');
            const feedbackExplanation = feedback.querySelector('.checkpoint-explanation');
            const continueBtn = document.getElementById('checkpoint2-continue');

            if (isCorrect) {
                feedback.classList.add('correct');
                feedbackIcon.textContent = '<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M2 8 L6 12 L14 4" stroke="currentColor" stroke-width="2" fill="none"/></svg>';
                feedbackTitle.textContent = 'Excellent!';
                feedbackExplanation.textContent = 'Perfect! When expenses ($2,100) exceed income ($2,000), you\'re going $100 into debt each month. That\'s $1,200 per year! You need to either reduce expenses (cut unnecessary spending) or increase income (get a side hustle, ask for a raise) to avoid accumulating debt.';
            } else {
                feedback.classList.add('incorrect');
                feedbackIcon.textContent = '•';
                feedbackTitle.textContent = 'Good thinking, but there\'s a better answer!';
                feedbackExplanation.textContent = 'When your expenses ($2,100) are greater than your income ($2,000), you\'re going $100 into debt every single month. This adds up to $1,200 per year in debt! The best solution is to reduce expenses or find ways to increase income. The correct answer is to reduce expenses or increase income.';
            }

            feedback.classList.add('show');
            continueBtn.classList.add('show');
        }

        // Multi-screen navigation
        let currentScreen = 1;
        const totalScreens = 8;

        function showScreen(screenNumber) {
            // Hide all screens
            document.querySelectorAll('.lesson-screen').forEach(screen => {
                screen.classList.remove('active');
            });

            // Show the requested screen
            const targetScreen = document.querySelector(`.lesson-screen[data-screen="${screenNumber}"]`);
            if (targetScreen) {
                targetScreen.classList.add('active');
                currentScreen = screenNumber;

                // Smooth scroll to top of lesson container
                const lessonContainer = document.querySelector('.lesson-container');
                const headerOffset = 80; // Height of navbar
                const elementPosition = lessonContainer.getBoundingClientRect().top;
                const offsetPosition = elementPosition + window.pageYOffset - headerOffset;

                window.scrollTo({
                    top: offsetPosition,
                    behavior: 'smooth'
                });
            }
        }

        function nextScreen() {
            if (currentScreen < totalScreens) {
                showScreen(currentScreen + 1);
            }
        }

        function previousScreen() {
            if (currentScreen > 1) {
                showScreen(currentScreen - 1);
            }
        }

        // Initialize first screen on page load
        document.addEventListener('DOMContentLoaded', function() {
            showScreen(1);
        });
    </script>
</body>
</html>
