<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lesson 2: How Money Flows - FinanceU</title>
    <link rel="stylesheet" href="styles.css">
    <style>
        .lesson-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 60px 20px 40px;
            color: white;
        }
        .lesson-header .container {
            max-width: 900px;
            margin: 0 auto;
        }
        .lesson-number {
            font-size: 14px;
            opacity: 0.9;
            margin-bottom: 10px;
        }
        .lesson-header h1 {
            font-size: 48px;
            margin-bottom: 20px;
        }
        .lesson-objective {
            font-size: 20px;
            opacity: 0.95;
            font-weight: 500;
        }
        .lesson-content {
            max-width: 900px;
            margin: 0 auto;
            padding: 60px 20px;
        }
        .section {
            margin-bottom: 50px;
        }
        .section h2 {
            font-size: 32px;
            color: var(--text-primary);
            margin-bottom: 20px;
        }
        .section h3 {
            font-size: 24px;
            color: var(--text-primary);
            margin: 30px 0 15px;
        }
        .section p {
            font-size: 18px;
            line-height: 1.8;
            color: var(--text-secondary);
            margin-bottom: 20px;
        }
        .section ul, .section ol {
            font-size: 18px;
            line-height: 1.8;
            color: var(--text-secondary);
            margin-bottom: 20px;
            padding-left: 30px;
        }
        .section li {
            margin-bottom: 10px;
        }
        .example-box {
            background: #f0f9ff;
            border-left: 4px solid #3b82f6;
            padding: 25px;
            border-radius: 8px;
            margin: 30px 0;
        }
        .example-box h4 {
            color: #1e40af;
            font-size: 20px;
            margin-bottom: 12px;
        }
        .example-box p {
            color: #1e3a8a;
            margin-bottom: 15px;
        }
        .analogy-box {
            background: #fef3c7;
            border-left: 4px solid #f59e0b;
            padding: 25px;
            border-radius: 8px;
            margin: 30px 0;
        }
        .analogy-box h4 {
            color: #92400e;
            font-size: 20px;
            margin-bottom: 12px;
        }
        .analogy-box p {
            color: #78350f;
            margin-bottom: 15px;
        }
        .exercise-box {
            background: #f0fdf4;
            border-left: 4px solid #10b981;
            padding: 25px;
            border-radius: 8px;
            margin: 30px 0;
        }
        .exercise-box h4 {
            color: #065f46;
            font-size: 20px;
            margin-bottom: 12px;
        }
        .exercise-box p, .exercise-box ol {
            color: #064e3b;
            margin-bottom: 15px;
        }
        .key-takeaway {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 40px;
            border-radius: 12px;
            margin: 50px 0;
        }
        .key-takeaway h3 {
            font-size: 28px;
            margin-bottom: 20px;
        }
        .key-takeaway ul {
            list-style: none;
            padding: 0;
        }
        .key-takeaway li {
            padding: 12px 0;
            padding-left: 30px;
            position: relative;
            font-size: 18px;
        }
        .key-takeaway li:before {
            content: "‚úì";
            position: absolute;
            left: 0;
            font-weight: bold;
            font-size: 20px;
        }
        .lesson-nav {
            display: flex;
            justify-content: space-between;
            margin-top: 60px;
            padding-top: 40px;
            border-top: 2px solid #e5e7eb;
        }
        .lesson-nav a {
            padding: 15px 30px;
            border-radius: 8px;
            text-decoration: none;
            font-weight: 600;
            transition: all 0.3s;
        }
        .btn-back {
            background: #f3f4f6;
            color: var(--text-primary);
        }
        .btn-back:hover {
            background: #e5e7eb;
        }
        .btn-next {
            background: var(--primary);
            color: white;
        }
        .btn-next:hover {
            background: #2563eb;
        }
        .complete-section {
            background: #f0fdf4;
            border: 2px solid #10b981;
            border-radius: 12px;
            padding: 30px;
            text-align: center;
            margin: 50px 0;
        }
        .complete-section h3 {
            font-size: 24px;
            color: #065f46;
            margin-bottom: 15px;
        }
        .complete-section p {
            color: #064e3b;
            margin-bottom: 25px;
        }
        .btn-complete {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            color: white;
            padding: 15px 40px;
            border: none;
            border-radius: 8px;
            font-size: 18px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }
        .btn-complete:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(16, 185, 129, 0.4);
        }
        .btn-complete:disabled {
            background: #9ca3af;
            cursor: not-allowed;
            transform: none;
        }
        .btn-complete.completed {
            background: #4ade80;
        }
        .completion-message {
            display: none;
            color: #065f46;
            font-weight: 600;
            margin-top: 15px;
        }
        .completion-message.show {
            display: block;
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="container">
            <div class="nav-wrapper">
                <div class="logo"><a href="index.html" style="color: inherit; text-decoration: none;">Finance<span class="logo-accent">U</span></a></div>
                <ul class="nav-links">
                    <li><a href="how-money-works.html">Learn</a></li>
                    <li><a href="index.html#features">Features</a></li>
                    <li><a href="index.html#pricing">Pricing</a></li>
                    <li id="authButtons">
                        <a href="login.html" class="btn-primary">Login</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Lesson Header -->
    <div class="lesson-header">
        <div class="container">
            <div class="lesson-number">LESSON 2 ‚Ä¢ HOW MONEY WORKS</div>
            <h1>üîÑ How Money Flows</h1>
            <p class="lesson-objective"><strong>Learning Objective:</strong> Understand how money moves through your life in predictable cycles and learn to control these flows instead of letting them control you.</p>
        </div>
    </div>

    <!-- Lesson Content -->
    <div class="lesson-content">

        <!-- Introduction -->
        <div class="section">
            <h2>Money Isn't Static‚ÄîIt's Always Moving</h2>
            <p>
                Here's a common frustration: "I make money, but I don't know where it goes." Sound familiar?
            </p>
            <p>
                The problem isn't that money disappears mysteriously. The problem is most people never learned to see money as a <strong>flow</strong>‚Äîsomething constantly moving in and out of their lives.
            </p>
            <p>
                Think of money like water flowing through pipes. There's water coming IN (your income) and water going OUT (your expenses). If more comes in than goes out, you're accumulating water (savings). If more goes out than comes in, you're draining your reserves (debt).
            </p>
            <p>
                Simple, right? But here's what makes it tricky: <strong>most people focus on the inflow (getting paid) and ignore the outflow (spending)</strong>. Then they wonder why their bank account never grows, even though they're making decent money.
            </p>
        </div>

        <!-- The Money Flow Cycle -->
        <div class="section">
            <h2>The Three Channels of Money Flow</h2>
            <p>
                Money flows through your life in three main channels. Understanding these is the first step to financial control.
            </p>

            <h3>1. Inflow (Income)</h3>
            <p>
                Money coming TO you. This includes:
            </p>
            <ul>
                <li><strong>Active income:</strong> Money you earn by working (job, freelancing, tips)</li>
                <li><strong>Passive income:</strong> Money that comes in without active work (investments, rental income, royalties‚Äîmore on this later)</li>
                <li><strong>Gifts/windfalls:</strong> Birthday money, tax refunds, unexpected bonuses</li>
            </ul>
            <p>
                Most people's only inflow is active income‚Äîtrading time for money. This is fine for starting out, but it's limited. There are only so many hours in a day.
            </p>

            <h3>2. Outflow (Expenses)</h3>
            <p>
                Money leaving your possession. This is where people lose control. Outflows come in different flavors:
            </p>
            <ul>
                <li><strong>Fixed expenses:</strong> Same amount every month (rent, car payment, subscriptions)</li>
                <li><strong>Variable expenses:</strong> Changes month to month (groceries, gas, eating out)</li>
                <li><strong>Discretionary spending:</strong> Non-essential stuff (entertainment, shopping, hobbies)</li>
                <li><strong>Unexpected expenses:</strong> The car breaks. Your phone dies. Life happens.</li>
            </ul>
            <p>
                The danger zone? When outflows exceed inflows. That's when debt starts piling up.
            </p>

            <h3>3. Retention (Savings/Investments)</h3>
            <p>
                Money you keep and grow. This is the difference between inflow and outflow:
            </p>
            <p style="text-align: center; font-size: 20px; font-weight: 600; color: var(--primary); padding: 20px;">
                Retention = Inflow - Outflow
            </p>
            <p>
                If you make $2,000/month and spend $1,800, you retain $200. That $200 can become savings, investments, or an emergency fund.
            </p>
            <p>
                Here's the key insight: <strong>Wealthy people maximize retention. Broke people maximize outflow.</strong>
            </p>
        </div>

        <!-- Real Example -->
        <div class="example-box">
            <h4>üìñ Real-World Example: Two Students, Same Income, Different Flows</h4>
            <p>
                <strong>Student A (Alex)</strong> makes $1,500/month from a part-time job:
            </p>
            <ul>
                <li>Rent: $600</li>
                <li>Groceries: $250</li>
                <li>Subscriptions: $45 (Netflix, Spotify, gym)</li>
                <li>Phone bill: $50</li>
                <li>Gas/transportation: $100</li>
                <li>Random spending: $455 (DoorDash, Amazon, nights out)</li>
                <li><strong>Total outflow: $1,500</strong></li>
                <li><strong>Retention: $0</strong></li>
            </ul>
            <p>
                Alex is stuck. Not going backwards, but not building anything either.
            </p>
            <p>
                <strong>Student B (Jordan)</strong> also makes $1,500/month:
            </p>
            <ul>
                <li>Rent: $600 (same)</li>
                <li>Groceries: $220 (cooks more, eats out less)</li>
                <li>Subscriptions: $15 (shares Netflix, free workouts)</li>
                <li>Phone bill: $30 (switched to cheaper plan)</li>
                <li>Gas/transportation: $80 (carpools)</li>
                <li>Intentional spending: $255 (budgeted fun money)</li>
                <li><strong>Total outflow: $1,200</strong></li>
                <li><strong>Retention: $300/month = $3,600/year</strong></li>
            </ul>
            <p>
                Jordan makes the exact same income but retains $300/month. In one year, that's an emergency fund. In two years, that's money to invest. The difference? <strong>Jordan controls the outflow.</strong>
            </p>
        </div>

        <!-- Analogy -->
        <div class="analogy-box">
            <h4>üí° Simple Analogy: Your Money is a Bathtub</h4>
            <p>
                Imagine your finances as a bathtub:
            </p>
            <ul>
                <li>The <strong>faucet</strong> is your income (water flowing IN)</li>
                <li>The <strong>drain</strong> is your expenses (water flowing OUT)</li>
                <li>The <strong>water level</strong> is your savings</li>
            </ul>
            <p>
                Most people focus on turning up the faucet (making more money). But if the drain is wide open, the tub never fills. You could double your income and still have nothing saved if your spending increases to match.
            </p>
            <p>
                The secret? <strong>Control the drain size.</strong> Even a small faucet will fill the tub if the drain is plugged.
            </p>
            <p>
                Bonus: Once the tub is full (you have savings), you can redirect overflow into investments, which creates NEW faucets (passive income). Now you have multiple water sources.
            </p>
        </div>

        <!-- Why People Lose Control -->
        <div class="section">
            <h2>Why Money Flows Out Faster Than It Comes In</h2>
            <p>
                Understanding the flow is one thing. Controlling it? That's harder. Here's why most people struggle:
            </p>
            <ul>
                <li><strong>Lifestyle Inflation:</strong> As income rises, spending rises too. You get a raise and immediately "deserve" a nicer apartment or new car. The drain widens to match the faucet.</li>
                <li><strong>Invisible Outflows:</strong> Subscriptions you forgot about. $5 coffee habits. "Only $20" purchases that happen 3x a week. Small leaks drain the tub.</li>
                <li><strong>Emotional Spending:</strong> Shopping when stressed. Eating out because you're tired. Using spending to feel better. Money flows toward emotions.</li>
                <li><strong>No System:</strong> Without tracking, you're flying blind. You think you spend $200 on food but it's actually $400. Awareness precedes control.</li>
            </ul>
        </div>

        <!-- Exercise -->
        <div class="exercise-box">
            <h4>‚úèÔ∏è Exercise: Map Your Money Flow</h4>
            <p>
                Take 5 minutes to get brutally honest about your money flow. Grab paper or your phone notes:
            </p>
            <ol>
                <li><strong>Inflow:</strong> How much money comes IN each month? (Job, allowance, gifts, side hustle‚Äîadd it all up.)</li>
                <li><strong>Outflow:</strong> Estimate your monthly expenses. Break it into categories:
                    <ul>
                        <li>Fixed (rent, bills, subscriptions)</li>
                        <li>Variable (food, gas, shopping)</li>
                        <li>Surprise expenses (car repair, new shoes, etc.)</li>
                    </ul>
                </li>
                <li><strong>Retention:</strong> Subtract outflow from inflow. What's left?
                    <ul>
                        <li>Positive number? You're saving. Good!</li>
                        <li>Zero? You're stuck. Need to cut outflow or increase inflow.</li>
                        <li>Negative number? You're accumulating debt. Emergency mode.</li>
                    </ul>
                </li>
                <li><strong>Reflection:</strong> Look at your outflow. Where is money leaking that you didn't realize? What could you reduce without really feeling it?</li>
            </ol>
        </div>

        <!-- How to Control the Flow -->
        <div class="section">
            <h2>Taking Control of Your Money Flow</h2>
            <p>
                Now that you see the flow, here's how to control it:
            </p>
            <ul>
                <li><strong>Track everything for one month.</strong> Every dollar. Use an app (Mint, YNAB) or just a notes app. Awareness is the first step.</li>
                <li><strong>Pay yourself first.</strong> When money flows in, immediately move some to savings. Even $50. Treat savings like a non-negotiable expense.</li>
                <li><strong>Plug the invisible leaks.</strong> Cancel subscriptions you don't use. Audit those $5-10 purchases that feel small but add up to hundreds.</li>
                <li><strong>Set up friction for outflow.</strong> Use cash for discretionary spending. Delete saved credit cards from websites. Make spending slightly inconvenient‚Äîit helps.</li>
                <li><strong>Automate retention.</strong> Set up automatic transfers to savings the day you get paid. Money you don't see is money you don't spend.</li>
            </ul>
        </div>

        <!-- Key Takeaways -->
        <div class="key-takeaway">
            <h3>üéØ Key Takeaways</h3>
            <ul>
                <li>Money is always flowing‚ÄîIN (income), OUT (expenses), and what's RETAINED (savings)</li>
                <li>The equation: Retention = Inflow - Outflow</li>
                <li>Broke people maximize outflow; wealthy people maximize retention</li>
                <li>You can increase inflow or decrease outflow‚Äîboth work, but decreasing outflow is usually faster</li>
                <li>Lifestyle inflation is the enemy‚Äîas income rises, keep outflow steady to build wealth</li>
                <li>Small leaks (subscriptions, daily habits) drain more than you think</li>
                <li>You can't control what you don't track‚Äîawareness precedes change</li>
            </ul>
        </div>

        <!-- Completion Section -->
        <div class="complete-section">
            <h3>‚ú® Complete This Lesson</h3>
            <p>Mark this lesson as complete to track your progress through the pillar!</p>
            <button id="completeBtn" class="btn-complete" onclick="completeLesson()">Mark as Complete</button>
            <p id="completionMessage" class="completion-message">Great job! Lesson completed! üéâ</p>
        </div>

        <!-- Navigation -->
        <div class="lesson-nav">
            <a href="lesson-what-is-money.html" class="btn-back">‚Üê Previous: What is Money?</a>
            <a href="lesson-time-value.html" class="btn-next">Next: Time Value of Money ‚Üí</a>
        </div>

    </div>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h4>FinanceU</h4>
                    <p>Making financial literacy accessible for every college student.</p>
                </div>
                <div class="footer-section">
                    <h4>Learn</h4>
                    <ul>
                        <li><a href="how-money-works.html">How Money Works</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4>Company</h4>
                    <ul>
                        <li><a href="about.html">About Us</a></li>
                        <li><a href="careers.html">Careers</a></li>
                        <li><a href="contact.html">Contact</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4>Support</h4>
                    <ul>
                        <li><a href="help.html">Help Center</a></li>
                        <li><a href="privacy.html">Privacy Policy</a></li>
                        <li><a href="terms.html">Terms of Service</a></li>
                    </ul>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2024 FinanceU. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script src="config.js"></script>
    <script>
        const LESSON_ID = 'money-flows';

        // Check authentication status and update nav
        async function updateNav() {
            try {
                const response = await fetch(`${API_URL}/auth/me`, {
                    credentials: 'include'
                });

                const authButtons = document.getElementById('authButtons');

                if (response.ok) {
                    authButtons.innerHTML = `
                        <a href="dashboard.html" class="btn-primary">Dashboard</a>
                    `;
                    // Check if lesson is already completed
                    checkLessonCompletion();
                } else {
                    authButtons.innerHTML = `
                        <a href="login.html" class="btn-primary">Login</a>
                    `;
                    // Hide completion section if not logged in
                    document.querySelector('.complete-section').style.display = 'none';
                }
            } catch (error) {
                console.log('Not logged in');
                document.querySelector('.complete-section').style.display = 'none';
            }
        }

        // Check if this lesson is already completed
        async function checkLessonCompletion() {
            try {
                const response = await fetch(`${API_URL}/lessons/progress`, {
                    credentials: 'include'
                });

                if (response.ok) {
                    const data = await response.json();
                    const thisLesson = data.progress.find(p => p.lesson_id === LESSON_ID);

                    if (thisLesson && thisLesson.completed) {
                        markAsCompleted();
                    }
                }
            } catch (error) {
                console.error('Error checking lesson completion:', error);
            }
        }

        // Mark lesson as complete
        async function completeLesson() {
            const btn = document.getElementById('completeBtn');
            btn.disabled = true;
            btn.textContent = 'Saving...';

            try {
                const response = await fetch(`${API_URL}/lessons/complete`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    credentials: 'include',
                    body: JSON.stringify({ lessonId: LESSON_ID })
                });

                if (response.ok) {
                    markAsCompleted();
                } else {
                    btn.disabled = false;
                    btn.textContent = 'Mark as Complete';
                    alert('Error completing lesson. Please try again.');
                }
            } catch (error) {
                console.error('Error completing lesson:', error);
                btn.disabled = false;
                btn.textContent = 'Mark as Complete';
                alert('Error completing lesson. Please try again.');
            }
        }

        // Update UI to show lesson as completed
        function markAsCompleted() {
            const btn = document.getElementById('completeBtn');
            const message = document.getElementById('completionMessage');

            btn.textContent = '‚úì Completed';
            btn.classList.add('completed');
            btn.disabled = true;
            message.classList.add('show');
        }

        updateNav();
    </script>
</body>
</html>
