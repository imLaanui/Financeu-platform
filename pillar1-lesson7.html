<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lesson 7 - Tracking Your Money - FinanceU</title>
    <link rel="stylesheet" href="styles.css">
    <style>
        .lesson-container { max-width: 800px; margin: 0 auto; padding: 40px 20px; }
        .lesson-header { text-align: center; margin-bottom: 40px; padding-bottom: 20px; border-bottom: 3px solid var(--primary-color); }
        .lesson-header h1 { font-size: 36px; color: var(--text-primary); margin-bottom: 10px; }
        .lesson-header .lesson-number { color: var(--primary-color); font-size: 18px; font-weight: 600; margin-bottom: 5px; }
        .lesson-section { background: white; padding: 30px; border-radius: 12px; margin-bottom: 25px; box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1); }
        .lesson-section h2 { color: var(--primary-color); font-size: 24px; margin-bottom: 15px; }
        .lesson-section p { line-height: 1.8; color: var(--text-secondary); margin-bottom: 15px; }
        .lesson-section ul { line-height: 1.8; color: var(--text-secondary); margin-left: 20px; margin-bottom: 15px; }
        .visual-box { background: linear-gradient(135deg, #667eea15 0%, #764ba215 100%); border-left: 4px solid var(--primary-color); padding: 20px; border-radius: 8px; margin: 20px 0; }
        .visual-box h3 { color: var(--primary-color); margin-bottom: 15px; font-size: 18px; }
        .tracking-methods { display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; margin-top: 15px; }
        .method-card { background: white; padding: 20px; border-radius: 8px; text-align: center; border: 2px solid #3b82f6; }
        .action-box { background: #10b98120; border-left: 4px solid #10b981; padding: 20px; border-radius: 8px; }
        .action-box h3 { color: #10b981; margin-bottom: 10px; }
        .reflection-box { background: #f59e0b20; border-left: 4px solid #f59e0b; padding: 20px; border-radius: 8px; }
        .reflection-box h3 { color: #f59e0b; margin-bottom: 10px; }
        .mistakes-list { background: #fee2e2; padding: 20px; border-radius: 8px; border-left: 4px solid #dc2626; }
        .mistakes-list h3 { color: #dc2626; margin-bottom: 15px; }
        .btn-finish { display: block; width: 100%; max-width: 400px; margin: 30px auto; padding: 18px; background: var(--primary-color); color: white; text-align: center; text-decoration: none; border-radius: 8px; font-size: 18px; font-weight: 600; transition: background 0.2s; border: none; cursor: pointer; }
        .btn-finish:hover { background: #2563eb; }
        .back-link { display: inline-block; margin-bottom: 20px; color: var(--primary-color); text-decoration: none; font-weight: 600; }
        .back-link:hover { text-decoration: underline; }
        .quiz-container { background: linear-gradient(135deg, #667eea15 0%, #764ba215 100%); border: 2px solid var(--primary-color); border-radius: 12px; padding: 30px; margin: 40px 0 30px 0; }
        .quiz-header { text-align: center; margin-bottom: 25px; }
        .quiz-header h2 { color: var(--primary-color); font-size: 28px; margin-bottom: 10px; }
        .quiz-header p { color: var(--text-secondary); font-size: 16px; }
        .question-card { background: white; padding: 25px; border-radius: 8px; margin-bottom: 20px; box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1); }
        .question-text { font-size: 18px; font-weight: 600; color: var(--text-primary); margin-bottom: 15px; }
        .answer-option { background: #f9fafb; padding: 15px; border: 2px solid #e5e7eb; border-radius: 8px; margin-bottom: 10px; cursor: pointer; transition: all 0.2s; }
        .answer-option:hover { border-color: var(--primary-color); background: #eff6ff; }
        .answer-option.selected { border-color: var(--primary-color); background: #dbeafe; }
        .answer-option.correct { border-color: #10b981; background: #d1fae5; }
        .answer-option.incorrect { border-color: #dc2626; background: #fee2e2; }
        .btn-submit-quiz { display: block; width: 100%; max-width: 300px; margin: 20px auto; padding: 15px; background: var(--primary-color); color: white; text-align: center; border-radius: 8px; font-size: 16px; font-weight: 600; border: none; cursor: pointer; transition: background 0.2s; }
        .btn-submit-quiz:hover { background: #2563eb; }
        .btn-submit-quiz:disabled { background: #9ca3af; cursor: not-allowed; }
        .quiz-result { background: white; padding: 25px; border-radius: 8px; text-align: center; margin-top: 20px; }
        .quiz-result.pass { border: 3px solid #10b981; }
        .quiz-result.fail { border: 3px solid #dc2626; }
        .result-icon { font-size: 48px; margin-bottom: 15px; }
        .result-text { font-size: 24px; font-weight: 700; margin-bottom: 10px; }
        .result-score { font-size: 18px; color: var(--text-secondary); margin-bottom: 20px; }
        .btn-retry { padding: 12px 24px; background: #f59e0b; color: white; border: none; border-radius: 8px; font-size: 16px; font-weight: 600; cursor: pointer; transition: background 0.2s; }
        .btn-retry:hover { background: #d97706; }
        .btn-finish:disabled { background: #9ca3af; cursor: not-allowed; opacity: 0.6; }
        @media (max-width: 768px) { .tracking-methods { grid-template-columns: 1fr; } }
    </style>
</head>
<body>
    <nav class="navbar">
        <div class="container">
            <div class="nav-wrapper">
                <div class="logo"><a href="index.html" style="color: inherit; text-decoration: none;">Finance<span class="logo-accent">U</span></a></div>
                <ul class="nav-links">
                    <li><a href="index.html">Home</a></li>
                    <li><a href="dashboard.html">Dashboard</a></li>
                    <li id="authButtons" style="opacity: 0;">
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="lesson-container">
        <a href="pillar1-lessons.html" class="back-link">‚Üê Back to Pillar 1 Lessons</a>

        <div class="lesson-header">
            <div class="lesson-number">LESSON 7</div>
            <h1>Tracking Your Money</h1>
        </div>

        <div class="lesson-section">
            <h2>Quick Intro</h2>
            <p>You can't manage what you don't measure. Most people have no idea where their money actually goes each month‚Äîit just vanishes. Tracking your money sounds tedious, but it's the single most powerful tool for financial control. Once you see your spending patterns, you gain the power to change them.</p>
        </div>

        <div class="lesson-section">
            <h2>Core Concept</h2>
            <p><strong>Tracking your money means recording what you earn and what you spend so you can see patterns, identify problems, and make informed decisions.</strong></p>
            <p><strong>Why Tracking Matters:</strong></p>
            <ul>
                <li><strong>Awareness:</strong> Most people are shocked when they actually see where money goes. That $5 daily coffee is $1,825 per year.</li>
                <li><strong>Control:</strong> You can't change habits you don't notice. Tracking reveals what needs fixing.</li>
                <li><strong>Progress:</strong> Watching your savings grow or debt shrink is motivating.</li>
                <li><strong>Prevention:</strong> Catches problems early (like subscriptions you forgot about or overspending in certain categories).</li>
            </ul>
            <p><strong>What to Track:</strong></p>
            <ul>
                <li>All income sources</li>
                <li>Every expense (yes, even the small ones)</li>
                <li>Account balances</li>
                <li>Debt payments and remaining balances</li>
                <li>Savings contributions</li>
            </ul>
        </div>

        <div class="lesson-section">
            <h2>Simple Example</h2>
            <p>Casey thinks they're careful with money but always runs out before payday. After tracking for one month:</p>
            <p><strong>Discoveries:</strong></p>
            <ul>
                <li>$180 on food delivery (didn't realize it was that much)</li>
                <li>$45 on subscriptions they forgot about (streaming services, apps)</li>
                <li>$90 on "small" purchases under $10 (snacks, impulse buys)</li>
                <li>Total: $315 in spending Casey didn't even remember</li>
            </ul>
            <p><strong>The Impact:</strong> By simply becoming aware, Casey canceled unused subscriptions ($45/month saved), reduced delivery to once a week ($120/month saved), and became more mindful of small purchases ($60/month saved). That's $225/month = $2,700/year‚Äîwithout earning a dollar more.</p>
        </div>

        <div class="visual-box">
            <h3>Three Methods to Track Your Money</h3>
            <div class="tracking-methods">
                <div class="method-card">
                    <h4 style="color: #10b981; margin-bottom: 10px;">üì± Apps</h4>
                    <p style="font-size: 13px; line-height: 1.5;"><strong>Pros:</strong> Automatic, categorizes for you, always accessible<br>
                    <strong>Cons:</strong> Requires linking accounts, learning curve<br>
                    <strong>Examples:</strong> Mint, YNAB, EveryDollar</p>
                </div>
                <div class="method-card">
                    <h4 style="color: #3b82f6; margin-bottom: 10px;">üìä Spreadsheet</h4>
                    <p style="font-size: 13px; line-height: 1.5;"><strong>Pros:</strong> Full control, customizable, no fees<br>
                    <strong>Cons:</strong> Manual entry, time-consuming<br>
                    <strong>Tools:</strong> Excel, Google Sheets, templates</p>
                </div>
                <div class="method-card">
                    <h4 style="color: #8b5cf6; margin-bottom: 10px;">üìì Pen & Paper</h4>
                    <p style="font-size: 13px; line-height: 1.5;"><strong>Pros:</strong> Simple, no tech needed, privacy<br>
                    <strong>Cons:</strong> No automatic calculations, easy to lose<br>
                    <strong>Method:</strong> Notebook or bullet journal</p>
                </div>
            </div>
            <p style="margin-top: 20px; text-align: center; font-weight: 600; color: var(--primary-color);">The best method is the one you'll actually use consistently.</p>
        </div>

        <div class="lesson-section">
            <div class="mistakes-list">
                <h3>Common Mistakes to Avoid</h3>
                <ul style="margin-left: 20px;">
                    <li><strong>Trying to be too detailed:</strong> Don't track every penny down to the cent. Round numbers and broad categories work fine.</li>
                    <li><strong>Giving up after one mistake:</strong> Forgot to track for a few days? Just start again. Perfect is the enemy of good enough.</li>
                    <li><strong>Only tracking big expenses:</strong> Small recurring charges add up fast. Track everything for at least one month to see the truth.</li>
                    <li><strong>Tracking but never reviewing:</strong> Recording data without looking at it is useless. Review weekly or monthly to spot patterns.</li>
                    <li><strong>Making it too complicated:</strong> Simple systems work better than complex ones. Start basic and add complexity only if needed.</li>
                </ul>
            </div>
        </div>

        <div class="lesson-section">
            <div class="action-box">
                <h3>üéØ Your Micro Action</h3>
                <p><strong>Track every dollar you spend for the next 3 days.</strong></p>
                <p>Choose your method (phone notes, notebook, app‚Äîanything works). For 3 days, write down EVERY purchase, no matter how small:</p>
                <ul>
                    <li>Coffee: $4</li>
                    <li>Lunch: $12</li>
                    <li>Parking: $3</li>
                    <li>Snack: $2</li>
                </ul>
                <p>At the end of 3 days, add it up. Most people are surprised by the total. This isn't about judgment‚Äîit's about awareness. You can't change what you don't see.</p>
            </div>
        </div>

        <div class="lesson-section">
            <div class="reflection-box">
                <h3>üí≠ Quick Reflection</h3>
                <p><strong>Think about this:</strong></p>
                <p>If someone asked you right now how much you spent last month, could you answer within $100? If not, you're making financial decisions blind. How comfortable are you with that? Tracking feels like a chore at first, but it's actually freeing‚Äîonce you know where your money goes, you can decide where it should go instead. That's the difference between reacting to money and controlling it.</p>
                <p style="margin-top: 15px; font-size: 14px; font-style: italic;">Reflect on your awareness of your spending.</p>
            </div>
        </div>

        <!-- Lesson Quiz -->
        <div class="quiz-container" id="quizContainer">
            <div class="quiz-header">
                <h2>Lesson Quiz</h2>
                <p>Answer these questions to unlock the next lesson. You need 80% (3 out of 4) to pass.</p>
            </div>
            <div id="quizQuestions"></div>
            <button class="btn-submit-quiz" id="submitQuiz" onclick="submitQuiz()">Submit Quiz</button>
            <div id="quizResult"></div>
        </div>

        <button class="btn-finish" id="finishBtn" onclick="finishLesson()" disabled>Finish Lesson</button>
    </div>

    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h4>FinanceU</h4>
                    <p>Making financial literacy accessible for everyone.</p>
                </div>
                <div class="footer-section">
                    <h4>Company</h4>
                    <ul>
                        <li><a href="about.html">About Us</a></li>
                        <li><a href="careers.html">Careers</a></li>
                        <li><a href="contact.html">Contact</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4>Support</h4>
                    <ul>
                        <li><a href="help.html">Help Center</a></li>
                        <li><a href="privacy.html">Privacy Policy</a></li>
                        <li><a href="terms.html">Terms of Service</a></li>
                    </ul>
                </div>
            </div>
            <div class="footer-bottom">
                <p style="font-size: 0.85rem; opacity: 0.8; margin-bottom: 10px;">Disclaimer: FinanceU provides educational content only and does not offer financial, legal, or investment advice. Always consult with a qualified professional before making financial decisions.</p>
                <p>&copy; 2025 FinanceU. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script src="config.js"></script>
    <script>
        async function updateNav() {
            try {
                const response = await fetch(`${API_URL}/auth/me`, { credentials: 'include' });
                const authButtons = document.getElementById('authButtons');
                if (response.ok) {
                    authButtons.innerHTML = `<a href="dashboard.html" class="btn-primary">Dashboard</a>`;
                } else {
                    authButtons.innerHTML = `<a href="login.html" class="btn-primary">Login</a>`;
                }
            } catch (error) {
                console.log('Not logged in');
            }
        }

        const quizData = [
            {
                versions: [
                    {
                        question: "Why is tracking your money important?",
                        options: [
                            "It makes you feel bad about spending",
                            "It provides awareness and control over spending patterns",
                            "It's not important, just spend freely",
                            "Banks require it"
                        ],
                        correct: 1
                    },
                    {
                        question: "What is the main benefit of tracking expenses?",
                        options: [
                            "You can brag to friends",
                            "It's required by law",
                            "You can't manage what you don't measure",
                            "It increases your income"
                        ],
                        correct: 2
                    }
                ]
            },
            {
                versions: [
                    {
                        question: "In Casey's example, how much in spending did they not remember?",
                        options: [
                            "$100",
                            "$200",
                            "$315",
                            "$500"
                        ],
                        correct: 2
                    },
                    {
                        question: "How much did Casey save per year after tracking and becoming aware of spending?",
                        options: [
                            "$1,000",
                            "$2,700",
                            "$5,000",
                            "$500"
                        ],
                        correct: 1
                    }
                ]
            },
            {
                versions: [
                    {
                        question: "According to the lesson, what is the best tracking method?",
                        options: [
                            "The most expensive app",
                            "Pen and paper only",
                            "The one you'll actually use consistently",
                            "Excel spreadsheets only"
                        ],
                        correct: 2
                    },
                    {
                        question: "Which of these is a valid method for tracking money?",
                        options: [
                            "Never tracking anything",
                            "Apps, spreadsheets, or pen and paper",
                            "Only using cash",
                            "Ignoring small purchases"
                        ],
                        correct: 1
                    }
                ]
            },
            {
                versions: [
                    {
                        question: "What common mistake do people make when tracking?",
                        options: [
                            "Being too detailed and giving up",
                            "Tracking too little",
                            "Using technology",
                            "Writing things down"
                        ],
                        correct: 0
                    },
                    {
                        question: "What should you do if you forget to track for a few days?",
                        options: [
                            "Give up entirely",
                            "Feel guilty and quit",
                            "Just start again - progress over perfection",
                            "Wait until next month"
                        ],
                        correct: 2
                    }
                ]
            }
        ];

        let currentQuestions = [];
        let userAnswers = [];
        let quizPassed = false;

        function initQuiz() {
            const userId = localStorage.getItem('userId');
            const quizPassedStatus = localStorage.getItem(`lesson7_quiz_passed_${userId}`);
            if (quizPassedStatus === 'true') {
                quizPassed = true;
                document.getElementById('finishBtn').disabled = false;
                document.getElementById('quizContainer').style.display = 'none';
                return;
            }
            currentQuestions = quizData.map(q => q.versions[Math.floor(Math.random() * q.versions.length)]);
            renderQuiz();
        }

        function renderQuiz() {
            const questionsContainer = document.getElementById('quizQuestions');
            questionsContainer.innerHTML = '';
            userAnswers = new Array(currentQuestions.length).fill(null);
            currentQuestions.forEach((q, qIndex) => {
                const questionCard = document.createElement('div');
                questionCard.className = 'question-card';
                questionCard.innerHTML = `
                    <div class="question-text">Question ${qIndex + 1}: ${q.question}</div>
                    ${q.options.map((option, oIndex) => `
                        <div class="answer-option" onclick="selectAnswer(${qIndex}, ${oIndex})">
                            <input type="radio" name="question${qIndex}" value="${oIndex}" style="margin-right: 10px;">
                            ${option}
                        </div>
                    `).join('')}
                `;
                questionsContainer.appendChild(questionCard);
            });
            document.getElementById('submitQuiz').disabled = false;
            document.getElementById('quizResult').innerHTML = '';
        }

        function selectAnswer(questionIndex, optionIndex) {
            userAnswers[questionIndex] = optionIndex;
            const questionCard = document.querySelectorAll('.question-card')[questionIndex];
            const options = questionCard.querySelectorAll('.answer-option');
            options.forEach((opt, idx) => {
                opt.classList.remove('selected');
                if (idx === optionIndex) {
                    opt.classList.add('selected');
                    opt.querySelector('input').checked = true;
                }
            });
        }

        function submitQuiz() {
            if (userAnswers.includes(null)) {
                alert('Please answer all questions before submitting.');
                return;
            }
            let correct = 0;
            currentQuestions.forEach((q, index) => {
                if (userAnswers[index] === q.correct) correct++;
            });
            const percentage = Math.round((correct / currentQuestions.length) * 100);
            const passed = percentage >= 80;
            document.querySelectorAll('.question-card').forEach((card, qIndex) => {
                const options = card.querySelectorAll('.answer-option');
                options.forEach((opt, oIndex) => {
                    opt.style.pointerEvents = 'none';
                    if (oIndex === currentQuestions[qIndex].correct) {
                        opt.classList.add('correct');
                    } else if (oIndex === userAnswers[qIndex] && oIndex !== currentQuestions[qIndex].correct) {
                        opt.classList.add('incorrect');
                    }
                });
            });
            const resultDiv = document.getElementById('quizResult');
            if (passed) {
                quizPassed = true;
                const userId = localStorage.getItem('userId');
                localStorage.setItem(`lesson7_quiz_passed_${userId}`, 'true');
                document.getElementById('finishBtn').disabled = false;
                resultDiv.innerHTML = `
                    <div class="quiz-result pass">
                        <div class="result-icon">üéâ</div>
                        <div class="result-text" style="color: #10b981;">Quiz Passed!</div>
                        <div class="result-score">You scored ${correct} out of ${currentQuestions.length} (${percentage}%)</div>
                        <p style="color: var(--text-secondary);">Great job! You can now finish the lesson and move to the next one.</p>
                    </div>
                `;
            } else {
                resultDiv.innerHTML = `
                    <div class="quiz-result fail">
                        <div class="result-icon">üìö</div>
                        <div class="result-text" style="color: #dc2626;">Not quite there yet</div>
                        <div class="result-score">You scored ${correct} out of ${currentQuestions.length} (${percentage}%)</div>
                        <p style="color: var(--text-secondary); margin-bottom: 15px;">You need 80% to pass. Review the lesson and try again!</p>
                        <button class="btn-retry" onclick="retryQuiz()">Retry Quiz</button>
                    </div>
                `;
            }
            document.getElementById('submitQuiz').style.display = 'none';
        }

        function retryQuiz() {
            currentQuestions = quizData.map(q => q.versions[Math.floor(Math.random() * q.versions.length)]);
            renderQuiz();
            document.getElementById('submitQuiz').style.display = 'block';
        }

        function finishLesson() {
            if (!quizPassed) {
                alert('Please complete the quiz first!');
                return;
            }
            const completed = JSON.parse(localStorage.getItem(`pillar1_completed_${localStorage.getItem('userId')}`) || '[]');
            if (!completed.includes(7)) {
                completed.push(7);
                localStorage.setItem(`pillar1_completed_${localStorage.getItem('userId')}`, JSON.stringify(completed));
            }
            window.location.href = 'pillar1-lessons.html';
        }

        updateNav();
        initQuiz();
    </script>
</body>
</html>
