<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lesson 5 - Avoiding Fees - FinanceU</title>
    <link rel="icon" type="image/svg+xml" href="assets/favicon.svg">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap');

        * {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
        }

        body {
            background: #0f0f0f;
            overflow-x: hidden;
        }

        /* Gradient text */
        .gradient-text {
            background: linear-gradient(135deg, #e5e7eb 0%, #9ca3af 50%, #e5e7eb 100%);
            background-size: 200% 200%;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: gradientShift 5s ease infinite;
        }

        @keyframes gradientShift {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }

        /* Navigation */
        .nav-blur {
            backdrop-filter: blur(12px);
            background: rgba(15, 15, 15, 0.9);
            border-bottom: 1px solid rgba(156, 163, 175, 0.15);
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.5);
        }

        /* Progress bar */
        .progress-container {
            position: fixed;
            top: 70px;
            left: 0;
            right: 0;
            height: 4px;
            background: rgba(31, 41, 55, 0.8);
            z-index: 40;
        }

        .progress-bar {
            height: 100%;
            background: linear-gradient(90deg, #3b82f6, #8b5cf6, #3b82f6);
            background-size: 200% 100%;
            transition: width 0.5s ease;
            animation: shimmer 2s ease-in-out infinite;
        }

        @keyframes shimmer {
            0%, 100% { background-position: 0% 0%; }
            50% { background-position: 100% 0%; }
        }

        /* Floating particles */
        .particle {
            position: absolute;
            border-radius: 50%;
            pointer-events: none;
            opacity: 0.2;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0) rotate(0deg); }
            50% { transform: translateY(-30px) rotate(180deg); }
        }

        /* 3D Button Effect */
        .btn-3d {
            transform-style: preserve-3d;
            transition: all 0.3s ease;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3), 0 8px 16px rgba(0, 0, 0, 0.2);
        }

        .btn-3d:hover {
            transform: translateY(-4px) translateZ(10px);
            box-shadow: 0 12px 24px rgba(0, 0, 0, 0.4), 0 16px 32px rgba(0, 0, 0, 0.3), 0 0 40px rgba(209, 213, 219, 0.2);
        }

        /* Content cards */
        .content-card {
            background: linear-gradient(135deg, rgba(31, 41, 55, 0.9) 0%, rgba(17, 24, 39, 0.95) 100%);
            backdrop-filter: blur(20px);
            border: 2px solid rgba(75, 85, 99, 0.4);
            transition: all 0.4s ease;
        }

        .content-card:hover {
            transform: translateY(-8px);
            border-color: rgba(59, 130, 246, 0.6);
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.9), 0 0 40px rgba(59, 130, 246, 0.2);
        }

        /* Interactive card - clickable */
        .interactive-card {
            background: linear-gradient(135deg, rgba(31, 41, 55, 0.9) 0%, rgba(17, 24, 39, 0.95) 100%);
            backdrop-filter: blur(20px);
            border: 2px solid rgba(75, 85, 99, 0.4);
            transition: all 0.4s ease;
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }

        .interactive-card:hover {
            transform: translateY(-8px);
            border-color: rgba(59, 130, 246, 0.6);
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.9), 0 0 40px rgba(59, 130, 246, 0.2);
        }

        .interactive-card.revealed {
            border-color: rgba(239, 68, 68, 0.8);
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.9), 0 0 40px rgba(239, 68, 68, 0.3);
        }

        .card-front, .card-back {
            transition: opacity 0.3s ease;
        }

        .card-back {
            display: none;
            opacity: 0;
        }

        .interactive-card.revealed .card-front {
            display: none;
        }

        .interactive-card.revealed .card-back {
            display: block;
            opacity: 1;
            animation: fadeIn 0.5s ease;
        }

        .click-indicator {
            position: absolute;
            top: 10px;
            right: 10px;
            background: rgba(59, 130, 246, 0.3);
            color: #60a5fa;
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        /* Warning card */
        .warning-card {
            background: linear-gradient(135deg, rgba(239, 68, 68, 0.1) 0%, rgba(17, 24, 39, 0.95) 100%);
            backdrop-filter: blur(20px);
            border: 2px solid rgba(239, 68, 68, 0.3);
            transition: all 0.4s ease;
        }

        .warning-card:hover {
            transform: translateY(-8px);
            border-color: rgba(239, 68, 68, 0.6);
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.9), 0 0 40px rgba(239, 68, 68, 0.2);
        }

        /* Success card */
        .success-card {
            background: linear-gradient(135deg, rgba(16, 185, 129, 0.1) 0%, rgba(17, 24, 39, 0.95) 100%);
            backdrop-filter: blur(20px);
            border: 2px solid rgba(16, 185, 129, 0.3);
            transition: all 0.4s ease;
        }

        .success-card:hover {
            transform: translateY(-8px);
            border-color: rgba(16, 185, 129, 0.6);
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.9), 0 0 40px rgba(16, 185, 129, 0.2);
        }

        /* Quiz option */
        .quiz-option {
            background: linear-gradient(135deg, rgba(31, 41, 55, 0.8) 0%, rgba(17, 24, 39, 0.9) 100%);
            border: 2px solid rgba(75, 85, 99, 0.4);
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .quiz-option:hover {
            border-color: rgba(59, 130, 246, 0.6);
            background: linear-gradient(135deg, rgba(59, 130, 246, 0.1) 0%, rgba(17, 24, 39, 0.9) 100%);
        }

        .quiz-option.selected {
            border-color: rgba(59, 130, 246, 0.8);
            background: linear-gradient(135deg, rgba(59, 130, 246, 0.15) 0%, rgba(17, 24, 39, 0.9) 100%);
        }

        .quiz-option.correct {
            border-color: rgba(16, 185, 129, 0.8);
            background: linear-gradient(135deg, rgba(16, 185, 129, 0.15) 0%, rgba(17, 24, 39, 0.9) 100%);
        }

        .quiz-option.incorrect {
            border-color: rgba(239, 68, 68, 0.8);
            background: linear-gradient(135deg, rgba(239, 68, 68, 0.15) 0%, rgba(17, 24, 39, 0.9) 100%);
            animation: shake 0.5s;
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }

        /* Fade in animation */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .fade-in {
            animation: fadeInUp 0.6s ease-out;
        }

        /* Glow effects */
        .glow-blue {
            box-shadow: 0 0 20px rgba(59, 130, 246, 0.4), 0 0 40px rgba(59, 130, 246, 0.2);
        }

        .glow-green {
            box-shadow: 0 0 20px rgba(16, 185, 129, 0.4), 0 0 40px rgba(16, 185, 129, 0.2);
        }

        .glow-red {
            box-shadow: 0 0 20px rgba(239, 68, 68, 0.4), 0 0 40px rgba(239, 68, 68, 0.2);
        }

        /* Pulse animation */
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .pulse-animation {
            animation: pulse 2s ease-in-out infinite;
        }
    </style>
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            lucide.createIcons();
        });
    </script>
</head>
<body class="min-h-screen relative" style="color: #d1d5db;">
    <!-- Floating Particles -->
    <div id="particles-container" style="position: fixed; width: 100%; height: 100%; top: 0; left: 0; pointer-events: none; z-index: 1;"></div>

    <!-- Navigation -->
    <nav class="fixed top-0 left-0 right-0 z-50 nav-blur">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <a href="/" class="flex items-center space-x-2">
                    <div class="w-10 h-10 rounded-full bg-gradient-to-br from-gray-200 to-gray-400 glow-blue flex items-center justify-center font-bold text-xl" style="color: #1f2937;">
                        F
                    </div>
                    <span class="text-2xl font-bold gradient-text">FinanceU</span>
                </a>

                <div class="hidden md:flex items-center space-x-6">
                    <a href="/" class="text-gray-400 hover:text-gray-200 transition-colors font-medium">Home</a>
                    <a href="/dashboard" class="text-gray-400 hover:text-gray-200 transition-colors font-medium">Dashboard</a>
                </div>

                <div class="flex items-center space-x-4" id="authButtons">
                    <button onclick="logout()" class="btn-3d px-6 py-2.5 bg-gradient-to-r from-gray-200 to-gray-300 hover:from-gray-300 hover:to-gray-200 rounded-lg font-semibold glow-blue transition-all" style="color: #1f2937;">
                        Logout
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Progress Bar -->
    <div class="progress-container">
        <div class="progress-bar" id="progressBar" style="width: 0%;"></div>
    </div>

    <!-- Main Content -->
    <section class="min-h-screen pt-32 pb-20 relative z-10">
        <div class="container mx-auto px-6 max-w-6xl">
            <!-- Back Button -->
            <a href="/path1-lessons" class="inline-flex items-center text-gray-400 hover:text-gray-200 transition-colors mb-8 font-medium">
                <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path>
                </svg>
                Back to Path 1 Lessons
            </a>

            <!-- Lesson Header -->
            <div class="text-center mb-16 fade-in">
                <div class="inline-block px-4 py-2 rounded-full bg-red-500/20 border border-red-500/40 text-red-400 font-bold text-sm mb-4">
                    LESSON 5
                </div>
                <h1 class="text-5xl md:text-6xl font-black mb-4 text-gray-200">
                    <span class="gradient-text">Avoiding Fees & Overdrafts</span>
                </h1>
                <p class="text-xl text-gray-400 max-w-2xl mx-auto">
                    Learn how to keep your money safe and avoid costly mistakes
                </p>
            </div>

            <!-- Section 1: The Problem (Interactive) -->
            <div id="section1" class="mb-24 fade-in">
                <h2 class="text-3xl font-bold text-gray-200 mb-4 text-center">The $15 Billion Problem</h2>
                <p class="text-center text-gray-400 mb-12">Americans pay this much in overdraft fees every year. Don't be one of them.</p>

                <div class="content-card rounded-3xl p-8 text-center mb-12 pulse-animation glow-red">
                    <div class="mb-4 flex justify-center">
                        <i data-lucide="coins" class="w-16 h-16 text-green-400"></i>
                    </div>
                    <div class="text-7xl font-black text-red-400 mb-3">$15B+</div>
                    <p class="text-gray-300 text-lg mb-2">Paid in overdraft fees annually</p>
                    <p class="text-gray-400">Most could be avoided with simple habits you'll learn today</p>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                    <div class="content-card rounded-3xl p-6 text-center">
                        <div class="mb-4 flex justify-center">
                            <i data-lucide="alert-triangle" class="w-10 h-10 text-yellow-500"></i>
                        </div>
                        <h3 class="text-xl font-bold text-gray-200 mb-2">The Reality</h3>
                        <p class="text-gray-400 text-sm">One mistake can cost you $35 or more</p>
                    </div>

                    <div class="content-card rounded-3xl p-6 text-center">
                        <div class="mb-4 flex justify-center">
                            <i data-lucide="target" class="w-10 h-10 text-purple-400"></i>
                        </div>
                        <h3 class="text-xl font-bold text-gray-200 mb-2">The Goal</h3>
                        <p class="text-gray-400 text-sm">Learn to avoid ALL avoidable fees</p>
                    </div>

                    <div class="content-card rounded-3xl p-6 text-center">
                        <div class="mb-4 flex justify-center">
                            <i data-lucide="check-circle-2" class="w-10 h-10 text-green-400"></i>
                        </div>
                        <h3 class="text-xl font-bold text-gray-200 mb-2">The Solution</h3>
                        <p class="text-gray-400 text-sm">Simple daily habits = $0 in fees</p>
                    </div>
                </div>

                <div class="text-center mt-12">
                    <button onclick="nextSection()" class="btn-3d px-8 py-4 bg-gradient-to-r from-gray-200 to-gray-300 hover:from-gray-300 hover:to-gray-200 rounded-xl font-bold text-lg" style="color: #1f2937;">
                        See Common Fees ‚Üí
                    </button>
                </div>
            </div>

            <!-- Section 2: Common Fees (Click-to-Reveal) -->
            <div id="section2" class="mb-24 hidden">
                <h2 class="text-3xl font-bold text-gray-200 mb-4 text-center">Bank Fees Explained</h2>
                <p class="text-center text-gray-400 mb-12">Click each fee to see how it works and how to avoid it</p>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-12">
                    <div class="interactive-card rounded-3xl p-8 text-center" onclick="revealCard(this)">
                        <span class="click-indicator">Click Me</span>
                        <div class="card-front">
                            <div class="mb-4 flex justify-center">
                                <i data-lucide="alert-triangle" class="w-16 h-16 text-yellow-500"></i>
                            </div>
                            <h3 class="text-2xl font-bold text-gray-200 mb-2">Overdraft Fee</h3>
                            <div class="text-5xl font-black text-red-400 my-4">$35</div>
                            <p class="text-gray-400">What is this?</p>
                        </div>
                        <div class="card-back">
                            <div class="mb-3 flex justify-center">
                                <i data-lucide="heart-crack" class="w-10 h-10 text-red-400"></i>
                            </div>
                            <p class="text-red-400 font-bold mb-3">When you spend more than you have</p>
                            <p class="text-gray-300 text-sm mb-2">Example: $5 in account, buy $10 coffee = $35 fee</p>
                            <p class="text-green-400 text-sm font-bold">Avoid: Check balance daily, keep $50-100 buffer</p>
                        </div>
                    </div>

                    <div class="interactive-card rounded-3xl p-8 text-center" onclick="revealCard(this)">
                        <span class="click-indicator">Click Me</span>
                        <div class="card-front">
                            <div class="mb-4 flex justify-center">
                                <i data-lucide="calendar" class="w-16 h-16 text-blue-400"></i>
                            </div>
                            <h3 class="text-2xl font-bold text-gray-200 mb-2">Monthly Fee</h3>
                            <div class="text-5xl font-black text-red-400 my-4">$12</div>
                            <p class="text-gray-400">What is this?</p>
                        </div>
                        <div class="card-back">
                            <div class="mb-3 flex justify-center">
                                <i data-lucide="dollar-sign" class="w-10 h-10 text-green-400"></i>
                            </div>
                            <p class="text-red-400 font-bold mb-3">Charged monthly unless you meet requirements</p>
                            <p class="text-gray-300 text-sm mb-2">Example: Minimum $500 balance or direct deposit</p>
                            <p class="text-green-400 text-sm font-bold">Avoid: Choose banks with no monthly fees</p>
                        </div>
                    </div>

                    <div class="interactive-card rounded-3xl p-8 text-center" onclick="revealCard(this)">
                        <span class="click-indicator">Click Me</span>
                        <div class="card-front">
                            <div class="mb-4 flex justify-center">
                                <i data-lucide="landmark" class="w-16 h-16 text-blue-400"></i>
                            </div>
                            <h3 class="text-2xl font-bold text-gray-200 mb-2">Out-of-Network ATM</h3>
                            <div class="text-5xl font-black text-red-400 my-4">$3-5</div>
                            <p class="text-gray-400">What is this?</p>
                        </div>
                        <div class="card-back">
                            <div class="mb-3 flex justify-center">
                                <i data-lucide="ban" class="w-10 h-10 text-red-400"></i>
                            </div>
                            <p class="text-red-400 font-bold mb-3">Using an ATM not owned by your bank</p>
                            <p class="text-gray-300 text-sm mb-2">You pay BOTH your bank's fee AND the ATM owner's fee</p>
                            <p class="text-green-400 text-sm font-bold">Avoid: Use your bank's ATMs or get cash back at stores</p>
                        </div>
                    </div>

                    <div class="interactive-card rounded-3xl p-8 text-center" onclick="revealCard(this)">
                        <span class="click-indicator">Click Me</span>
                        <div class="card-front">
                            <div class="mb-4 flex justify-center">
                                <i data-lucide="credit-card" class="w-16 h-16 text-blue-400"></i>
                            </div>
                            <h3 class="text-2xl font-bold text-gray-200 mb-2">Insufficient Funds</h3>
                            <div class="text-5xl font-black text-red-400 my-4">$35</div>
                            <p class="text-gray-400">What is this?</p>
                        </div>
                        <div class="card-back">
                            <div class="mb-3 flex justify-center">
                                <i data-lucide="x-circle" class="w-10 h-10 text-red-400"></i>
                            </div>
                            <p class="text-red-400 font-bold mb-3">When a payment is declined for low balance</p>
                            <p class="text-gray-300 text-sm mb-2">Similar to overdraft, but payment doesn't go through</p>
                            <p class="text-green-400 text-sm font-bold">Avoid: Same as overdraft - check balance daily!</p>
                        </div>
                    </div>
                </div>

                <div class="content-card rounded-3xl p-6 text-center">
                    <p class="text-gray-300 flex items-start gap-2 justify-center">
                        <i data-lucide="lightbulb" class="w-5 h-5 text-yellow-400 flex-shrink-0 mt-1"></i>
                        <span><span class="text-blue-400 font-bold">Good news:</span> Many banks now offer accounts with NO monthly fees and NO overdraft fees. You just need to know what to look for.</span>
                    </p>
                </div>

                <div class="text-center mt-12">
                    <button onclick="nextSection()" class="btn-3d px-8 py-4 bg-gradient-to-r from-gray-200 to-gray-300 hover:from-gray-300 hover:to-gray-200 rounded-xl font-bold text-lg" style="color: #1f2937;">
                        Learn About Overdrafts ‚Üí
                    </button>
                </div>
            </div>

            <!-- Section 3: What is Overdraft (Visual Example) -->
            <div id="section3" class="mb-24 hidden">
                <h2 class="text-3xl font-bold text-gray-200 mb-8 text-center">What is an Overdraft?</h2>

                <div class="content-card rounded-3xl p-8 mb-8">
                    <p class="text-gray-300 text-lg mb-6 text-center">
                        An <span class="text-red-400 font-bold">overdraft</span> happens when you spend more money than you have in your account. Your balance goes negative, and the bank charges you a fee.
                    </p>

                    <h3 class="text-xl font-bold text-gray-200 mb-6 text-center">Here's a Real Example:</h3>

                    <div class="space-y-4">
                        <div class="content-card rounded-3xl p-6 bg-blue-500/10 border-blue-500/40">
                            <div class="flex justify-between items-center">
                                <span class="text-gray-300">Starting Balance</span>
                                <span class="text-3xl font-bold text-blue-400">$50.00</span>
                            </div>
                        </div>

                        <div class="text-center text-gray-400">‚Üì</div>

                        <div class="content-card rounded-3xl p-6">
                            <div class="flex justify-between items-center">
                                <div>
                                    <p class="text-gray-200 font-semibold">Grocery Store</p>
                                    <p class="text-gray-400 text-sm">Today</p>
                                </div>
                                <span class="text-2xl font-bold text-red-400">-$60.00</span>
                            </div>
                        </div>

                        <div class="content-card rounded-3xl p-6 bg-red-500/10 border-red-500/40">
                            <div class="flex justify-between items-center">
                                <div>
                                    <p class="text-red-400 font-semibold">Overdraft Fee</p>
                                    <p class="text-gray-400 text-sm">Automatic</p>
                                </div>
                                <span class="text-2xl font-bold text-red-400">-$35.00</span>
                            </div>
                        </div>

                        <div class="text-center text-gray-400">‚Üì</div>

                        <div class="warning-card rounded-3xl p-6 text-center glow-red">
                            <div class="flex justify-between items-center">
                                <span class="text-gray-300">New Balance</span>
                                <span class="text-4xl font-black text-red-400">-$45.00</span>
                            </div>
                        </div>
                    </div>

                    <div class="mt-8 p-6 rounded-xl bg-red-500/10 border border-red-500/30">
                        <p class="text-gray-300 text-center">
                            <span class="text-red-400 font-bold">The trap:</span> That $60 purchase just cost you $95 total. And if you don't fix it quickly, you might get charged another fee tomorrow.
                        </p>
                    </div>
                </div>

                <div class="text-center">
                    <button onclick="nextSection()" class="btn-3d px-8 py-4 bg-gradient-to-r from-gray-200 to-gray-300 hover:from-gray-300 hover:to-gray-200 rounded-xl font-bold text-lg" style="color: #1f2937;">
                        See Real Scenarios ‚Üí
                    </button>
                </div>
            </div>

            <!-- Section 4: Real Scenarios (Interactive Stories) -->
            <div id="section4" class="mb-24 hidden">
                <h2 class="text-3xl font-bold text-gray-200 mb-4 text-center">What Went Wrong?</h2>
                <p class="text-center text-gray-400 mb-12">Click each scenario to discover the mistake</p>

                <div class="space-y-6">
                    <div class="interactive-card rounded-3xl p-8" onclick="revealCard(this)">
                        <span class="click-indicator">Click Me</span>
                        <div class="card-front">
                            <div class="flex items-start gap-4">
                                <div class="flex justify-center">
                                    <i data-lucide="smartphone" class="w-12 h-12 text-blue-400"></i>
                                </div>
                                <div>
                                    <h3 class="text-xl font-bold text-gray-200 mb-3">Alex's Coffee Run</h3>
                                    <p class="text-gray-400">Alex checked their bank app in the morning: $52 available. They bought coffee ($5), lunch ($12), and gas ($30). Later that day, their card was declined at dinner.</p>
                                </div>
                            </div>
                        </div>
                        <div class="card-back">
                            <div class="mb-4 flex justify-center">
                                <i data-lucide="alert-circle" class="w-10 h-10 text-orange-500"></i>
                            </div>
                            <p class="text-red-400 font-bold mb-3 text-center">THE MISTAKE:</p>
                            <p class="text-gray-300 text-center">Alex forgot about a pending Netflix charge ($15) that hadn't shown up yet. Their real available balance was only $37, not $52.</p>
                            <p class="text-green-400 font-bold text-center mt-4 flex items-center justify-center gap-2">
                                <i data-lucide="check-circle" class="w-5 h-5"></i>
                                Always account for pending charges!
                            </p>
                        </div>
                    </div>

                    <div class="interactive-card rounded-3xl p-8" onclick="revealCard(this)">
                        <span class="click-indicator">Click Me</span>
                        <div class="card-front">
                            <div class="flex items-start gap-4">
                                <div class="flex justify-center">
                                    <i data-lucide="landmark" class="w-12 h-12 text-blue-400"></i>
                                </div>
                                <div>
                                    <h3 class="text-xl font-bold text-gray-200 mb-3">Jordan's ATM Trip</h3>
                                    <p class="text-gray-400">Jordan needed $40 cash fast and used the nearest ATM. They withdrew the money and checked their balance later‚Äî$43.50 was taken out instead of $40.</p>
                                </div>
                            </div>
                        </div>
                        <div class="card-back">
                            <div class="mb-4 flex justify-center">
                                <i data-lucide="coins" class="w-10 h-10 text-green-400"></i>
                            </div>
                            <p class="text-red-400 font-bold mb-3 text-center">THE MISTAKE:</p>
                            <p class="text-gray-300 text-center">Jordan used an out-of-network ATM. Their bank charged $2.50, and the ATM owner charged $1.</p>
                            <p class="text-green-400 font-bold text-center mt-4 flex items-center justify-center gap-2">
                                <i data-lucide="check-circle" class="w-5 h-5"></i>
                                Use your bank's ATMs or get cash back at stores for free!
                            </p>
                        </div>
                    </div>

                    <div class="interactive-card rounded-3xl p-8" onclick="revealCard(this)">
                        <span class="click-indicator">Click Me</span>
                        <div class="card-front">
                            <div class="flex items-start gap-4">
                                <div class="flex justify-center">
                                    <i data-lucide="credit-card" class="w-12 h-12 text-blue-400"></i>
                                </div>
                                <div>
                                    <h3 class="text-xl font-bold text-gray-200 mb-3">Sam's Subscription Surprise</h3>
                                    <p class="text-gray-400">Sam had $15 in their account and forgot about an old Spotify subscription. The $10.99 charge went through, followed by a $35 overdraft fee when another charge tried to process.</p>
                                </div>
                            </div>
                        </div>
                        <div class="card-back">
                            <div class="mb-4 flex justify-center">
                                <i data-lucide="music" class="w-10 h-10 text-purple-400"></i>
                            </div>
                            <p class="text-red-400 font-bold mb-3 text-center">THE MISTAKE:</p>
                            <p class="text-gray-300 text-center">Sam didn't track their recurring subscriptions and didn't have enough buffer money.</p>
                            <p class="text-green-400 font-bold text-center mt-4 flex items-center justify-center gap-2">
                                <i data-lucide="check-circle" class="w-5 h-5"></i>
                                Review statements monthly to catch forgotten subscriptions!
                            </p>
                        </div>
                    </div>
                </div>

                <div class="content-card rounded-3xl p-6 text-center mt-8">
                    <p class="text-gray-300"><span class="text-yellow-400 font-bold">Learn from others:</span> These are common mistakes that happen every day. Once you know what to avoid, you'll never fall for these traps.</p>
                </div>

                <div class="text-center mt-12">
                    <button onclick="nextSection()" class="btn-3d px-8 py-4 bg-gradient-to-r from-gray-200 to-gray-300 hover:from-gray-300 hover:to-gray-200 rounded-xl font-bold text-lg" style="color: #1f2937;">
                        See Common Mistakes ‚Üí
                    </button>
                </div>
            </div>

            <!-- Section 5: Top Mistakes -->
            <div id="section5" class="mb-24 hidden">
                <h2 class="text-3xl font-bold text-gray-200 mb-8 text-center">Top Beginner Mistakes</h2>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-12">
                    <div class="warning-card rounded-3xl p-6">
                        <div class="flex items-start gap-4">
                            <div class="flex justify-center">
                                <i data-lucide="refresh-cw" class="w-10 h-10 text-blue-400"></i>
                            </div>
                            <div>
                                <h3 class="text-lg font-bold text-red-400 mb-2">Ignoring Pending Charges</h3>
                                <p class="text-gray-400 text-sm">Your app shows $100, but you have $30 pending. Your real balance is $70. Always check "pending" before spending.</p>
                            </div>
                        </div>
                    </div>

                    <div class="warning-card rounded-3xl p-6">
                        <div class="flex items-start gap-4">
                            <div class="flex justify-center">
                                <i data-lucide="calendar" class="w-10 h-10 text-blue-400"></i>
                            </div>
                            <div>
                                <h3 class="text-lg font-bold text-red-400 mb-2">Forgetting Automatic Payments</h3>
                                <p class="text-gray-400 text-sm">Gym, Netflix, Spotify‚Äîthese charge automatically. Write them down or they'll surprise you when your balance is low.</p>
                            </div>
                        </div>
                    </div>

                    <div class="warning-card rounded-3xl p-6">
                        <div class="flex items-start gap-4">
                            <div class="flex justify-center">
                                <i data-lucide="help-circle" class="w-10 h-10 text-gray-400"></i>
                            </div>
                            <div>
                                <h3 class="text-lg font-bold text-red-400 mb-2">Not Checking Balance Daily</h3>
                                <p class="text-gray-400 text-sm">30 seconds every morning could save you $35+ in fees. Make it a habit like checking your phone.</p>
                            </div>
                        </div>
                    </div>

                    <div class="warning-card rounded-3xl p-6">
                        <div class="flex items-start gap-4">
                            <div class="flex justify-center">
                                <i data-lucide="coins" class="w-10 h-10 text-green-400"></i>
                            </div>
                            <div>
                                <h3 class="text-lg font-bold text-red-400 mb-2">Spending Your Last Dollar</h3>
                                <p class="text-gray-400 text-sm">If you have $20, don't spend $20. Keep a buffer ($50-100) for unexpected charges or you'll overdraft.</p>
                            </div>
                        </div>
                    </div>

                    <div class="warning-card rounded-3xl p-6">
                        <div class="flex items-start gap-4">
                            <div class="flex justify-center">
                                <i data-lucide="landmark" class="w-10 h-10 text-blue-400"></i>
                            </div>
                            <div>
                                <h3 class="text-lg font-bold text-red-400 mb-2">Using Any ATM</h3>
                                <p class="text-gray-400 text-sm">Out-of-network ATMs charge $3-5 per withdrawal. Find your bank's ATMs or get cash back at stores for free.</p>
                            </div>
                        </div>
                    </div>

                    <div class="warning-card rounded-3xl p-6">
                        <div class="flex items-start gap-4">
                            <div class="flex justify-center">
                                <i data-lucide="moon" class="w-10 h-10 text-gray-400"></i>
                            </div>
                            <div>
                                <h3 class="text-lg font-bold text-red-400 mb-2">Assuming It's Fine</h3>
                                <p class="text-gray-400 text-sm">Banks don't warn you before charging fees. It's YOUR job to track your money and avoid these situations.</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="text-center">
                    <button onclick="nextSection()" class="btn-3d px-8 py-4 bg-gradient-to-r from-gray-200 to-gray-300 hover:from-gray-300 hover:to-gray-200 rounded-xl font-bold text-lg" style="color: #1f2937;">
                        Learn Good Habits ‚Üí
                    </button>
                </div>
            </div>

            <!-- Section 6: Good Habits -->
            <div id="section6" class="mb-24 hidden">
                <h2 class="text-3xl font-bold text-gray-200 mb-4 text-center">Simple Habits to Stay Safe</h2>
                <p class="text-center text-gray-400 mb-12">These simple habits will protect your money and keep you in control</p>

                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-12">
                    <div class="success-card rounded-3xl p-6 text-center">
                        <div class="mb-4 flex justify-center">
                            <i data-lucide="sun" class="w-10 h-10 text-yellow-400"></i>
                        </div>
                        <h3 class="text-lg font-bold text-green-400 mb-2">Check Daily</h3>
                        <p class="text-gray-300 text-sm">30 seconds every morning prevents $35+ fees</p>
                    </div>

                    <div class="success-card rounded-3xl p-6 text-center">
                        <div class="mb-4 flex justify-center">
                            <i data-lucide="dollar-sign" class="w-10 h-10 text-green-400"></i>
                        </div>
                        <h3 class="text-lg font-bold text-green-400 mb-2">Keep Buffer</h3>
                        <p class="text-gray-300 text-sm">$50-100 cushion saves you from overdrafts</p>
                    </div>

                    <div class="success-card rounded-3xl p-6 text-center">
                        <div class="mb-4 flex justify-center">
                            <i data-lucide="bell" class="w-10 h-10 text-blue-400"></i>
                        </div>
                        <h3 class="text-lg font-bold text-green-400 mb-2">Set Alerts</h3>
                        <p class="text-gray-300 text-sm">Get notified before problems happen</p>
                    </div>

                    <div class="success-card rounded-3xl p-6 text-center">
                        <div class="mb-4 flex justify-center">
                            <i data-lucide="clipboard-list" class="w-10 h-10 text-gray-300"></i>
                        </div>
                        <h3 class="text-lg font-bold text-green-400 mb-2">Track Subscriptions</h3>
                        <p class="text-gray-300 text-sm">List all recurring charges so nothing surprises you</p>
                    </div>

                    <div class="success-card rounded-3xl p-6 text-center">
                        <div class="mb-4 flex justify-center">
                            <i data-lucide="eye" class="w-10 h-10 text-blue-400"></i>
                        </div>
                        <h3 class="text-lg font-bold text-green-400 mb-2">Check Pending</h3>
                        <p class="text-gray-300 text-sm">Don't just trust the "available" number</p>
                    </div>

                    <div class="success-card rounded-3xl p-6 text-center">
                        <div class="text-4xl mb-4">üèß</div>
                        <h3 class="text-lg font-bold text-green-400 mb-2">Use Your Bank's ATMs</h3>
                        <p class="text-gray-300 text-sm">Or get cash back at stores (no fee)</p>
                    </div>
                </div>

                <div class="content-card rounded-3xl p-8 text-center glow-green">
                    <h3 class="text-2xl font-bold text-green-400 mb-4">The Bottom Line</h3>
                    <p class="text-gray-300 text-lg">Avoiding fees isn't complicated. Follow these habits and you'll NEVER pay an overdraft fee. It's that simple.</p>
                </div>

                <div class="text-center mt-12">
                    <button onclick="nextSection()" class="btn-3d px-8 py-4 bg-gradient-to-r from-gray-200 to-gray-300 hover:from-gray-300 hover:to-gray-200 rounded-xl font-bold text-lg" style="color: #1f2937;">
                        Take the Quiz ‚Üí
                    </button>
                </div>
            </div>

            <!-- Section 7: Quiz -->
            <div id="section7" class="mb-24 hidden">
                <h2 class="text-3xl font-bold text-gray-200 mb-4 text-center">Lesson Quiz</h2>
                <p class="text-center text-gray-400 mb-12">Answer all questions correctly to complete the lesson (You need 100%)</p>

                <div id="quizContainer" class="space-y-6 mb-12"></div>

                <div class="text-center">
                    <button id="submitQuizBtn" onclick="submitQuiz()" class="btn-3d px-8 py-4 bg-gradient-to-r from-gray-200 to-gray-300 hover:from-gray-300 hover:to-gray-200 rounded-xl font-bold text-lg" style="color: #1f2937;">
                        Submit Quiz
                    </button>
                </div>

                <div id="quizResult" class="hidden mt-12"></div>

                <div id="finishSection" class="text-center mt-12 hidden">
                    <button onclick="finishLesson()" class="btn-3d px-10 py-5 bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 rounded-xl font-bold text-white text-xl glow-green pulse-animation flex items-center justify-center gap-2" style="margin: 0 auto;">
                        Finish Lesson
                        <i data-lucide="check" class="w-6 h-6"></i>
                    </button>
                </div>
            </div>
        </div>
    </section>

    <script src="config.js"></script>
    <script src="lesson-completion.js"></script>
    <script>
        // Floating particles
        function createParticles() {
            const container = document.getElementById('particles-container');
            const particleCount = 30;

            for (let i = 0; i < particleCount; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';

                const size = Math.random() * 4 + 2;
                particle.style.width = `${size}px`;
                particle.style.height = `${size}px`;
                particle.style.left = `${Math.random() * 100}%`;
                particle.style.top = `${Math.random() * 100}%`;
                particle.style.background = `rgba(156, 163, 175, ${Math.random() * 0.5 + 0.2})`;
                particle.style.animation = `float ${Math.random() * 10 + 10}s ease-in-out infinite`;
                particle.style.animationDelay = `${Math.random() * 5}s`;

                container.appendChild(particle);
            }
        }

        createParticles();

        // Card reveal interaction
        function revealCard(card) {
            card.classList.add('revealed');
            const indicator = card.querySelector('.click-indicator');
            if (indicator) {
                indicator.style.display = 'none';
            }
        }

        // Navigation
        let currentSection = 1;
        const totalSections = 7;

        function updateProgress() {
            const progress = (currentSection / totalSections) * 100;
            document.getElementById('progressBar').style.width = `${progress}%`;
        }

        function nextSection() {
            document.getElementById(`section${currentSection}`).classList.add('hidden');
            currentSection++;
            document.getElementById(`section${currentSection}`).classList.remove('hidden');
            document.getElementById(`section${currentSection}`).classList.add('fade-in');
            updateProgress();
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // Quiz data
        const quizQuestions = [
            {
                question: "You have $80 in your account. You have a $15 subscription charging tomorrow and $20 in pending transactions. What's the MAXIMUM you should spend today?",
                options: [
                    "$80 - that's what the app shows",
                    "$60 - subtract only pending transactions",
                    "$45 - subtract both pending and upcoming charges",
                    "$65 - subtract only the subscription"
                ],
                correct: 2
            },
            {
                question: "Your friend says overdraft fees are no big deal because the bank covers your purchase. What's the truth?",
                options: [
                    "They're right - it's free coverage",
                    "Overdraft fees are $35 each and can stack up fast",
                    "Overdraft fees only apply once per month",
                    "The bank won't let you overdraft if you're a new customer"
                ],
                correct: 1
            },
            {
                question: "What's the BEST way to avoid overdraft fees?",
                options: [
                    "Close your account every time you run low",
                    "Only use cash and never use your debit card",
                    "Check your balance daily and keep a $50-100 buffer",
                    "Apply for overdraft protection at any bank"
                ],
                correct: 2
            },
            {
                question: "You need $40 cash and you're near an ATM that's not your bank. What should you do?",
                options: [
                    "Use the ATM anyway - $3 isn't a big deal",
                    "Drive to your bank's ATM or get cash back at a store for free",
                    "Ask a stranger for cash",
                    "Withdraw more money to make the fee worth it"
                ],
                correct: 1
            },
            {
                question: "Which statement is TRUE about pending transactions?",
                options: [
                    "Pending transactions don't count until they clear",
                    "Your available balance already accounts for all pending transactions",
                    "Pending transactions can still reduce your actual available money",
                    "Pending transactions automatically cancel after 24 hours"
                ],
                correct: 2
            }
        ];

        let userAnswers = new Array(quizQuestions.length).fill(null);
        let quizPassed = false;

        function initQuiz() {
            const userId = localStorage.getItem('userId');
            if (!userId || userId === 'null' || userId === 'undefined') {
                return;
            }

            const quizPassedStatus = localStorage.getItem(`lesson5_quiz_passed_${userId}`);
            if (quizPassedStatus === 'true') {
                quizPassed = true;
                document.getElementById('quizContainer').innerHTML = '<div class="content-card rounded-3xl p-8 text-center"><p class="text-green-400 text-xl font-bold flex items-center justify-center gap-2"><i data-lucide="check-circle" class="w-6 h-6"></i> Quiz Already Completed</p></div>';
                lucide.createIcons();
                document.getElementById('submitQuizBtn').classList.add('hidden');
                document.getElementById('finishSection').classList.remove('hidden');
                return;
            }

            renderQuiz();
        }

        function renderQuiz() {
            const container = document.getElementById('quizContainer');
            container.innerHTML = '';

            quizQuestions.forEach((q, qIndex) => {
                const questionDiv = document.createElement('div');
                questionDiv.className = 'content-card quiz-question-card rounded-3xl p-8';
                questionDiv.setAttribute('data-question', qIndex);
                questionDiv.innerHTML = `
                    <h3 class="text-xl font-bold text-gray-200 mb-6">Question ${qIndex + 1}: ${q.question}</h3>
                    <div class="space-y-3">
                        ${q.options.map((option, oIndex) => `
                            <div class="quiz-option rounded-xl p-4" onclick="selectAnswer(${qIndex}, ${oIndex})">
                                <input type="radio" name="question${qIndex}" value="${oIndex}" class="mr-3">
                                <span class="text-gray-300">${option}</span>
                            </div>
                        `).join('')}
                    </div>
                `;
                container.appendChild(questionDiv);
            });
        }

        function selectAnswer(questionIndex, optionIndex) {
            userAnswers[questionIndex] = optionIndex;

            const questionCard = document.querySelector(`.quiz-question-card[data-question="${questionIndex}"]`);
            const options = questionCard.querySelectorAll('.quiz-option');
            options.forEach((opt, idx) => {
                opt.classList.remove('selected');
                if (idx === optionIndex) {
                    opt.classList.add('selected');
                    opt.querySelector('input').checked = true;
                }
            });
        }

        function submitQuiz() {
            if (userAnswers.includes(null)) {
                alert('Please answer all questions before submitting.');
                return;
            }

            let correct = 0;
            quizQuestions.forEach((q, index) => {
                if (userAnswers[index] === q.correct) {
                    correct++;
                }
            });

            const passed = correct === quizQuestions.length;

            // Show correct/incorrect
            document.querySelectorAll('.quiz-question-card').forEach((card, qIndex) => {
                const options = card.querySelectorAll('.quiz-option');
                options.forEach((opt, oIndex) => {
                    opt.style.pointerEvents = 'none';
                    if (oIndex === quizQuestions[qIndex].correct) {
                        opt.classList.add('correct');
                    } else if (oIndex === userAnswers[qIndex] && oIndex !== quizQuestions[qIndex].correct) {
                        opt.classList.add('incorrect');
                    }
                });
            });

            const resultDiv = document.getElementById('quizResult');
            if (passed) {
                quizPassed = true;
                const userId = localStorage.getItem('userId');
                localStorage.setItem(`lesson5_quiz_passed_${userId}`, 'true');

                resultDiv.innerHTML = `
                    <div class="content-card rounded-3xl p-10 text-center glow-green">
                        <div class="mb-4 flex justify-center">
                            <i data-lucide="party-popper" class="w-16 h-16 text-green-400"></i>
                        </div>
                        <h3 class="text-3xl font-bold text-green-400 mb-4">Perfect Score!</h3>
                        <p class="text-gray-300 text-lg mb-2">You scored ${correct} out of ${quizQuestions.length} (100%)</p>
                        <p class="text-gray-400">You now know how to keep your money safe and avoid costly fees!</p>
                    </div>
                `;
                lucide.createIcons();
                document.getElementById('finishSection').classList.remove('hidden');
            } else {
                resultDiv.innerHTML = `
                    <div class="content-card rounded-3xl p-10 text-center" style="border-color: rgba(239, 68, 68, 0.6);">
                        <div class="mb-4 flex justify-center">
                            <i data-lucide="book-open" class="w-16 h-16 text-blue-400"></i>
                        </div>
                        <h3 class="text-3xl font-bold text-red-400 mb-4">Not quite there yet</h3>
                        <p class="text-gray-300 text-lg mb-2">You scored ${correct} out of ${quizQuestions.length}</p>
                        <p class="text-gray-400 mb-6">You need 100% to pass. Review and try again!</p>
                        <button onclick="retryQuiz()" class="btn-3d px-8 py-4 bg-gradient-to-r from-yellow-500 to-orange-600 hover:from-yellow-600 hover:to-orange-700 rounded-xl font-bold text-white text-lg">
                            Retry Quiz
                        </button>
                    </div>
                `;
                lucide.createIcons();
            }

            resultDiv.classList.remove('hidden');
            document.getElementById('submitQuizBtn').classList.add('hidden');
        }

        function retryQuiz() {
            userAnswers = new Array(quizQuestions.length).fill(null);
            renderQuiz();
            document.getElementById('quizResult').classList.add('hidden');
            document.getElementById('submitQuizBtn').classList.remove('hidden');
            window.scrollTo({ top: document.getElementById('quizContainer').offsetTop - 100, behavior: 'smooth' });
        }

        async function finishLesson() {
            if (!quizPassed) {
                alert('Please complete the quiz first!');
                return;
            }

            const success = await completeLesson('path1_lesson5', 1, 5);
            if (success) {
                window.location.href = 'path1-lessons.html';
            }
        }

        // Logout
        async function logout() {
            localStorage.removeItem('authState');
            localStorage.removeItem('token');
            localStorage.removeItem('userId');
            try {
                await fetch(`${API_URL}/auth/logout`, {
                    method: 'POST',
                    credentials: 'include'
                });
                window.location.href = '/index.html';
            } catch (error) {
                console.error('Logout error:', error);
                window.location.href = '/index.html';
            }
        }

        // Initialize
        updateProgress();
        initQuiz();
    </script>
</body>
</html>
